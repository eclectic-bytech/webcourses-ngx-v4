"use strict";(self.webpackChunkwebcourses_ngx=self.webpackChunkwebcourses_ngx||[]).push([[449],{8449:(E,m,s)=>{s.r(m),s.d(m,{CourseModule:()=>L});var p=s(6895),r=s(4006),g=s(923),h=s(4859),f=s(5806),a=s(5845),v=s(658);class Z{}var e=s(5062),b=s(529),C=s(7103),A=s(1665),T=s(3679);function x(t,c){if(1&t&&(e.TgZ(0,"div",45),e._uU(1," Update course"),e._UZ(2,"br"),e.TgZ(3,"span",46),e._uU(4),e.qZA()()),2&t){const o=e.oxw();e.xp6(4),e.Oqu(o.course.title)}}function y(t,c){1&t&&(e.TgZ(0,"div",47),e._uU(1," Create a new course "),e.qZA(),e.TgZ(2,"p",48),e._uU(3,"Though you can create a course, the course builder is still in development."),e.qZA(),e.TgZ(4,"p",48),e._uU(5," Create a course today to lock in the discounted $5 / participant charge."),e._UZ(6,"br"),e._uU(7," The per participant charge on courses created after the builder launches is $7. "),e.qZA(),e.TgZ(8,"p",49)(9,"small",50),e._uU(10," Flat fees are for courses priced at $50 or less. Charges for courses priced higher are 10%, and 15% for courses created after builder launch. "),e.qZA()())}function U(t,c){1&t&&(e.TgZ(0,"span"),e._uU(1," Required. "),e.qZA())}function F(t,c){1&t&&(e.TgZ(0,"span"),e._uU(1," Must be 16 to 128 characters. "),e.qZA())}function I(t,c){1&t&&(e.TgZ(0,"span"),e._uU(1," Consecutive spaces are not accepted. "),e.qZA())}function q(t,c){if(1&t&&(e.TgZ(0,"small",51),e.YNc(1,U,2,0,"span",52),e.YNc(2,F,2,0,"span",52),e.YNc(3,I,2,0,"span",52),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",null==o.courseAddForm.controls.title.errors?null:o.courseAddForm.controls.title.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.courseAddForm.controls.title.errors?null:o.courseAddForm.controls.title.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.courseAddForm.controls.title.errors?null:o.courseAddForm.controls.title.errors.pattern)}}function k(t,c){1&t&&(e.TgZ(0,"span"),e._uU(1," Required. "),e.qZA())}function J(t,c){1&t&&(e.TgZ(0,"span"),e._uU(1," Must be 32 to 256 characters. "),e.qZA())}function N(t,c){1&t&&(e.TgZ(0,"span"),e._uU(1," Consecutive spaces are not accepted. "),e.qZA())}function Y(t,c){if(1&t&&(e.TgZ(0,"span",53),e.YNc(1,k,2,0,"span",52),e.YNc(2,J,2,0,"span",52),e.YNc(3,N,2,0,"span",52),e.qZA()),2&t){const o=e.oxw();e.xp6(1),e.Q6J("ngIf",null==o.courseAddForm.controls.short_desc.errors?null:o.courseAddForm.controls.short_desc.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.courseAddForm.controls.short_desc.errors?null:o.courseAddForm.controls.short_desc.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==o.courseAddForm.controls.short_desc.errors?null:o.courseAddForm.controls.short_desc.errors.pattern)}}function S(t,c){if(1&t){const o=e.EpF();e.TgZ(0,"div",54)(1,"div",55)(2,"div",56)(3,"div",46),e._uU(4,"Danger zone"),e.qZA(),e.TgZ(5,"div",57),e._uU(6,"Irreversible action - don't do it."),e.qZA(),e.TgZ(7,"button",58),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.deleteCourseBtn())}),e._uU(8,"Delete"),e.qZA()()()()}}const H=function(){return["/admin","publisher","courses"]};let _=(()=>{class t{constructor(o,i,n,l,u,d,M,j){this.fb=o,this.httpClient=i,this.activatedRoute=n,this.router=l,this._snackbar=u,this.courseService=d,this.configService=M,this.deleteCourseService=j,this.course=new Z,this.hideAdvanced=!0,this.waitingForApi=!1,this.courseAddForm=this.fb.group({title:["",r.kI.compose([r.kI.required,r.kI.minLength(16),r.kI.maxLength(128),r.kI.pattern("\\s?\\S+(?: \\S+)*\\s?")])],short_desc:["",r.kI.compose([r.kI.required,r.kI.minLength(32),r.kI.maxLength(256),r.kI.pattern("\\s?\\S+(?: \\S+)*\\s?")])],price:[20,r.kI.compose([r.kI.required,r.kI.min(0),r.kI.max(99999),r.kI.pattern("^[0-9]*$")])],private:"",audience:"",long_desc:"",objective:"",eval_type:""})}ngOnInit(){this.cid&&this.courseService.getAdminCourse(this.cid).subscribe(o=>{this.course=o,this.courseAddForm.patchValue(o),this.courseAddForm.controls.price.patchValue(o.price/100)})}onSubmit(){this.waitingForApi=!0,this.httpClient.post(`${this.configService.params.api.route}/admin/publisher/courses`,this.courseAddForm.value).subscribe(o=>{this.router.navigate(["/admin","publisher","builder","sorry"])},o=>{this.waitingForApi=!1},()=>{this.waitingForApi=!1})}onUpdate(){this.waitingForApi=!0,this.courseAddForm.value.price=100*this.courseAddForm.value.price,this.httpClient.patch(`${this.configService.params.api.route}/admin/publisher/courses/${this.cid}`,this.courseAddForm.value).subscribe(o=>{this.course=o,this.snackbarNotify("Course updated.")},o=>{this.snackbarNotify("Failed to update course.")},()=>{this.waitingForApi=!1})}deleteCourseBtn(){this.deleteCourseService.deleteCourseModal(this.course)}snackbarNotify(o){this._snackbar.open(o,"",{duration:3e3})}get cid(){return this.activatedRoute.snapshot.paramMap.get("cid")}static#e=this.\u0275fac=function(i){return new(i||t)(e.Y36(r.qu),e.Y36(b.eN),e.Y36(a.gz),e.Y36(a.F0),e.Y36(f.ux),e.Y36(C.N),e.Y36(A.E),e.Y36(T.j))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-course"]],decls:75,vars:19,consts:[["id","fullMainContent"],[1,"container"],["class","display-4 my-5","style","line-height: 3rem;",4,"ngIf","ngIfElse"],["newCourse",""],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","minLength","16","maxlength","128","formControlName","title","aria-describedby","titleHelp",1,"form-control","col-12","col-lg-8"],["id","titleHelp","class","form-text text-danger",4,"ngIf"],["for","short_desc"],["type","text","id","short_desc","minLength","32","maxLength","256","formControlName","short_desc","aria-describedby","short_descHelp",1,"form-control"],["id","short_descHelp",1,"form-text","text-muted"],["class","text-danger",4,"ngIf"],["for","price"],[1,"input-group","mr-sm-2"],[1,"input-group-prepend"],[1,"input-group-text"],["type","number","min","0","max","99999","id","price","formControlName","price","aria-describedby","priceCurrency",1,"form-control","col-4","col-md-3","col-lg-1"],["id","priceCurrency",1,"form-text","text-muted"],[1,"form-group","form-check","my-2"],["type","checkbox","id","private","formControlName","private",1,"form-check-input"],["for","private","aria-describedby","privateHelp",1,"form-check-label"],["id","privateHelp",1,"form-text","text-muted"],["mat-button","","color","primary","type","button","aria-controls","collapseExample",1,"my-3","border",3,"click"],[1,"text-uppercase"],[3,"innerHtml"],[3,"ngbCollapse","ngbCollapseChange"],["collapse","ngbCollapse"],["for","long_desc"],["id","long_desc","formControlName","long_desc","row","3","length","128","aria-describedby","long_descHelp",1,"form-control"],["id","long_descHelp",1,"form-text","text-muted"],["for","audience"],["type","text","id","audience","maxlength","128","formControlName","audience","aria-describedby","audienceHelp",1,"form-control","col-12","col-lg-8"],["id","audienceHelp",1,"form-text","text-muted"],["for","objective"],["id","objective","formControlName","objective","row","2","length","128",1,"form-control"],["for","eval_type"],["id","eval_type","formControlName","eval_type",1,"custom-select","mr-sm-2","col-12","col-lg-8"],["selected",""],["value","Online"],["value","Instructor"],["value","Online + Instructor"],["type","submit",1,"btn","my-4","mr-4",3,"ngClass","disabled","innerHtml"],["type","button",1,"text-primary",3,"routerLink"],["class","container border border-rounded border-secondary my-4",4,"ngIf"],[1,"display-4","my-5",2,"line-height","3rem"],[1,"h5"],[1,"display-4","my-5"],[1,"lead"],[1,"mb-5"],[1,"text-dark"],["id","titleHelp",1,"form-text","text-danger"],[4,"ngIf"],[1,"text-danger"],[1,"container","border","border-rounded","border-secondary","my-4"],[1,"row"],[1,"col","m-4"],[1,"lead","my-3"],[1,"btn","btn-danger",3,"click"]],template:function(i,n){if(1&i){const l=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,x,5,1,"div",2),e.YNc(3,y,11,0,"ng-template",null,3,e.W1O),e.TgZ(5,"form",4),e.NdJ("ngSubmit",function(){return n.cid?n.onUpdate():n.onSubmit()}),e.TgZ(6,"div",5)(7,"label",6),e._uU(8,"Title"),e.qZA(),e._UZ(9,"input",7),e.YNc(10,q,4,3,"small",8),e.qZA(),e.TgZ(11,"div",5)(12,"label",9),e._uU(13,"Short description"),e.qZA(),e._UZ(14,"input",10),e.TgZ(15,"small",11),e._uU(16," Used in catalogue directory and on course pages. "),e.YNc(17,Y,4,3,"span",12),e.qZA()(),e.TgZ(18,"div",5)(19,"label",13),e._uU(20,"Price"),e.qZA(),e.TgZ(21,"div",14)(22,"div",15)(23,"div",16),e._uU(24,"$"),e.qZA()(),e._UZ(25,"input",17),e.qZA(),e.TgZ(26,"small",18),e._uU(27,"Canadian Dollars"),e.qZA()(),e.TgZ(28,"div",19),e._UZ(29,"input",20),e.TgZ(30,"label",21),e._uU(31,"Private"),e.qZA(),e.TgZ(32,"small",22),e._uU(33,"Access-code access only; course will not show up in catalogues, and cannot be purchased."),e.qZA()(),e.TgZ(34,"div")(35,"button",23),e.NdJ("click",function(){e.CHM(l);const d=e.MAs(41);return e.KtG(d.toggle())}),e.TgZ(36,"div",24),e._UZ(37,"span",25),e.TgZ(38,"span"),e._uU(39," advanced"),e.qZA()()()(),e.TgZ(40,"div",26,27),e.NdJ("ngbCollapseChange",function(d){return n.hideAdvanced=d}),e.TgZ(42,"div",5)(43,"label",28),e._uU(44,"Long description"),e.qZA(),e._UZ(45,"textarea",29),e.TgZ(46,"small",30),e._uU(47,"Used chiefly on course pages."),e.qZA()(),e.TgZ(48,"div",5)(49,"label",31),e._uU(50,"Audience"),e.qZA(),e._UZ(51,"input",32),e.TgZ(52,"small",33),e._uU(53," Who might benefit the most from this course? E.g. Business professionals looking to improve leadership skills. "),e.qZA()(),e.TgZ(54,"div",5)(55,"label",34),e._uU(56,"Objectives"),e.qZA(),e._UZ(57,"textarea",35),e.qZA(),e.TgZ(58,"div",5)(59,"label",36),e._uU(60,"Evaluation type"),e.qZA(),e.TgZ(61,"div")(62,"select",37)(63,"option",38),e._uU(64,"Choose..."),e.qZA(),e.TgZ(65,"option",39),e._uU(66,"Online"),e.qZA(),e.TgZ(67,"option",40),e._uU(68,"Instructor"),e.qZA(),e.TgZ(69,"option",41),e._uU(70,"Online + Instructor"),e.qZA()()()()(),e._UZ(71,"button",42),e.TgZ(72,"a",43),e._uU(73," Return to your course directory "),e.qZA()()(),e.YNc(74,S,9,0,"div",44),e.qZA()}if(2&i){const l=e.MAs(4);e.Q6J("@fadeInOut",void 0),e.xp6(2),e.Q6J("ngIf",n.cid)("ngIfElse",l),e.xp6(3),e.Q6J("formGroup",n.courseAddForm),e.xp6(4),e.ekj("border-danger",n.courseAddForm.controls.title.invalid&&n.courseAddForm.controls.title.touched),e.xp6(1),e.Q6J("ngIf",n.courseAddForm.controls.title.touched),e.xp6(4),e.ekj("border-danger",n.courseAddForm.controls.short_desc.invalid&&n.courseAddForm.controls.short_desc.touched),e.xp6(3),e.Q6J("ngIf",n.courseAddForm.controls.short_desc.touched),e.xp6(18),e.uIk("aria-expanded",n.hideAdvanced),e.xp6(2),e.Q6J("innerHtml",n.hideAdvanced?"Show":"Hide",e.oJD),e.xp6(3),e.Q6J("ngbCollapse",n.hideAdvanced),e.xp6(31),e.Q6J("ngClass",n.cid?"btn-primary":"btn-success")("disabled",!n.courseAddForm.valid||n.waitingForApi)("innerHtml",n.cid?"Update":"Create",e.oJD),e.xp6(1),e.Q6J("routerLink",e.DdM(18,H)),e.xp6(2),e.Q6J("ngIf",n.cid)}},dependencies:[p.mk,p.O5,r._Y,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r.JJ,r.JL,r.nD,r.qQ,r.Fd,r.sg,r.u,g._D,h.lW,a.rH],data:{animation:[v.t]}})}return t})();const Q=[{path:"",component:_,title:"Build a new course (Cultivate Learning)"},{path:"edit/:cid",component:_,title:"Edit Course (Cultivate Learning)"}];let w=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[a.Bz.forChild(Q),a.Bz]})}return t})(),L=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[p.ez,r.UX,g.IJ,h.ot,f.ZX,w]})}return t})()}}]);