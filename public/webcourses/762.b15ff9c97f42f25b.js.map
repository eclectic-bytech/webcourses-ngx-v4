{"version":3,"file":"762.b15ff9c97f42f25b.js","mappings":"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","names":["i0","ctx_r5","CollectUserNamesComponent","constructor","ngbModal","httpClient","configService","this","ngOnInit","btnClick","names","status","post","params","api","route","subscribe","user","countDown","error","console","log","success","setInterval","percent","clearInterval","setTimeout","dismissAll","location","reload","static","core","selectors","FadeInOut","DndService","showUserOrder","activity","userOrder","Array","user_answers","forEach","aid","push","answers","find","isAid","answer","id","answer_id","factory","ClickRotateService","ActiveModeService","completionStatsService","dndService","clickRotateService","activitiesService","webcourseService","extractAnswers","extractedAnswer","activityType","lastActivityInSet","meta","activity_type","extractOnlySelectedOptions","dndExtract","activities","JSON","stringify","userSelections","activityForm","value","userAnswerPOST","activity_id","activity_supplemental","totalActivitiesCompleted","waitingForApi","after_word","i","length","j","selected","err","reduce","ActiveModeComponent","fb","activeModeService","answerValidators","radio","Validators","checkbox","text","default_answer","textarea","group","style","updateSelections","singleSelection","y","NavComponent","navService","selectedCourseService","faStepBackward","faCheck","faStepForward","faPenNib","activitySet","SaveButton","calcFollowingAid","offset","calcStartActivity","seq","courseSyllabus","findIndex","activityMeta","endOfCourse","chapter_id","endOfChapter","nextAid","NavigateByAid","ContinueButton","ReviewButton","FadeInOut2","dispatch","state","subscriber","counter","period","next","schedule","extendStyles","dest","source","importantProperties","key","hasOwnProperty","setProperty","has","removeProperty","toggleNativeDragInteractions","element","enable","userSelect","toggleVisibility","position","top","opacity","left","combineTransforms","transform","initialTransform","parseCssTimeUnitsToMs","multiplier","toLowerCase","indexOf","parseFloat","parseCssPropertyValue","computedStyle","name","getPropertyValue","split","map","part","trim","getMutableClientRect","clientRect","getBoundingClientRect","right","bottom","width","height","x","isInsideClientRect","adjustClientRect","isPointerNearClientRect","rect","threshold","pointerX","pointerY","xThreshold","yThreshold","ParentPositionTracker","_document","positions","Map","clear","cache","elements","set","scrollPosition","getViewportScrollPosition","scrollTop","scrollLeft","handleScroll","event","target","_getEventTarget","cachedPosition","get","newTop","newLeft","viewportScrollPosition","topDifference","leftDifference","node","contains","window","scrollY","scrollX","deepCloneNode","clone","cloneNode","descendantsWithId","querySelectorAll","nodeName","removeAttribute","transferCanvasData","transferInputData","transferData","selector","callback","descendantElements","cloneElements","cloneUniqueId","type","context","getContext","drawImage","passiveEventListenerOptions","normalizePassiveListenerOptions","passive","activeEventListenerOptions","dragImportantProperties","Set","DragRef","_config","_ngZone","_viewportRuler","_dragDropRegistry","_passiveTransform","_activeTransform","_hasStartedDragging","_moveEvents","Subject","_pointerMoveSubscription","Subscription","_pointerUpSubscription","_scrollSubscription","_resizeSubscription","_boundaryElement","_nativeInteractionsEnabled","_handles","_disabledHandles","_direction","dragStartDelay","_disabled","beforeStarted","started","released","ended","entered","exited","dropped","moved","_pointerDown","targetHandle","_getTargetHandle","disabled","_initializeDragSequence","_rootElement","_pointerMove","pointerPosition","_getPointerPositionOnPage","Math","abs","_pickupPositionOnPage","dragStartThreshold","isDelayElapsed","Date","now","_dragStartTime","_getDragStartDelay","container","_dropContainer","_endDragSequence","isDragging","isReceiving","preventDefault","run","_startDragSequence","constrainedPointerPosition","_getConstrainedPointerPosition","_hasMoved","_lastKnownPointerPosition","_updatePointerDirectionDelta","_updateActiveDropContainer","constrainPosition","_initialClientRect","activeTransform","_applyRootElementTransform","observers","distance","_getDragDistance","delta","_pointerDirectionDelta","_pointerUp","_nativeDragStart","withRootElement","withParent","parentDragRef","_parentPositions","registerDragItem","newValue","coerceBooleanProperty","_toggleNativeDragInteractions","handle","getPlaceholderElement","_placeholder","getRootElement","getVisibleElement","withHandles","handles","coerceElement","disabledHandles","add","withPreviewTemplate","template","_previewTemplate","withPlaceholderTemplate","_placeholderTemplate","rootElement","_removeRootElementListeners","runOutsideAngular","addEventListener","_initialTransform","undefined","SVGElement","_ownerSVGElement","ownerSVGElement","withBoundaryElement","boundaryElement","unsubscribe","change","_containInsideBoundaryOnResize","parent","_parentDragRef","dispose","remove","_anchor","_destroyPreview","_destroyPlaceholder","removeDragItem","_removeSubscriptions","complete","reset","disableHandle","enableHandle","delete","withDirection","direction","_withDropContainer","getFreeDragPosition","setFreeDragPosition","withPreviewContainer","_previewContainer","_sortFromLastPointerPosition","_preview","_previewRef","destroy","_placeholderRef","stopDragging","webkitTapHighlightColor","_rootElementTapHighlight","_stopScrolling","_animatePreviewToPlaceholder","then","_cleanupDragArtifacts","_cleanupCachedDimensions","dropPoint","isTouchEvent","_lastTouchEventTime","dropContainer","parentNode","placeholder","_createPlaceholderElement","anchor","createComment","shadowRoot","_getShadowRoot","insertBefore","_createPreviewElement","body","appendChild","replaceChild","_getPreviewInsertionPoint","start","_initialContainer","_initialIndex","getItemIndex","getScrollableParents","referenceElement","stopPropagation","isTouchSequence","isAuxiliaryMouseButton","button","isSyntheticEvent","isFakeEvent","isFakeTouchstartFromScreenReader","isFakeMousedownFromScreenReader","draggable","rootStyles","pointerMove","pointerUp","scrolled","scrollEvent","_updateOnScroll","_boundaryRect","previewTemplate","_pickupPositionInElement","matchSize","_getPointerPositionInElement","_pointerPositionAtLastDirectionChange","startDragging","_previewRect","currentIndex","isPointerOverContainer","_isOverContainer","item","previousIndex","previousContainer","drop","rawX","rawY","newContainer","_getSiblingContainerFromPosition","exit","enter","sortingDisabled","_startScrollingIfNecessary","_sortItem","_applyPreviewTransform","previewConfig","previewClass","preview","rootRect","viewRef","viewContainer","createEmbeddedView","detectChanges","getRootNode","matchElementSize","getTransform","margin","zIndex","classList","setAttribute","isArray","className","Promise","resolve","placeholderRect","duration","getTransformTransitionDurationInMs","getComputedStyle","transitionedProperties","property","prop","propertyIndex","rawDurations","rawDelays","handler","propertyName","removeEventListener","clearTimeout","timeout","placeholderConfig","placeholderTemplate","pointerEvents","elementRect","handleElement","referenceRect","point","targetTouches","_getViewportScrollPosition","pageX","pageY","touches","changedTouches","svgMatrix","getScreenCTM","svgPoint","createSVGPoint","matrixTransform","inverse","dropContainerLock","lockAxis","pickupX","pickupY","boundaryRect","previewWidth","previewHeight","_getPreviewRect","minY","maxY","clamp$1","pointerPositionOnPage","positionSinceLastChange","changeX","changeY","pointerDirectionChangeThreshold","shouldEnable","styles","currentPosition","pickupPosition","leftOverflow","rightOverflow","topOverflow","bottomOverflow","touch","mouse","scrollDifference","_cachedShadowRoot","initialParent","previewContainer","documentRef","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","round","min","max","rootNodes","nodeType","ELEMENT_NODE","wrapper","createElement","sourceRect","moveItemInArray","array","fromIndex","toIndex","from","clamp","to","SingleAxisSortStrategy","_element","_itemPositions","orientation","_previousSwap","drag","overlaps","items","withItems","sort","pointerDelta","siblings","newIndex","_getItemIndexFromPointerPosition","isHorizontal","currentItem","siblingAtNewPosition","newPosition","itemOffset","_getItemOffsetPx","siblingOffset","_getSiblingOffsetPx","oldOrder","slice","sibling","index","isDraggedItem","elementToOffset","activeDraggables","_activeDraggables","newPositionReference","_shouldEnterAsFirstChild","splice","parentElement","_cacheItemPositions","withSortPredicate","predicate","_sortPredicate","p","getActiveItemsSnapshot","reverse","updateOnScroll","elementToMeasure","a","b","immediateSibling","end","itemPositions","lastItemRect","firstItemRect","floor","SCROLL_PROXIMITY_THRESHOLD","DropListRef","autoScrollDisabled","autoScrollStep","enterPredicate","sortPredicate","sorted","_isDragging","_draggables","_siblings","_activeSiblings","_viewportScrollSubscription","_verticalScrollDirection","_horizontalScrollDirection","_stopScrollTimers","_startScrollInterval","interval","scheduler","async","isNumeric","Observable","animationFrameScheduler","pipe","takeUntil","_scrollNode","scrollStep","scrollBy","withScrollableParents","registerDropContainer","_sortStrategy","removeDropContainer","_draggingStarted","_notifyReceivingSiblings","_cacheParentPositions","_reset","previousItems","filter","every","connectedTo","withOrientation","_scrollableElements","size","_clientRect","result","scrollNode","verticalScrollDirection","horizontalScrollDirection","getElementScrollDirections","computedVertical","getVerticalScrollDirection","computedHorizontal","getHorizontalScrollDirection","scrollHeight","clientHeight","scrollWidth","clientWidth","getViewportSize","_initialScrollSnap","msScrollSnapType","scrollSnapType","_listenToScrollEvents","_stopReceiving","_canReceive","elementFromPoint","nativeElement","_startReceiving","activeSiblings","draggedItems","activeCapturingEventOptions","capture","DragDropRegistry","_dropInstances","_dragInstances","_activeDragInstances","_globalListeners","_draggingPredicate","scroll","_preventDefaultWhileDragging","_persistentTouchmoveListener","some","startsWith","e","options","config","_clearGlobalListeners","streams","observer","eventOptions","merge","ngOnDestroy","instance","ɵfac","DOCUMENT","ɵprov","DEFAULT_CONFIG","DragDrop","createDrag","createDropList","i1","CDK_DRAG_PARENT","InjectionToken","CDK_DROP_LIST_GROUP","CDK_DRAG_CONFIG","_uniqueIdCounter","CDK_DROP_LIST","CdkDropList","dragDrop","_changeDetectorRef","_scrollDispatcher","_dir","_group","_destroyed","EventEmitter","_unsortedItems","_dropListRef","data","_assignDefaults","_setupInputSyncSubscription","_handleEvents","_dropLists","_items","addItem","_syncItemsWithRef","removeItem","getSortedItems","_dragRef","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","ref","startWith","coerceArray","list","_scrollableParentsResolved","scrollableParents","getAncestorScrollContainers","scrollable","getElementRef","coerceNumberProperty","markForCheck","emit","dropEvent","draggingDisabled","listAutoScrollDisabled","listOrientation","i3","ɵdir","provide","useValue","useExisting","CDK_DRAG_HANDLE","CDK_DRAG_PLACEHOLDER","CDK_DRAG_PREVIEW","CdkDrag","_viewContainerRef","_selfHandle","_parentDrag","subscription","movedEvent","_syncInputs","ngAfterViewInit","onStable","take","_updateRootElement","_setupHandlesListener","freeDragPosition","ngOnChanges","changes","rootSelectorChange","rootElementSelector","positionChange","firstChange","closest","_getBoundaryElement","boundary","dir","templateRef","startEvent","releaseEvent","endEvent","enterEvent","exitEvent","tap","childHandleElements","switchMap","_stateChanges","handleInstance","dragRef","dirIndex","_t","ctx","DragDropModule","ɵmod","ɵinj","imports","CdkScrollableModule","DndComponent","dndMatchDataStatic","caption","activityChange","showInitialOrder","slot","showCorrectOrder","correct","orderButtons","$event","clickedElement","srcElement","markOrder","isCertainButtonAlreadyActive","querySelector","ClickRotateComponent","rotateItems","parse","assess_text","periodId","parseInt","Object","keys","showLabel","option","showMarkingType","checkIfCapsNeeded","previousAnswer","markColours","colours","showMarking","DemoFlagService","saveActivityDemoStatus","put","response","DemoFlagComponent","demoFlagService","activityDemoFlagToggle","firstActivity","BeforeAndAfterComponent","faSpinner","beforeAfter$","beforeAfter","url","CompletionCertService","selectedCourse","downloadCertificate","downloadCertificateLoading","responseType","dataType","binaryData","downloadLink","document","href","URL","createObjectURL","Blob","fileName","click","CompletionCertComponent","completionCertService","faFileArrowDown","downloadCertificateBtn","SpecialActivityComponent","BookmarksService","BehaviorSubject","bookmarksSubject","asObservable","getBookmarks","cid","bookmarks","deleteBookmark","addBookmark","BookmarkButtonComponent","bookmarksService","sub","deletedBookmarkAid$","bookmark","deleteBookmarkBtn","updateSidebarBookmarksTabOnDelete","existingBookmarks","addBookmarkBtn","updateSidebarBookmarksTabOnAdd","deleted","ChapterEndComponent","courseChapterIndexService","CourseEndComponent","WorkAreaComponent","userService","faPrint","printButton","print","ActivitiesBarComponent","activityBarClick","tac","lockStatusClass","SelectedComponent","ChapterIndexComponent","chapterUnlock","chapterIndex","chapterNumber","syllabus","PublisherInfoComponent","faGlobe","faEnvelope","BookmarksComponent","router","loadBookmarkedActivity","navigateByUrl","ActivityHelpComponent","selectedActivitySet$","getActivityHelp","help","activityHelp$","shareReplay","StudentMenuComponent","routes","path","redirectTo","pathMatch","component","ActivitiesComponent","activatedRoute","publisherService","faList","faLeaf","faInfoCircle","faQuestionCircle","faChevronUp","faChevronDown","faBookBookmark","modalOptions","backdrop","centered","keyboard","first_name","open","componentInstance","getActivities","snapshot","paramMap","bootstrapCourse","loadActivities","ActivitiesRoutingModule","RouterModule","CommonModule","ActiveModeModule","ReactiveFormsModule","PipesModule","NavModule","FontAwesomeModule","DndModule","ClickRotateModule","DemoFlagModule","FormsModule","BeforeAndAfterModule","CompletionCertModule","SpecialActivityModule","BookmarkButtonModule","WorkAreaModule","ReviewModeModule","ActivityHelpModule","LoadingSpinnerModule","ActivitiesBarModule","SelectedModule","NgbModule","ChapterIndexModule","PublisherInfoModule","BookmarksModule","StudentMenuModule","ActivitiesModule","ThemeModule"],"sourceRoot":"webpack:///","sources":["./src/app/pages/webcourse/activities/components/collect-user-names/collect-user-names.component.html","./src/app/pages/webcourse/activities/components/collect-user-names/collect-user-names.component.ts","./src/app/pages/webcourse/activities/workarea/activities/dnd/dnd.service.ts","./src/app/pages/webcourse/activities/workarea/activities/click-rotate/click-rotate.service.ts","./src/app/pages/webcourse/activities/workarea/active-mode/active-mode.service.ts","./src/app/pages/webcourse/activities/workarea/active-mode/active-mode.component.html","./src/app/pages/webcourse/activities/workarea/active-mode/active-mode.component.ts","./src/app/pages/webcourse/activities/workarea/nav/nav.component.html","./src/app/pages/webcourse/activities/workarea/nav/nav.component.ts","./node_modules/rxjs/_esm2015/internal/observable/interval.js","./node_modules/@angular/cdk/fesm2020/drag-drop.mjs","./src/app/pages/webcourse/activities/workarea/activities/dnd/dnd.component.html","./src/app/pages/webcourse/activities/workarea/activities/dnd/dnd.component.ts","./src/app/pages/webcourse/activities/workarea/activities/click-rotate/click-rotate.component.html","./src/app/pages/webcourse/activities/workarea/activities/click-rotate/click-rotate.component.ts","./src/app/pages/webcourse/builder/activity/demo-flag/demo-flag.service.ts","./src/app/pages/webcourse/builder/activity/demo-flag/demo-flag.component.ts","./src/app/pages/webcourse/builder/activity/demo-flag/demo-flag.component.html","./src/app/pages/webcourse/activities/workarea/activities/special-activity/before-and-after/before-and-after.component.html","./src/app/pages/webcourse/activities/workarea/activities/special-activity/before-and-after/before-and-after.component.ts","./src/app/pages/webcourse/activities/workarea/activities/special-activity/completion-cert/completion-cert.service.ts","./src/app/pages/webcourse/activities/workarea/activities/special-activity/completion-cert/completion-cert.component.html","./src/app/pages/webcourse/activities/workarea/activities/special-activity/completion-cert/completion-cert.component.ts","./src/app/pages/webcourse/activities/workarea/activities/special-activity/special-activity.component.html","./src/app/pages/webcourse/activities/workarea/activities/special-activity/special-activity.component.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmarks.service.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmark-button/bookmark-button.component.html","./src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmark-button/bookmark-button.component.ts","./src/app/pages/webcourse/activities/workarea/components/chapter-end/chapter-end.component.html","./src/app/pages/webcourse/activities/workarea/components/chapter-end/chapter-end.component.ts","./src/app/pages/webcourse/activities/workarea/components/course-end/course-end.component.ts","./src/app/pages/webcourse/activities/workarea/components/course-end/course-end.component.html","./src/app/pages/webcourse/activities/workarea/workarea.component.html","./src/app/pages/webcourse/activities/workarea/workarea.component.ts","./src/app/pages/webcourse/activities/sidebar/shared/activities-bar/activities-bar.component.html","./src/app/pages/webcourse/activities/sidebar/shared/activities-bar/activities-bar.component.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/selected/selected.component.html","./src/app/pages/webcourse/activities/sidebar/tabs/student/selected/selected.component.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/chapter-index/chapter-index.component.html","./src/app/pages/webcourse/activities/sidebar/tabs/student/chapter-index/chapter-index.component.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/publisher-info/publisher-info.component.html","./src/app/pages/webcourse/activities/sidebar/tabs/student/publisher-info/publisher-info.component.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmarks.component.html","./src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmarks.component.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/activity-help/activity-help.component.html","./src/app/pages/webcourse/activities/sidebar/tabs/student/activity-help/activity-help.component.ts","./src/app/pages/webcourse/activities/sidebar/menu/student/student-menu.component.html","./src/app/pages/webcourse/activities/sidebar/menu/student/student-menu.component.ts","./src/app/pages/webcourse/activities/activities.component.html","./src/app/pages/webcourse/activities/activities-routing.module.ts","./src/app/pages/webcourse/activities/activities.component.ts","./src/app/pages/webcourse/activities/workarea/active-mode/active-mode.module.ts","./src/app/pages/webcourse/activities/workarea/nav/nav.module.ts","./src/app/pages/webcourse/activities/workarea/activities/dnd/dnd.module.ts","./src/app/pages/webcourse/activities/workarea/activities/click-rotate/click-rotate.module.ts","./src/app/pages/webcourse/builder/activity/demo-flag/demo-flag.module.ts","./src/app/pages/webcourse/activities/workarea/activities/special-activity/before-and-after/before-and-after.module.ts","./src/app/pages/webcourse/activities/workarea/activities/special-activity/completion-cert/completion-cert.module.ts","./src/app/pages/webcourse/activities/workarea/activities/special-activity/special-activity.module.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmark-button/bookmark-button.module.ts","./src/app/pages/webcourse/activities/workarea/workarea.module.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/activity-help/activity-help.module.ts","./src/app/pages/webcourse/activities/sidebar/shared/activities-bar/activities-bar.module.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/selected/selected.module.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/chapter-index/chapter-index.module.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/publisher-info/publisher-info.module.ts","./src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmarks.module.ts","./src/app/pages/webcourse/activities/sidebar/menu/student/student-menu.module.ts","./src/app/pages/webcourse/activities/activities.module.ts"],"sourcesContent":["<ng-template [ngIf]=\"status === 'updating'\">\r\n  <div class=\"modal-body\">\r\n    <div class=\"my-3 lead text-center\">\r\n      <span class=\"text-info font-weight-bold\">Updating your profile.</span><br>\r\n      How's the weather today?\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template [ngIf]=\"status === 'failedUpdate'\">\r\n  <div class=\"modal-body\" @fadeInOut>\r\n    <div class=\"my-3 lead text-center\">\r\n      <span class=\"text-danger font-weight-bold\">Update failed.</span><br>\r\n      Rebooting session...\r\n    </div>\r\n  </div>\r\n  <ngb-progressbar [value]=\"percent\" type=\"danger\" height=\"3px\"></ngb-progressbar>\r\n</ng-template>\r\n\r\n<ng-template [ngIf]=\"status === 'prompt'\">\r\n  <div class=\"modal-header\">\r\n    <h4 class=\"common-heading my-auto\" id=\"modal-basic-title\">Before you continue.....</h4>\r\n  </div>\r\n  <div class=\"modal-body\">\r\n    <form #names=\"ngForm\" (keyup.enter)=\"names.form.valid ? btnClick(names.value) : ''\">\r\n      <div>\r\n        <p>Please provide a name for the course student reports.</p>\r\n        <div class=\"mb-4\" class=\"d-block w-50\">\r\n          <input ngModel\r\n            [(ngModel)]=\"user.first_name\"\r\n            type=\"text\"\r\n            name=\"first_name\"\r\n            placeholder=\"First name\"\r\n            minlength=\"2\"\r\n            maxlength=\"50\"\r\n            class=\"form-control form-control-secondary my-2\"\r\n            required\r\n          >\r\n          <input ngModel\r\n            [(ngModel)]=\"user.last_name\"\r\n            type=\"text\"\r\n            name=\"last_name\"\r\n            placeholder=\"Last name\"\r\n            minlength=\"2\"\r\n            maxlength=\"20\"\r\n            class=\"form-control form-control-secondary my-2\"\r\n            required\r\n            >\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"modal-footer\">\r\n    <button\r\n      type=\"submit\" class=\"btn btn-success\"\r\n      (click)=\"btnClick(names.value)\"\r\n      [disabled]=\"names.form.invalid\"\r\n    >\r\n      Save\r\n    </button>\r\n\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template [ngIf]=\"status === 'saved'\">\r\n  <div class=\"modal-body\" @fadeInOut>\r\n    <div class=\"my-3 lead text-center\">\r\n      <span class=\"text-success font-weight-bold\">Your profile was updated successfully.</span><br>\r\n      Thank you, <span class=\"text-capitalize font-weight-bold\">{{ user.first_name }}</span>.\r\n    </div>\r\n  </div>\r\n  <ngb-progressbar [value]=\"percent\" type=\"success\" height=\"3px\"></ngb-progressbar>\r\n</ng-template>\r\n","import { Component, Input, OnInit } from '@angular/core'\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap'\r\nimport { HttpClient } from '@angular/common/http'\r\n\r\nimport { ConfigService } from './../../../../../core/services/config/config.service'\r\nimport { JetstreamUser } from 'src/app/core/models/jetstream-user.model'\r\nimport { FadeInOut } from 'src/app/core/animations/fade-in-out.animation'\r\n\r\n@Component({\r\n  selector: 'app-collect-user-names',\r\n  templateUrl: './collect-user-names.component.html',\r\n  styleUrls: ['./collect-user-names.component.scss'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class CollectUserNamesComponent implements OnInit {\r\n\r\n  @Input() user: JetstreamUser\r\n\r\n  // Used in HTML template, options are: prompt, updating, failedUpdate, saved\r\n  status = 'prompt'\r\n  percent = 100\r\n\r\n  constructor(\r\n    private ngbModal: NgbModal,\r\n    private httpClient: HttpClient,\r\n    private configService: ConfigService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  btnClick(names) {\r\n    this.status = 'updating'\r\n\r\n    this.httpClient.post(`${this.configService.params.api.route}/user/profile/user_name`, names).subscribe(\r\n      (user: JetstreamUser) => {\r\n        this.status = 'saved'\r\n        this.user = user\r\n        this.countDown(true)\r\n      },\r\n      (error) => {\r\n        this.status = 'failedUpdate'\r\n        this.countDown(false)\r\n        console.log(error)\r\n      }\r\n    )\r\n  }\r\n\r\n  countDown(success: boolean) {\r\n    let countDown = setInterval(() => {\r\n      this.percent--\r\n      if (this.percent < 0) {\r\n        clearInterval(countDown)\r\n        setTimeout(() => {\r\n          success ? this.ngbModal.dismissAll() : location.reload()\r\n        }, 1000)\r\n      }\r\n    }, 20)\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core'\r\nimport { Activity } from './../../models/activity.model'\r\nimport { ActivityAnswers } from './../../models/activity-answers.model'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DndService {\r\n\r\n  constructor() { }\r\n\r\n  showUserOrder(activity: Activity) {\r\n    // Orders the items in the sequence that the user selected\r\n    let userOrder = new Array()\r\n    activity.user_answers.forEach(aid => {\r\n      function isAid(answer: ActivityAnswers) {\r\n        return answer.id === aid.answer_id\r\n      }\r\n      userOrder.push(activity.answers.find(isAid))\r\n    })\r\n    activity.answers = userOrder\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class ClickRotateService {\r\n\r\n  public userSelections = {}\r\n  public showMarking = 'user'\r\n\r\n  constructor() { }\r\n\r\n}\r\n","import { Injectable } from '@angular/core'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { FormGroup } from '@angular/forms'\r\n\r\n// WNGX services\r\nimport { UserService } from '../../../../../core/services/user/user.service'\r\nimport { CompletionStatsService } from './../../../../../core/services/user/completion-stats.service'\r\nimport { ConfigService } from '../../../../../core/services/config/config.service'\r\nimport { DndService } from './../activities/dnd/dnd.service'\r\nimport { ClickRotateService } from '../activities/click-rotate/click-rotate.service'\r\nimport { ActivitiesService } from '../../activities.service'\r\nimport { WebcourseService } from '../../../webcourse.service'\r\n\r\n// WNGX models and misc\r\nimport { Activity } from './../models/activity.model'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ActiveModeService {\r\n\r\n  public activityForm: FormGroup\r\n  saving = false\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private configService: ConfigService,\r\n    public user: UserService,\r\n    private completionStatsService: CompletionStatsService,\r\n    private dndService: DndService,\r\n    private clickRotateService: ClickRotateService,\r\n    private activitiesService: ActivitiesService,\r\n    private webcourseService: WebcourseService\r\n  ) { }\r\n\r\n  extractAnswers() {\r\n    // We need to do a bit of work to get answers from certain activity types\r\n    // This is where this work gets done\r\n    let extractedAnswer: any\r\n    let activityType = this.lastActivityInSet.meta.activity_type\r\n\r\n    if (activityType === 'checkbox' || activityType === 'click') {\r\n      extractedAnswer = this.extractOnlySelectedOptions()\r\n    } else if (activityType === 'dnd' || activityType === 'dnd-match') {\r\n      extractedAnswer = this.dndExtract(this.activitiesService.activities)\r\n    } else if (activityType === 'click2') {\r\n      extractedAnswer = JSON.stringify(this.clickRotateService.userSelections)\r\n    } else if (activityType === 'radio') {\r\n      extractedAnswer = [this.activityForm.value.answer]\r\n    } else if (activityType === 'text' || activityType === 'textarea') {\r\n      extractedAnswer = { \"answer\": this.activityForm.value.answer }\r\n    } else {\r\n      extractedAnswer = JSON.stringify(42) // info and custom types\r\n    }\r\n\r\n    return extractedAnswer\r\n\r\n  }\r\n\r\n  userAnswerPOST(user_answers) {\r\n    this.httpClient.post(\r\n      `${this.configService.params.api.route}/webcourse/activities/${this.lastActivityInSet.meta.activity_id}/user_answer`, user_answers\r\n    ).subscribe(\r\n      (activity_supplemental) => {\r\n        this.completionStatsService.totalActivitiesCompleted++\r\n        this.webcourseService.waitingForApi = false\r\n\r\n        if (activity_supplemental['after_word']) {\r\n          this.lastActivityInSet.after_word = activity_supplemental['after_word']\r\n        }\r\n\r\n        if (activity_supplemental['answers']) {\r\n          this.lastActivityInSet.answers = activity_supplemental['answers']\r\n        }\r\n\r\n        if (user_answers) {\r\n          this.lastActivityInSet.user_answers = user_answers\r\n\r\n          if (this.lastActivityInSet.meta.activity_type === 'dnd' || this.lastActivityInSet.meta.activity_type === 'dnd-match') {\r\n            this.dndService.showUserOrder(this.lastActivityInSet)\r\n          } else {\r\n            // Loop through last activity answers\r\n            for (let i = 0; i < this.lastActivityInSet.answers.length; i++) {\r\n              // Loop through user answers\r\n              for (let j = 0; j < user_answers.length; j++) {\r\n                if (this.lastActivityInSet.answers[i].id === user_answers[j]) {\r\n                  this.lastActivityInSet.answers[i].selected = true\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // Afterword, correct answers, etc might be returned when saving user answers\r\n        // If they do, merge them back into the activities object\r\n        this.activitiesService.activities[this.activitiesService.activities.length - 1] = {\r\n          ...this.activitiesService.activities[this.activitiesService.activities.length - 1], ...activity_supplemental\r\n        }\r\n\r\n      },\r\n      (err) => {\r\n        console.log('ERROR #2334.')\r\n        this.webcourseService.waitingForApi = false\r\n      }\r\n    )\r\n  }\r\n\r\n  extractOnlySelectedOptions() {\r\n    // Reduces all checkbox options to IDs of selected ones only.\r\n    const answers = this.lastActivityInSet.answers\r\n      .reduce(\r\n        (selected, id) => {\r\n          if (id.selected) {\r\n            selected.push(id.id)\r\n          }\r\n          return selected\r\n        }, []\r\n      )\r\n    return answers\r\n  }\r\n\r\n  dndExtract(activities: Activity[]) {\r\n    let extractedAnswer = []\r\n    // Loop through activity answers, build array of AIDs only, in user selected order\r\n    activities[this.activitiesService.activities.length - 1].answers.forEach(answer => {\r\n      extractedAnswer.push(answer.id)\r\n    })\r\n    return extractedAnswer\r\n  }\r\n\r\n  get lastActivityInSet() {\r\n    return <Activity>this.activitiesService.activities[\r\n      this.activitiesService.activities.length - 1\r\n    ]\r\n  }\r\n}\r\n","<form [formGroup]=\"this.activeModeService.activityForm\">\r\n  <div class=\"row\">\r\n\r\n      <!-- RADIO FORM -->\r\n\r\n      <div *ngIf=\"activity.meta.activity_type === 'radio'\" class=\"container-fluid\">\r\n\r\n        <div *ngFor=\"let option of activity.answers; let i = index\" class=\"row\">\r\n\r\n          <div class=\"col-sm-1 col-2 my-1 text-center\">\r\n            <input\r\n              type=\"radio\"\r\n              [id]=\"option.id\"\r\n              [value]=\"option.id\"\r\n              formControlName=\"answer\"\r\n            >\r\n          </div>\r\n\r\n          <div class=\"col-sm-10 col-9 my-1\">\r\n            <label class=\"form-check-label\"\r\n              [for]=\"option.id\"\r\n              [innerHtml]=\"option.caption  | safehtml: 'html'\"\r\n              >\r\n            </label>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n\r\n      <!-- CHECKBOX FORM -->\r\n\r\n      <div *ngIf=\"activity.meta.activity_type === 'checkbox'\" class=\"container-fluid mx-3\">\r\n\r\n        <div *ngFor=\"let option of activity.answers; let i = index\" class=\"row\">\r\n\r\n          <div class=\"col-sm-1 col-2 my-1\">\r\n            <input\r\n              type=\"checkbox\"\r\n              [id]=\"option.id\"\r\n              [value]=\"option.id\"\r\n              formControlName=\"answer\"\r\n              (click)=\"updateSelections(i)\"\r\n              >\r\n          </div>\r\n\r\n          <div class=\"col-sm-10 col-9 my-1\">\r\n            <label class=\"form-check-label\"\r\n              [for]=\"option.id\"\r\n              [innerHtml]=\"option.caption | safehtml: 'html'\"\r\n              >\r\n            </label>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <!-- TEXTAREA FORM -->\r\n      <div *ngIf=\"activity.meta.activity_type === 'textarea'\" class=\"container\">\r\n        <textarea cols=\"66\"\r\n          [rows]=\"(activity?.default_answer) ?\r\n            (activity.default_answer.length / 78 ) : 5\"\r\n          class=\"form-control\"\r\n          formControlName=\"answer\"\r\n          [value]=\"activity.default_answer\"\r\n        ></textarea>\r\n      </div>\r\n\r\n      <!-- TEXT FORM -->\r\n\r\n      <div *ngIf=\"activity.meta.activity_type === 'text'\" class=\"container\">\r\n        <input type=\"text\" class=\"form-control\"\r\n          formControlName=\"answer\"\r\n          [value]=\"activity.answers\"\r\n          [src]=\"activity\"\r\n        >\r\n      </div>\r\n\r\n      <!-- CLICK ACTIVITY -->\r\n\r\n      <div *ngIf=\"activity.meta.activity_type === 'click' && activity.meta.style != 'image'\" class=\"container-fluid\">\r\n        <ul class=\"clickActivity\">\r\n          <li\r\n            *ngFor=\"let option of activity.answers; let i = index\"\r\n            [ngClass]=\"activity.answers[i].selected ? 'clickSelected' : 'clickFalse'\"\r\n            >\r\n\r\n            <input\r\n              type=\"checkbox\"\r\n              [ngClass]=\"['d-none']\"\r\n              [id]=\"option.id\"\r\n              [value]=\"option.id\"\r\n              formControlName=\"answer\"\r\n              (click)=\"updateSelections(i)\"\r\n              >\r\n\r\n            <label class=\"handy text-left px-3\"\r\n              [innerHtml]=\"option.caption\"\r\n              [for]=\"option.id\"\r\n            >\r\n            </label>\r\n\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <div *ngIf=\"activity.meta.activity_type === 'click' && activity.meta.style === 'image'\" class=\"container-fluid\">\r\n        <span *ngFor=\"let option of activity.answers; let i = index\">\r\n          <input\r\n            type=\"radio\"\r\n            [id]=\"option.id\"\r\n            [value]=\"option.id\"\r\n            formControlName=\"answer\"\r\n            style=\"display:none;\"\r\n          >\r\n          <label [for]=\"option.id\">\r\n            <img\r\n              [ngClass]=\"activity.answers[i].selected ? 'imgSelected' : 'imgFalse'\"\r\n              [src]=\"option.caption.src\"\r\n              [alt]=\"option.caption.alt\"\r\n              type=\"button\"\r\n              class=\"click-img mr-2 mt-2\"\r\n              (click)=\"updateSelections(i, true)\"\r\n            >\r\n          </label>\r\n        </span>\r\n      </div>\r\n\r\n  </div>\r\n</form>\r\n","import { Component, Input, OnInit } from '@angular/core'\r\nimport { UntypedFormBuilder, Validators } from '@angular/forms'\r\nimport { ActiveModeService } from './active-mode.service'\r\nimport { UserService } from '../../../../../core/services/user/user.service'\r\nimport { Activity } from '../models/activity.model'\r\n\r\n@Component({\r\n  selector: 'app-active-mode',\r\n  templateUrl: './active-mode.component.html',\r\n  styleUrls: ['./active-mode.component.scss']\r\n})\r\nexport class ActiveModeComponent implements OnInit {\r\n\r\n  @Input() activity: Activity\r\n\r\n  constructor(\r\n    public fb: UntypedFormBuilder,\r\n    public user: UserService,\r\n    public activeModeService: ActiveModeService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    const answerValidators = {\r\n      radio: ['', Validators.required],\r\n      checkbox: [''], // Dec 22, 2020: This can be removed?\r\n      text: [this.activity.default_answer, Validators.compose([\r\n        Validators.required, Validators.minLength(1)\r\n      ])],\r\n      textarea: [this.activity.default_answer, Validators.compose([\r\n        Validators.required, Validators.minLength(3)\r\n      ])]\r\n    }\r\n    let validator = (this.activity.meta.style == 'image') ? 'radio' : this.activity.meta.activity_type\r\n    this.activeModeService.activityForm = this.fb.group({\r\n      answer: answerValidators[validator]\r\n    })\r\n  }\r\n\r\n  updateSelections(i, singleSelection?: boolean) {\r\n    if (singleSelection) {\r\n      for (let y = 0; y < this.activity.answers.length; y++) {\r\n        // deselect all previous selections\r\n        this.activity.answers[y].selected = false\r\n      }\r\n      this.activity.answers[i].selected = true\r\n    } else {\r\n      this.activity.answers[i].selected = !this.activity.answers[i].selected\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"pr-lg-4 pr-md-1 pr-sm-0\"\r\n  *ngIf=\"this.selectedCourseService.selectedActivitySet$ | async as activity\"\r\n  >\r\n  <div [@FadeInOut2]=\"this.webcourseService.endOfChapter || this.webcourseService.endOfCourse || activity\">\r\n    <div *ngIf=\"!this.webcourseService.endOfChapter && !this.webcourseService.endOfCourse; else eo\">\r\n      <button class=\"btn btn-primary mr-3\"\r\n        (click)=\"calcFollowingAid(-1)\"\r\n        [disabled]=\"this.webcourseService.waitingForApi || activity[activity.length -1].meta.seq == 1\"\r\n        >\r\n        <fa-icon [icon]=\"faStepBackward\"></fa-icon>\r\n      </button>\r\n\r\n      <button type=\"button\" class=\"btn btn-primary\"\r\n        *ngIf=\"activity[activity.length -1].user_answers\"\r\n        (click)=\"calcFollowingAid(1)\"\r\n        [disabled]=\"this.webcourseService.waitingForApi\"\r\n        >\r\n        NEXT\r\n        <fa-icon [icon]=\"faStepForward\" class=\"mr-2 ml-1\"></fa-icon>\r\n      </button>\r\n\r\n      <button type=\"submit\" class=\"btn btn-success\"\r\n        *ngIf=\"!activity[activity.length -1].user_answers\"\r\n        (click)=\"SaveButton()\"\r\n        [disabled]=\"this.webcourseService.waitingForApi || !this.activeModeService.activityForm.valid\"\r\n        >\r\n        {{ activity[activity.length -1].meta.activity_type === 'info' || activity[activity.length -1].meta.activity_type === 'special' ? 'MARK READ' : 'SAVE' }}\r\n        <fa-icon\r\n          class=\"ml-2 mr-1 fa-regular\"\r\n          [icon]=\"activity[activity.length -1].meta.activity_type === 'info' ? faCheck : faPenNib\"\r\n          [ngClass]=\"this.activeModeService.activityForm.valid ? 'fa-fade' : ''\"\r\n          style=\"--fa-animation-duration: 2s\"\r\n        ></fa-icon>\r\n      </button>\r\n    </div>\r\n\r\n    <ng-template #eo>\r\n      <button\r\n        *ngIf=\"this.webcourseService.endOfChapter\"\r\n        [disabled]=\"this.webcourseService.waitingForApi\"\r\n        (click)=\"ContinueButton()\"\r\n        class=\"btn btn-primary\"\r\n      >\r\n        CONTINUE\r\n        <fa-icon [icon]=\"faStepForward\" class=\"ml-2 mr-1\"></fa-icon>\r\n      </button>\r\n\r\n      <button\r\n        *ngIf=\"this.webcourseService.endOfCourse\"\r\n        [disabled]=\"this.webcourseService.waitingForApi\"\r\n        (click)=\"ReviewButton()\"\r\n        class=\"btn btn-primary\"\r\n      >\r\n        REVIEW\r\n        <fa-icon [icon]=\"faStepForward\" class=\"ml-2 mr-1\"></fa-icon>\r\n      </button>\r\n    </ng-template>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core'\r\nimport { faStepBackward, faCheck, faStepForward, faPenNib } from '@fortawesome/free-solid-svg-icons'\r\n\r\n// WNGX services\r\nimport { NavService } from './nav.service'\r\nimport { ActiveModeService } from '../active-mode/active-mode.service'\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { WebcourseService } from '../../../webcourse.service'\r\nimport { ActivitiesService } from '../../activities.service'\r\n\r\nimport { ActivityMeta } from '../models/activity-meta.model'\r\nimport { Activity } from '../models/activity.model'\r\nimport { FadeInOut2 } from 'src/app/core/animations/fade-in-out-2.animation'\r\n\r\n@Component({\r\n  selector: 'app-nav',\r\n  templateUrl: './nav.component.html',\r\n  styleUrls: ['./nav.component.sass'],\r\n  animations: [FadeInOut2]\r\n})\r\n\r\nexport class NavComponent {\r\n\r\n  get activitySet() { return this.activitiesService.activities }\r\n\r\n  private nextAid: number\r\n\r\n  // FontAwesome icons\r\n  faStepBackward = faStepBackward\r\n  faCheck = faCheck\r\n  faStepForward = faStepForward\r\n  faPenNib = faPenNib\r\n\r\n  constructor(\r\n    public navService: NavService,\r\n    private activitiesService: ActivitiesService,\r\n    public activeModeService: ActiveModeService,\r\n    public selectedCourseService: SelectedCourseService,\r\n    public webcourseService: WebcourseService\r\n  ) { }\r\n\r\n  SaveButton() {\r\n    this.webcourseService.waitingForApi = true\r\n    this.activeModeService.userAnswerPOST(\r\n      this.activeModeService.extractAnswers()\r\n    )\r\n  }\r\n\r\n  calcFollowingAid(offset: number) {\r\n    // Offset should be 1 for next activity, -1 for previous activity\r\n\r\n    // For previous activity, the first in the current set interests us.\r\n    // For next activity, it's the current set's last activity we want.\r\n    let calcStartActivity: Activity =\r\n      (offset === 1) ? this.activitySet[this.activitySet.length - 1] : this.activitySet[0]\r\n\r\n    // seq = jump point activity's index position in the course syllabus\r\n    let seq: number = this.selectedCourseService.courseSyllabus.findIndex(\r\n      (activityMeta: ActivityMeta) => {\r\n        if (activityMeta.activity_id === calcStartActivity.meta.activity_id) return true\r\n      }\r\n    )\r\n\r\n    if (seq === this.selectedCourseService.courseSyllabus.length-1) {\r\n      this.webcourseService.endOfCourse = true\r\n    } else {\r\n      var activityMeta: ActivityMeta = this.selectedCourseService.courseSyllabus[seq + offset]\r\n      if (activityMeta.chapter_id != this.selectedCourseService.courseSyllabus[seq].chapter_id) {\r\n        if (offset === 1) {\r\n          // Show next chapter screer only if user clicked Next button, not back button\r\n          this.webcourseService.endOfChapter = true\r\n          this.nextAid = activityMeta.activity_id\r\n        } else {\r\n          // When user clicks back button, proceed to previous activity from previous chapter\r\n          this.navService.NavigateByAid(activityMeta.activity_id)\r\n        }\r\n      } else {\r\n        this.navService.NavigateByAid(activityMeta.activity_id)\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  ContinueButton() {\r\n    this.navService.NavigateByAid(this.nextAid)\r\n  }\r\n\r\n  ReviewButton() {\r\n    this.navService.NavigateByAid(this.selectedCourseService.courseSyllabus[0].activity_id)\r\n  }\r\n\r\n}\r\n","import { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nexport function interval(period = 0, scheduler = async) {\n    if (!isNumeric(period) || period < 0) {\n        period = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== 'function') {\n        scheduler = async;\n    }\n    return new Observable(subscriber => {\n        subscriber.add(scheduler.schedule(dispatch, period, { subscriber, counter: 0, period }));\n        return subscriber;\n    });\n}\nfunction dispatch(state) {\n    const { subscriber, counter, period } = state;\n    subscriber.next(counter);\n    this.schedule({ subscriber, counter: counter + 1, period }, period);\n}\n","import * as i0 from '@angular/core';\nimport { Injectable, Inject, InjectionToken, Directive, Input, EventEmitter, Optional, SkipSelf, Output, Self, ContentChildren, ContentChild, NgModule } from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport * as i1 from '@angular/cdk/scrolling';\nimport { CdkScrollableModule } from '@angular/cdk/scrolling';\nimport { _getEventTarget, normalizePassiveListenerOptions, _getShadowRoot } from '@angular/cdk/platform';\nimport { coerceBooleanProperty, coerceElement, coerceArray, coerceNumberProperty } from '@angular/cdk/coercion';\nimport { isFakeTouchstartFromScreenReader, isFakeMousedownFromScreenReader } from '@angular/cdk/a11y';\nimport { Subject, Subscription, interval, animationFrameScheduler, Observable, merge } from 'rxjs';\nimport { takeUntil, startWith, map, take, tap, switchMap } from 'rxjs/operators';\nimport * as i3 from '@angular/cdk/bidi';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Shallow-extends a stylesheet object with another stylesheet-like object.\n * Note that the keys in `source` have to be dash-cased.\n * @docs-private\n */\nfunction extendStyles(dest, source, importantProperties) {\n    for (let key in source) {\n        if (source.hasOwnProperty(key)) {\n            const value = source[key];\n            if (value) {\n                dest.setProperty(key, value, importantProperties?.has(key) ? 'important' : '');\n            }\n            else {\n                dest.removeProperty(key);\n            }\n        }\n    }\n    return dest;\n}\n/**\n * Toggles whether the native drag interactions should be enabled for an element.\n * @param element Element on which to toggle the drag interactions.\n * @param enable Whether the drag interactions should be enabled.\n * @docs-private\n */\nfunction toggleNativeDragInteractions(element, enable) {\n    const userSelect = enable ? '' : 'none';\n    extendStyles(element.style, {\n        'touch-action': enable ? '' : 'none',\n        '-webkit-user-drag': enable ? '' : 'none',\n        '-webkit-tap-highlight-color': enable ? '' : 'transparent',\n        'user-select': userSelect,\n        '-ms-user-select': userSelect,\n        '-webkit-user-select': userSelect,\n        '-moz-user-select': userSelect,\n    });\n}\n/**\n * Toggles whether an element is visible while preserving its dimensions.\n * @param element Element whose visibility to toggle\n * @param enable Whether the element should be visible.\n * @param importantProperties Properties to be set as `!important`.\n * @docs-private\n */\nfunction toggleVisibility(element, enable, importantProperties) {\n    extendStyles(element.style, {\n        position: enable ? '' : 'fixed',\n        top: enable ? '' : '0',\n        opacity: enable ? '' : '0',\n        left: enable ? '' : '-999em',\n    }, importantProperties);\n}\n/**\n * Combines a transform string with an optional other transform\n * that exited before the base transform was applied.\n */\nfunction combineTransforms(transform, initialTransform) {\n    return initialTransform && initialTransform != 'none'\n        ? transform + ' ' + initialTransform\n        : transform;\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Parses a CSS time value to milliseconds. */\nfunction parseCssTimeUnitsToMs(value) {\n    // Some browsers will return it in seconds, whereas others will return milliseconds.\n    const multiplier = value.toLowerCase().indexOf('ms') > -1 ? 1 : 1000;\n    return parseFloat(value) * multiplier;\n}\n/** Gets the transform transition duration, including the delay, of an element in milliseconds. */\nfunction getTransformTransitionDurationInMs(element) {\n    const computedStyle = getComputedStyle(element);\n    const transitionedProperties = parseCssPropertyValue(computedStyle, 'transition-property');\n    const property = transitionedProperties.find(prop => prop === 'transform' || prop === 'all');\n    // If there's no transition for `all` or `transform`, we shouldn't do anything.\n    if (!property) {\n        return 0;\n    }\n    // Get the index of the property that we're interested in and match\n    // it up to the same index in `transition-delay` and `transition-duration`.\n    const propertyIndex = transitionedProperties.indexOf(property);\n    const rawDurations = parseCssPropertyValue(computedStyle, 'transition-duration');\n    const rawDelays = parseCssPropertyValue(computedStyle, 'transition-delay');\n    return (parseCssTimeUnitsToMs(rawDurations[propertyIndex]) +\n        parseCssTimeUnitsToMs(rawDelays[propertyIndex]));\n}\n/** Parses out multiple values from a computed style into an array. */\nfunction parseCssPropertyValue(computedStyle, name) {\n    const value = computedStyle.getPropertyValue(name);\n    return value.split(',').map(part => part.trim());\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Gets a mutable version of an element's bounding `ClientRect`. */\nfunction getMutableClientRect(element) {\n    const clientRect = element.getBoundingClientRect();\n    // We need to clone the `clientRect` here, because all the values on it are readonly\n    // and we need to be able to update them. Also we can't use a spread here, because\n    // the values on a `ClientRect` aren't own properties. See:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect#Notes\n    return {\n        top: clientRect.top,\n        right: clientRect.right,\n        bottom: clientRect.bottom,\n        left: clientRect.left,\n        width: clientRect.width,\n        height: clientRect.height,\n        x: clientRect.x,\n        y: clientRect.y,\n    };\n}\n/**\n * Checks whether some coordinates are within a `ClientRect`.\n * @param clientRect ClientRect that is being checked.\n * @param x Coordinates along the X axis.\n * @param y Coordinates along the Y axis.\n */\nfunction isInsideClientRect(clientRect, x, y) {\n    const { top, bottom, left, right } = clientRect;\n    return y >= top && y <= bottom && x >= left && x <= right;\n}\n/**\n * Updates the top/left positions of a `ClientRect`, as well as their bottom/right counterparts.\n * @param clientRect `ClientRect` that should be updated.\n * @param top Amount to add to the `top` position.\n * @param left Amount to add to the `left` position.\n */\nfunction adjustClientRect(clientRect, top, left) {\n    clientRect.top += top;\n    clientRect.bottom = clientRect.top + clientRect.height;\n    clientRect.left += left;\n    clientRect.right = clientRect.left + clientRect.width;\n}\n/**\n * Checks whether the pointer coordinates are close to a ClientRect.\n * @param rect ClientRect to check against.\n * @param threshold Threshold around the ClientRect.\n * @param pointerX Coordinates along the X axis.\n * @param pointerY Coordinates along the Y axis.\n */\nfunction isPointerNearClientRect(rect, threshold, pointerX, pointerY) {\n    const { top, right, bottom, left, width, height } = rect;\n    const xThreshold = width * threshold;\n    const yThreshold = height * threshold;\n    return (pointerY > top - yThreshold &&\n        pointerY < bottom + yThreshold &&\n        pointerX > left - xThreshold &&\n        pointerX < right + xThreshold);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Keeps track of the scroll position and dimensions of the parents of an element. */\nclass ParentPositionTracker {\n    constructor(_document) {\n        this._document = _document;\n        /** Cached positions of the scrollable parent elements. */\n        this.positions = new Map();\n    }\n    /** Clears the cached positions. */\n    clear() {\n        this.positions.clear();\n    }\n    /** Caches the positions. Should be called at the beginning of a drag sequence. */\n    cache(elements) {\n        this.clear();\n        this.positions.set(this._document, {\n            scrollPosition: this.getViewportScrollPosition(),\n        });\n        elements.forEach(element => {\n            this.positions.set(element, {\n                scrollPosition: { top: element.scrollTop, left: element.scrollLeft },\n                clientRect: getMutableClientRect(element),\n            });\n        });\n    }\n    /** Handles scrolling while a drag is taking place. */\n    handleScroll(event) {\n        const target = _getEventTarget(event);\n        const cachedPosition = this.positions.get(target);\n        if (!cachedPosition) {\n            return null;\n        }\n        const scrollPosition = cachedPosition.scrollPosition;\n        let newTop;\n        let newLeft;\n        if (target === this._document) {\n            const viewportScrollPosition = this.getViewportScrollPosition();\n            newTop = viewportScrollPosition.top;\n            newLeft = viewportScrollPosition.left;\n        }\n        else {\n            newTop = target.scrollTop;\n            newLeft = target.scrollLeft;\n        }\n        const topDifference = scrollPosition.top - newTop;\n        const leftDifference = scrollPosition.left - newLeft;\n        // Go through and update the cached positions of the scroll\n        // parents that are inside the element that was scrolled.\n        this.positions.forEach((position, node) => {\n            if (position.clientRect && target !== node && target.contains(node)) {\n                adjustClientRect(position.clientRect, topDifference, leftDifference);\n            }\n        });\n        scrollPosition.top = newTop;\n        scrollPosition.left = newLeft;\n        return { top: topDifference, left: leftDifference };\n    }\n    /**\n     * Gets the scroll position of the viewport. Note that we use the scrollX and scrollY directly,\n     * instead of going through the `ViewportRuler`, because the first value the ruler looks at is\n     * the top/left offset of the `document.documentElement` which works for most cases, but breaks\n     * if the element is offset by something like the `BlockScrollStrategy`.\n     */\n    getViewportScrollPosition() {\n        return { top: window.scrollY, left: window.scrollX };\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Creates a deep clone of an element. */\nfunction deepCloneNode(node) {\n    const clone = node.cloneNode(true);\n    const descendantsWithId = clone.querySelectorAll('[id]');\n    const nodeName = node.nodeName.toLowerCase();\n    // Remove the `id` to avoid having multiple elements with the same id on the page.\n    clone.removeAttribute('id');\n    for (let i = 0; i < descendantsWithId.length; i++) {\n        descendantsWithId[i].removeAttribute('id');\n    }\n    if (nodeName === 'canvas') {\n        transferCanvasData(node, clone);\n    }\n    else if (nodeName === 'input' || nodeName === 'select' || nodeName === 'textarea') {\n        transferInputData(node, clone);\n    }\n    transferData('canvas', node, clone, transferCanvasData);\n    transferData('input, textarea, select', node, clone, transferInputData);\n    return clone;\n}\n/** Matches elements between an element and its clone and allows for their data to be cloned. */\nfunction transferData(selector, node, clone, callback) {\n    const descendantElements = node.querySelectorAll(selector);\n    if (descendantElements.length) {\n        const cloneElements = clone.querySelectorAll(selector);\n        for (let i = 0; i < descendantElements.length; i++) {\n            callback(descendantElements[i], cloneElements[i]);\n        }\n    }\n}\n// Counter for unique cloned radio button names.\nlet cloneUniqueId = 0;\n/** Transfers the data of one input element to another. */\nfunction transferInputData(source, clone) {\n    // Browsers throw an error when assigning the value of a file input programmatically.\n    if (clone.type !== 'file') {\n        clone.value = source.value;\n    }\n    // Radio button `name` attributes must be unique for radio button groups\n    // otherwise original radio buttons can lose their checked state\n    // once the clone is inserted in the DOM.\n    if (clone.type === 'radio' && clone.name) {\n        clone.name = `mat-clone-${clone.name}-${cloneUniqueId++}`;\n    }\n}\n/** Transfers the data of one canvas element to another. */\nfunction transferCanvasData(source, clone) {\n    const context = clone.getContext('2d');\n    if (context) {\n        // In some cases `drawImage` can throw (e.g. if the canvas size is 0x0).\n        // We can't do much about it so just ignore the error.\n        try {\n            context.drawImage(source, 0, 0);\n        }\n        catch { }\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Options that can be used to bind a passive event listener. */\nconst passiveEventListenerOptions = normalizePassiveListenerOptions({ passive: true });\n/** Options that can be used to bind an active event listener. */\nconst activeEventListenerOptions = normalizePassiveListenerOptions({ passive: false });\n/**\n * Time in milliseconds for which to ignore mouse events, after\n * receiving a touch event. Used to avoid doing double work for\n * touch devices where the browser fires fake mouse events, in\n * addition to touch events.\n */\nconst MOUSE_EVENT_IGNORE_TIME = 800;\n/** Inline styles to be set as `!important` while dragging. */\nconst dragImportantProperties = new Set([\n    // Needs to be important, because some `mat-table` sets `position: sticky !important`. See #22781.\n    'position',\n]);\n/**\n * Reference to a draggable item. Used to manipulate or dispose of the item.\n */\nclass DragRef {\n    constructor(element, _config, _document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._config = _config;\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n        /**\n         * CSS `transform` applied to the element when it isn't being dragged. We need a\n         * passive transform in order for the dragged element to retain its new position\n         * after the user has stopped dragging and because we need to know the relative\n         * position in case they start dragging again. This corresponds to `element.style.transform`.\n         */\n        this._passiveTransform = { x: 0, y: 0 };\n        /** CSS `transform` that is applied to the element while it's being dragged. */\n        this._activeTransform = { x: 0, y: 0 };\n        /**\n         * Whether the dragging sequence has been started. Doesn't\n         * necessarily mean that the element has been moved.\n         */\n        this._hasStartedDragging = false;\n        /** Emits when the item is being moved. */\n        this._moveEvents = new Subject();\n        /** Subscription to pointer movement events. */\n        this._pointerMoveSubscription = Subscription.EMPTY;\n        /** Subscription to the event that is dispatched when the user lifts their pointer. */\n        this._pointerUpSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being scrolled. */\n        this._scrollSubscription = Subscription.EMPTY;\n        /** Subscription to the viewport being resized. */\n        this._resizeSubscription = Subscription.EMPTY;\n        /** Cached reference to the boundary element. */\n        this._boundaryElement = null;\n        /** Whether the native dragging interactions have been enabled on the root element. */\n        this._nativeInteractionsEnabled = true;\n        /** Elements that can be used to drag the draggable item. */\n        this._handles = [];\n        /** Registered handles that are currently disabled. */\n        this._disabledHandles = new Set();\n        /** Layout direction of the item. */\n        this._direction = 'ltr';\n        /**\n         * Amount of milliseconds to wait after the user has put their\n         * pointer down before starting to drag the element.\n         */\n        this.dragStartDelay = 0;\n        this._disabled = false;\n        /** Emits as the drag sequence is being prepared. */\n        this.beforeStarted = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new Subject();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new Subject();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new Subject();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new Subject();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new Subject();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new Subject();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = this._moveEvents;\n        /** Handler for the `mousedown`/`touchstart` events. */\n        this._pointerDown = (event) => {\n            this.beforeStarted.next();\n            // Delegate the event based on whether it started from a handle or the element itself.\n            if (this._handles.length) {\n                const targetHandle = this._getTargetHandle(event);\n                if (targetHandle && !this._disabledHandles.has(targetHandle) && !this.disabled) {\n                    this._initializeDragSequence(targetHandle, event);\n                }\n            }\n            else if (!this.disabled) {\n                this._initializeDragSequence(this._rootElement, event);\n            }\n        };\n        /** Handler that is invoked when the user moves their pointer after they've initiated a drag. */\n        this._pointerMove = (event) => {\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            if (!this._hasStartedDragging) {\n                const distanceX = Math.abs(pointerPosition.x - this._pickupPositionOnPage.x);\n                const distanceY = Math.abs(pointerPosition.y - this._pickupPositionOnPage.y);\n                const isOverThreshold = distanceX + distanceY >= this._config.dragStartThreshold;\n                // Only start dragging after the user has moved more than the minimum distance in either\n                // direction. Note that this is preferable over doing something like `skip(minimumDistance)`\n                // in the `pointerMove` subscription, because we're not guaranteed to have one move event\n                // per pixel of movement (e.g. if the user moves their pointer quickly).\n                if (isOverThreshold) {\n                    const isDelayElapsed = Date.now() >= this._dragStartTime + this._getDragStartDelay(event);\n                    const container = this._dropContainer;\n                    if (!isDelayElapsed) {\n                        this._endDragSequence(event);\n                        return;\n                    }\n                    // Prevent other drag sequences from starting while something in the container is still\n                    // being dragged. This can happen while we're waiting for the drop animation to finish\n                    // and can cause errors, because some elements might still be moving around.\n                    if (!container || (!container.isDragging() && !container.isReceiving())) {\n                        // Prevent the default action as soon as the dragging sequence is considered as\n                        // \"started\" since waiting for the next event can allow the device to begin scrolling.\n                        event.preventDefault();\n                        this._hasStartedDragging = true;\n                        this._ngZone.run(() => this._startDragSequence(event));\n                    }\n                }\n                return;\n            }\n            // We prevent the default action down here so that we know that dragging has started. This is\n            // important for touch devices where doing this too early can unnecessarily block scrolling,\n            // if there's a dragging delay.\n            event.preventDefault();\n            const constrainedPointerPosition = this._getConstrainedPointerPosition(pointerPosition);\n            this._hasMoved = true;\n            this._lastKnownPointerPosition = pointerPosition;\n            this._updatePointerDirectionDelta(constrainedPointerPosition);\n            if (this._dropContainer) {\n                this._updateActiveDropContainer(constrainedPointerPosition, pointerPosition);\n            }\n            else {\n                // If there's a position constraint function, we want the element's top/left to be at the\n                // specific position on the page. Use the initial position as a reference if that's the case.\n                const offset = this.constrainPosition ? this._initialClientRect : this._pickupPositionOnPage;\n                const activeTransform = this._activeTransform;\n                activeTransform.x = constrainedPointerPosition.x - offset.x + this._passiveTransform.x;\n                activeTransform.y = constrainedPointerPosition.y - offset.y + this._passiveTransform.y;\n                this._applyRootElementTransform(activeTransform.x, activeTransform.y);\n            }\n            // Since this event gets fired for every pixel while dragging, we only\n            // want to fire it if the consumer opted into it. Also we have to\n            // re-enter the zone because we run all of the events on the outside.\n            if (this._moveEvents.observers.length) {\n                this._ngZone.run(() => {\n                    this._moveEvents.next({\n                        source: this,\n                        pointerPosition: constrainedPointerPosition,\n                        event,\n                        distance: this._getDragDistance(constrainedPointerPosition),\n                        delta: this._pointerDirectionDelta,\n                    });\n                });\n            }\n        };\n        /** Handler that is invoked when the user lifts their pointer up, after initiating a drag. */\n        this._pointerUp = (event) => {\n            this._endDragSequence(event);\n        };\n        /** Handles a native `dragstart` event. */\n        this._nativeDragStart = (event) => {\n            if (this._handles.length) {\n                const targetHandle = this._getTargetHandle(event);\n                if (targetHandle && !this._disabledHandles.has(targetHandle) && !this.disabled) {\n                    event.preventDefault();\n                }\n            }\n            else if (!this.disabled) {\n                // Usually this isn't necessary since the we prevent the default action in `pointerDown`,\n                // but some cases like dragging of links can slip through (see #24403).\n                event.preventDefault();\n            }\n        };\n        this.withRootElement(element).withParent(_config.parentDragRef || null);\n        this._parentPositions = new ParentPositionTracker(_document);\n        _dragDropRegistry.registerDragItem(this);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || !!(this._dropContainer && this._dropContainer.disabled);\n    }\n    set disabled(value) {\n        const newValue = coerceBooleanProperty(value);\n        if (newValue !== this._disabled) {\n            this._disabled = newValue;\n            this._toggleNativeDragInteractions();\n            this._handles.forEach(handle => toggleNativeDragInteractions(handle, newValue));\n        }\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._placeholder;\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._rootElement;\n    }\n    /**\n     * Gets the currently-visible element that represents the drag item.\n     * While dragging this is the placeholder, otherwise it's the root element.\n     */\n    getVisibleElement() {\n        return this.isDragging() ? this.getPlaceholderElement() : this.getRootElement();\n    }\n    /** Registers the handles that can be used to drag the element. */\n    withHandles(handles) {\n        this._handles = handles.map(handle => coerceElement(handle));\n        this._handles.forEach(handle => toggleNativeDragInteractions(handle, this.disabled));\n        this._toggleNativeDragInteractions();\n        // Delete any lingering disabled handles that may have been destroyed. Note that we re-create\n        // the set, rather than iterate over it and filter out the destroyed handles, because while\n        // the ES spec allows for sets to be modified while they're being iterated over, some polyfills\n        // use an array internally which may throw an error.\n        const disabledHandles = new Set();\n        this._disabledHandles.forEach(handle => {\n            if (this._handles.indexOf(handle) > -1) {\n                disabledHandles.add(handle);\n            }\n        });\n        this._disabledHandles = disabledHandles;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag preview.\n     * @param template Template that from which to stamp out the preview.\n     */\n    withPreviewTemplate(template) {\n        this._previewTemplate = template;\n        return this;\n    }\n    /**\n     * Registers the template that should be used for the drag placeholder.\n     * @param template Template that from which to stamp out the placeholder.\n     */\n    withPlaceholderTemplate(template) {\n        this._placeholderTemplate = template;\n        return this;\n    }\n    /**\n     * Sets an alternate drag root element. The root element is the element that will be moved as\n     * the user is dragging. Passing an alternate root element is useful when trying to enable\n     * dragging on an element that you might not have access to.\n     */\n    withRootElement(rootElement) {\n        const element = coerceElement(rootElement);\n        if (element !== this._rootElement) {\n            if (this._rootElement) {\n                this._removeRootElementListeners(this._rootElement);\n            }\n            this._ngZone.runOutsideAngular(() => {\n                element.addEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n                element.addEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n                element.addEventListener('dragstart', this._nativeDragStart, activeEventListenerOptions);\n            });\n            this._initialTransform = undefined;\n            this._rootElement = element;\n        }\n        if (typeof SVGElement !== 'undefined' && this._rootElement instanceof SVGElement) {\n            this._ownerSVGElement = this._rootElement.ownerSVGElement;\n        }\n        return this;\n    }\n    /**\n     * Element to which the draggable's position will be constrained.\n     */\n    withBoundaryElement(boundaryElement) {\n        this._boundaryElement = boundaryElement ? coerceElement(boundaryElement) : null;\n        this._resizeSubscription.unsubscribe();\n        if (boundaryElement) {\n            this._resizeSubscription = this._viewportRuler\n                .change(10)\n                .subscribe(() => this._containInsideBoundaryOnResize());\n        }\n        return this;\n    }\n    /** Sets the parent ref that the ref is nested in.  */\n    withParent(parent) {\n        this._parentDragRef = parent;\n        return this;\n    }\n    /** Removes the dragging functionality from the DOM element. */\n    dispose() {\n        this._removeRootElementListeners(this._rootElement);\n        // Do this check before removing from the registry since it'll\n        // stop being considered as dragged once it is removed.\n        if (this.isDragging()) {\n            // Since we move out the element to the end of the body while it's being\n            // dragged, we have to make sure that it's removed if it gets destroyed.\n            this._rootElement?.remove();\n        }\n        this._anchor?.remove();\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._dragDropRegistry.removeDragItem(this);\n        this._removeSubscriptions();\n        this.beforeStarted.complete();\n        this.started.complete();\n        this.released.complete();\n        this.ended.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this._moveEvents.complete();\n        this._handles = [];\n        this._disabledHandles.clear();\n        this._dropContainer = undefined;\n        this._resizeSubscription.unsubscribe();\n        this._parentPositions.clear();\n        this._boundaryElement =\n            this._rootElement =\n                this._ownerSVGElement =\n                    this._placeholderTemplate =\n                        this._previewTemplate =\n                            this._anchor =\n                                this._parentDragRef =\n                                    null;\n    }\n    /** Checks whether the element is currently being dragged. */\n    isDragging() {\n        return this._hasStartedDragging && this._dragDropRegistry.isDragging(this);\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._rootElement.style.transform = this._initialTransform || '';\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform = { x: 0, y: 0 };\n    }\n    /**\n     * Sets a handle as disabled. While a handle is disabled, it'll capture and interrupt dragging.\n     * @param handle Handle element that should be disabled.\n     */\n    disableHandle(handle) {\n        if (!this._disabledHandles.has(handle) && this._handles.indexOf(handle) > -1) {\n            this._disabledHandles.add(handle);\n            toggleNativeDragInteractions(handle, true);\n        }\n    }\n    /**\n     * Enables a handle, if it has been disabled.\n     * @param handle Handle element to be enabled.\n     */\n    enableHandle(handle) {\n        if (this._disabledHandles.has(handle)) {\n            this._disabledHandles.delete(handle);\n            toggleNativeDragInteractions(handle, this.disabled);\n        }\n    }\n    /** Sets the layout direction of the draggable item. */\n    withDirection(direction) {\n        this._direction = direction;\n        return this;\n    }\n    /** Sets the container that the item is part of. */\n    _withDropContainer(container) {\n        this._dropContainer = container;\n    }\n    /**\n     * Gets the current position in pixels the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        const position = this.isDragging() ? this._activeTransform : this._passiveTransform;\n        return { x: position.x, y: position.y };\n    }\n    /**\n     * Sets the current position in pixels the draggable outside of a drop container.\n     * @param value New position to be set.\n     */\n    setFreeDragPosition(value) {\n        this._activeTransform = { x: 0, y: 0 };\n        this._passiveTransform.x = value.x;\n        this._passiveTransform.y = value.y;\n        if (!this._dropContainer) {\n            this._applyRootElementTransform(value.x, value.y);\n        }\n        return this;\n    }\n    /**\n     * Sets the container into which to insert the preview element.\n     * @param value Container into which to insert the preview.\n     */\n    withPreviewContainer(value) {\n        this._previewContainer = value;\n        return this;\n    }\n    /** Updates the item's sort order based on the last-known pointer position. */\n    _sortFromLastPointerPosition() {\n        const position = this._lastKnownPointerPosition;\n        if (position && this._dropContainer) {\n            this._updateActiveDropContainer(this._getConstrainedPointerPosition(position), position);\n        }\n    }\n    /** Unsubscribes from the global subscriptions. */\n    _removeSubscriptions() {\n        this._pointerMoveSubscription.unsubscribe();\n        this._pointerUpSubscription.unsubscribe();\n        this._scrollSubscription.unsubscribe();\n    }\n    /** Destroys the preview element and its ViewRef. */\n    _destroyPreview() {\n        this._preview?.remove();\n        this._previewRef?.destroy();\n        this._preview = this._previewRef = null;\n    }\n    /** Destroys the placeholder element and its ViewRef. */\n    _destroyPlaceholder() {\n        this._placeholder?.remove();\n        this._placeholderRef?.destroy();\n        this._placeholder = this._placeholderRef = null;\n    }\n    /**\n     * Clears subscriptions and stops the dragging sequence.\n     * @param event Browser event object that ended the sequence.\n     */\n    _endDragSequence(event) {\n        // Note that here we use `isDragging` from the service, rather than from `this`.\n        // The difference is that the one from the service reflects whether a dragging sequence\n        // has been initiated, whereas the one on `this` includes whether the user has passed\n        // the minimum dragging threshold.\n        if (!this._dragDropRegistry.isDragging(this)) {\n            return;\n        }\n        this._removeSubscriptions();\n        this._dragDropRegistry.stopDragging(this);\n        this._toggleNativeDragInteractions();\n        if (this._handles) {\n            this._rootElement.style.webkitTapHighlightColor =\n                this._rootElementTapHighlight;\n        }\n        if (!this._hasStartedDragging) {\n            return;\n        }\n        this.released.next({ source: this, event });\n        if (this._dropContainer) {\n            // Stop scrolling immediately, instead of waiting for the animation to finish.\n            this._dropContainer._stopScrolling();\n            this._animatePreviewToPlaceholder().then(() => {\n                this._cleanupDragArtifacts(event);\n                this._cleanupCachedDimensions();\n                this._dragDropRegistry.stopDragging(this);\n            });\n        }\n        else {\n            // Convert the active transform into a passive one. This means that next time\n            // the user starts dragging the item, its position will be calculated relatively\n            // to the new passive transform.\n            this._passiveTransform.x = this._activeTransform.x;\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            this._passiveTransform.y = this._activeTransform.y;\n            this._ngZone.run(() => {\n                this.ended.next({\n                    source: this,\n                    distance: this._getDragDistance(pointerPosition),\n                    dropPoint: pointerPosition,\n                    event,\n                });\n            });\n            this._cleanupCachedDimensions();\n            this._dragDropRegistry.stopDragging(this);\n        }\n    }\n    /** Starts the dragging sequence. */\n    _startDragSequence(event) {\n        if (isTouchEvent(event)) {\n            this._lastTouchEventTime = Date.now();\n        }\n        this._toggleNativeDragInteractions();\n        const dropContainer = this._dropContainer;\n        if (dropContainer) {\n            const element = this._rootElement;\n            const parent = element.parentNode;\n            const placeholder = (this._placeholder = this._createPlaceholderElement());\n            const anchor = (this._anchor = this._anchor || this._document.createComment(''));\n            // Needs to happen before the root element is moved.\n            const shadowRoot = this._getShadowRoot();\n            // Insert an anchor node so that we can restore the element's position in the DOM.\n            parent.insertBefore(anchor, element);\n            // There's no risk of transforms stacking when inside a drop container so\n            // we can keep the initial transform up to date any time dragging starts.\n            this._initialTransform = element.style.transform || '';\n            // Create the preview after the initial transform has\n            // been cached, because it can be affected by the transform.\n            this._preview = this._createPreviewElement();\n            // We move the element out at the end of the body and we make it hidden, because keeping it in\n            // place will throw off the consumer's `:last-child` selectors. We can't remove the element\n            // from the DOM completely, because iOS will stop firing all subsequent events in the chain.\n            toggleVisibility(element, false, dragImportantProperties);\n            this._document.body.appendChild(parent.replaceChild(placeholder, element));\n            this._getPreviewInsertionPoint(parent, shadowRoot).appendChild(this._preview);\n            this.started.next({ source: this, event }); // Emit before notifying the container.\n            dropContainer.start();\n            this._initialContainer = dropContainer;\n            this._initialIndex = dropContainer.getItemIndex(this);\n        }\n        else {\n            this.started.next({ source: this, event });\n            this._initialContainer = this._initialIndex = undefined;\n        }\n        // Important to run after we've called `start` on the parent container\n        // so that it has had time to resolve its scrollable parents.\n        this._parentPositions.cache(dropContainer ? dropContainer.getScrollableParents() : []);\n    }\n    /**\n     * Sets up the different variables and subscriptions\n     * that will be necessary for the dragging sequence.\n     * @param referenceElement Element that started the drag sequence.\n     * @param event Browser event object that started the sequence.\n     */\n    _initializeDragSequence(referenceElement, event) {\n        // Stop propagation if the item is inside another\n        // draggable so we don't start multiple drag sequences.\n        if (this._parentDragRef) {\n            event.stopPropagation();\n        }\n        const isDragging = this.isDragging();\n        const isTouchSequence = isTouchEvent(event);\n        const isAuxiliaryMouseButton = !isTouchSequence && event.button !== 0;\n        const rootElement = this._rootElement;\n        const target = _getEventTarget(event);\n        const isSyntheticEvent = !isTouchSequence &&\n            this._lastTouchEventTime &&\n            this._lastTouchEventTime + MOUSE_EVENT_IGNORE_TIME > Date.now();\n        const isFakeEvent = isTouchSequence\n            ? isFakeTouchstartFromScreenReader(event)\n            : isFakeMousedownFromScreenReader(event);\n        // If the event started from an element with the native HTML drag&drop, it'll interfere\n        // with our own dragging (e.g. `img` tags do it by default). Prevent the default action\n        // to stop it from happening. Note that preventing on `dragstart` also seems to work, but\n        // it's flaky and it fails if the user drags it away quickly. Also note that we only want\n        // to do this for `mousedown` since doing the same for `touchstart` will stop any `click`\n        // events from firing on touch devices.\n        if (target && target.draggable && event.type === 'mousedown') {\n            event.preventDefault();\n        }\n        // Abort if the user is already dragging or is using a mouse button other than the primary one.\n        if (isDragging || isAuxiliaryMouseButton || isSyntheticEvent || isFakeEvent) {\n            return;\n        }\n        // If we've got handles, we need to disable the tap highlight on the entire root element,\n        // otherwise iOS will still add it, even though all the drag interactions on the handle\n        // are disabled.\n        if (this._handles.length) {\n            const rootStyles = rootElement.style;\n            this._rootElementTapHighlight = rootStyles.webkitTapHighlightColor || '';\n            rootStyles.webkitTapHighlightColor = 'transparent';\n        }\n        this._hasStartedDragging = this._hasMoved = false;\n        // Avoid multiple subscriptions and memory leaks when multi touch\n        // (isDragging check above isn't enough because of possible temporal and/or dimensional delays)\n        this._removeSubscriptions();\n        this._initialClientRect = this._rootElement.getBoundingClientRect();\n        this._pointerMoveSubscription = this._dragDropRegistry.pointerMove.subscribe(this._pointerMove);\n        this._pointerUpSubscription = this._dragDropRegistry.pointerUp.subscribe(this._pointerUp);\n        this._scrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(scrollEvent => this._updateOnScroll(scrollEvent));\n        if (this._boundaryElement) {\n            this._boundaryRect = getMutableClientRect(this._boundaryElement);\n        }\n        // If we have a custom preview we can't know ahead of time how large it'll be so we position\n        // it next to the cursor. The exception is when the consumer has opted into making the preview\n        // the same size as the root element, in which case we do know the size.\n        const previewTemplate = this._previewTemplate;\n        this._pickupPositionInElement =\n            previewTemplate && previewTemplate.template && !previewTemplate.matchSize\n                ? { x: 0, y: 0 }\n                : this._getPointerPositionInElement(this._initialClientRect, referenceElement, event);\n        const pointerPosition = (this._pickupPositionOnPage =\n            this._lastKnownPointerPosition =\n                this._getPointerPositionOnPage(event));\n        this._pointerDirectionDelta = { x: 0, y: 0 };\n        this._pointerPositionAtLastDirectionChange = { x: pointerPosition.x, y: pointerPosition.y };\n        this._dragStartTime = Date.now();\n        this._dragDropRegistry.startDragging(this, event);\n    }\n    /** Cleans up the DOM artifacts that were added to facilitate the element being dragged. */\n    _cleanupDragArtifacts(event) {\n        // Restore the element's visibility and insert it at its old position in the DOM.\n        // It's important that we maintain the position, because moving the element around in the DOM\n        // can throw off `NgFor` which does smart diffing and re-creates elements only when necessary,\n        // while moving the existing elements in all other cases.\n        toggleVisibility(this._rootElement, true, dragImportantProperties);\n        this._anchor.parentNode.replaceChild(this._rootElement, this._anchor);\n        this._destroyPreview();\n        this._destroyPlaceholder();\n        this._initialClientRect =\n            this._boundaryRect =\n                this._previewRect =\n                    this._initialTransform =\n                        undefined;\n        // Re-enter the NgZone since we bound `document` events on the outside.\n        this._ngZone.run(() => {\n            const container = this._dropContainer;\n            const currentIndex = container.getItemIndex(this);\n            const pointerPosition = this._getPointerPositionOnPage(event);\n            const distance = this._getDragDistance(pointerPosition);\n            const isPointerOverContainer = container._isOverContainer(pointerPosition.x, pointerPosition.y);\n            this.ended.next({ source: this, distance, dropPoint: pointerPosition, event });\n            this.dropped.next({\n                item: this,\n                currentIndex,\n                previousIndex: this._initialIndex,\n                container: container,\n                previousContainer: this._initialContainer,\n                isPointerOverContainer,\n                distance,\n                dropPoint: pointerPosition,\n                event,\n            });\n            container.drop(this, currentIndex, this._initialIndex, this._initialContainer, isPointerOverContainer, distance, pointerPosition, event);\n            this._dropContainer = this._initialContainer;\n        });\n    }\n    /**\n     * Updates the item's position in its drop container, or moves it\n     * into a new one, depending on its current drag position.\n     */\n    _updateActiveDropContainer({ x, y }, { x: rawX, y: rawY }) {\n        // Drop container that draggable has been moved into.\n        let newContainer = this._initialContainer._getSiblingContainerFromPosition(this, x, y);\n        // If we couldn't find a new container to move the item into, and the item has left its\n        // initial container, check whether the it's over the initial container. This handles the\n        // case where two containers are connected one way and the user tries to undo dragging an\n        // item into a new container.\n        if (!newContainer &&\n            this._dropContainer !== this._initialContainer &&\n            this._initialContainer._isOverContainer(x, y)) {\n            newContainer = this._initialContainer;\n        }\n        if (newContainer && newContainer !== this._dropContainer) {\n            this._ngZone.run(() => {\n                // Notify the old container that the item has left.\n                this.exited.next({ item: this, container: this._dropContainer });\n                this._dropContainer.exit(this);\n                // Notify the new container that the item has entered.\n                this._dropContainer = newContainer;\n                this._dropContainer.enter(this, x, y, newContainer === this._initialContainer &&\n                    // If we're re-entering the initial container and sorting is disabled,\n                    // put item the into its starting index to begin with.\n                    newContainer.sortingDisabled\n                    ? this._initialIndex\n                    : undefined);\n                this.entered.next({\n                    item: this,\n                    container: newContainer,\n                    currentIndex: newContainer.getItemIndex(this),\n                });\n            });\n        }\n        // Dragging may have been interrupted as a result of the events above.\n        if (this.isDragging()) {\n            this._dropContainer._startScrollingIfNecessary(rawX, rawY);\n            this._dropContainer._sortItem(this, x, y, this._pointerDirectionDelta);\n            if (this.constrainPosition) {\n                this._applyPreviewTransform(x, y);\n            }\n            else {\n                this._applyPreviewTransform(x - this._pickupPositionInElement.x, y - this._pickupPositionInElement.y);\n            }\n        }\n    }\n    /**\n     * Creates the element that will be rendered next to the user's pointer\n     * and will be used as a preview of the element that is being dragged.\n     */\n    _createPreviewElement() {\n        const previewConfig = this._previewTemplate;\n        const previewClass = this.previewClass;\n        const previewTemplate = previewConfig ? previewConfig.template : null;\n        let preview;\n        if (previewTemplate && previewConfig) {\n            // Measure the element before we've inserted the preview\n            // since the insertion could throw off the measurement.\n            const rootRect = previewConfig.matchSize ? this._initialClientRect : null;\n            const viewRef = previewConfig.viewContainer.createEmbeddedView(previewTemplate, previewConfig.context);\n            viewRef.detectChanges();\n            preview = getRootNode(viewRef, this._document);\n            this._previewRef = viewRef;\n            if (previewConfig.matchSize) {\n                matchElementSize(preview, rootRect);\n            }\n            else {\n                preview.style.transform = getTransform(this._pickupPositionOnPage.x, this._pickupPositionOnPage.y);\n            }\n        }\n        else {\n            preview = deepCloneNode(this._rootElement);\n            matchElementSize(preview, this._initialClientRect);\n            if (this._initialTransform) {\n                preview.style.transform = this._initialTransform;\n            }\n        }\n        extendStyles(preview.style, {\n            // It's important that we disable the pointer events on the preview, because\n            // it can throw off the `document.elementFromPoint` calls in the `CdkDropList`.\n            'pointer-events': 'none',\n            // We have to reset the margin, because it can throw off positioning relative to the viewport.\n            'margin': '0',\n            'position': 'fixed',\n            'top': '0',\n            'left': '0',\n            'z-index': `${this._config.zIndex || 1000}`,\n        }, dragImportantProperties);\n        toggleNativeDragInteractions(preview, false);\n        preview.classList.add('cdk-drag-preview');\n        preview.setAttribute('dir', this._direction);\n        if (previewClass) {\n            if (Array.isArray(previewClass)) {\n                previewClass.forEach(className => preview.classList.add(className));\n            }\n            else {\n                preview.classList.add(previewClass);\n            }\n        }\n        return preview;\n    }\n    /**\n     * Animates the preview element from its current position to the location of the drop placeholder.\n     * @returns Promise that resolves when the animation completes.\n     */\n    _animatePreviewToPlaceholder() {\n        // If the user hasn't moved yet, the transitionend event won't fire.\n        if (!this._hasMoved) {\n            return Promise.resolve();\n        }\n        const placeholderRect = this._placeholder.getBoundingClientRect();\n        // Apply the class that adds a transition to the preview.\n        this._preview.classList.add('cdk-drag-animating');\n        // Move the preview to the placeholder position.\n        this._applyPreviewTransform(placeholderRect.left, placeholderRect.top);\n        // If the element doesn't have a `transition`, the `transitionend` event won't fire. Since\n        // we need to trigger a style recalculation in order for the `cdk-drag-animating` class to\n        // apply its style, we take advantage of the available info to figure out whether we need to\n        // bind the event in the first place.\n        const duration = getTransformTransitionDurationInMs(this._preview);\n        if (duration === 0) {\n            return Promise.resolve();\n        }\n        return this._ngZone.runOutsideAngular(() => {\n            return new Promise(resolve => {\n                const handler = ((event) => {\n                    if (!event ||\n                        (_getEventTarget(event) === this._preview && event.propertyName === 'transform')) {\n                        this._preview?.removeEventListener('transitionend', handler);\n                        resolve();\n                        clearTimeout(timeout);\n                    }\n                });\n                // If a transition is short enough, the browser might not fire the `transitionend` event.\n                // Since we know how long it's supposed to take, add a timeout with a 50% buffer that'll\n                // fire if the transition hasn't completed when it was supposed to.\n                const timeout = setTimeout(handler, duration * 1.5);\n                this._preview.addEventListener('transitionend', handler);\n            });\n        });\n    }\n    /** Creates an element that will be shown instead of the current element while dragging. */\n    _createPlaceholderElement() {\n        const placeholderConfig = this._placeholderTemplate;\n        const placeholderTemplate = placeholderConfig ? placeholderConfig.template : null;\n        let placeholder;\n        if (placeholderTemplate) {\n            this._placeholderRef = placeholderConfig.viewContainer.createEmbeddedView(placeholderTemplate, placeholderConfig.context);\n            this._placeholderRef.detectChanges();\n            placeholder = getRootNode(this._placeholderRef, this._document);\n        }\n        else {\n            placeholder = deepCloneNode(this._rootElement);\n        }\n        // Stop pointer events on the preview so the user can't\n        // interact with it while the preview is animating.\n        placeholder.style.pointerEvents = 'none';\n        placeholder.classList.add('cdk-drag-placeholder');\n        return placeholder;\n    }\n    /**\n     * Figures out the coordinates at which an element was picked up.\n     * @param referenceElement Element that initiated the dragging.\n     * @param event Event that initiated the dragging.\n     */\n    _getPointerPositionInElement(elementRect, referenceElement, event) {\n        const handleElement = referenceElement === this._rootElement ? null : referenceElement;\n        const referenceRect = handleElement ? handleElement.getBoundingClientRect() : elementRect;\n        const point = isTouchEvent(event) ? event.targetTouches[0] : event;\n        const scrollPosition = this._getViewportScrollPosition();\n        const x = point.pageX - referenceRect.left - scrollPosition.left;\n        const y = point.pageY - referenceRect.top - scrollPosition.top;\n        return {\n            x: referenceRect.left - elementRect.left + x,\n            y: referenceRect.top - elementRect.top + y,\n        };\n    }\n    /** Determines the point of the page that was touched by the user. */\n    _getPointerPositionOnPage(event) {\n        const scrollPosition = this._getViewportScrollPosition();\n        const point = isTouchEvent(event)\n            ? // `touches` will be empty for start/end events so we have to fall back to `changedTouches`.\n                // Also note that on real devices we're guaranteed for either `touches` or `changedTouches`\n                // to have a value, but Firefox in device emulation mode has a bug where both can be empty\n                // for `touchstart` and `touchend` so we fall back to a dummy object in order to avoid\n                // throwing an error. The value returned here will be incorrect, but since this only\n                // breaks inside a developer tool and the value is only used for secondary information,\n                // we can get away with it. See https://bugzilla.mozilla.org/show_bug.cgi?id=1615824.\n                event.touches[0] || event.changedTouches[0] || { pageX: 0, pageY: 0 }\n            : event;\n        const x = point.pageX - scrollPosition.left;\n        const y = point.pageY - scrollPosition.top;\n        // if dragging SVG element, try to convert from the screen coordinate system to the SVG\n        // coordinate system\n        if (this._ownerSVGElement) {\n            const svgMatrix = this._ownerSVGElement.getScreenCTM();\n            if (svgMatrix) {\n                const svgPoint = this._ownerSVGElement.createSVGPoint();\n                svgPoint.x = x;\n                svgPoint.y = y;\n                return svgPoint.matrixTransform(svgMatrix.inverse());\n            }\n        }\n        return { x, y };\n    }\n    /** Gets the pointer position on the page, accounting for any position constraints. */\n    _getConstrainedPointerPosition(point) {\n        const dropContainerLock = this._dropContainer ? this._dropContainer.lockAxis : null;\n        let { x, y } = this.constrainPosition\n            ? this.constrainPosition(point, this, this._initialClientRect, this._pickupPositionInElement)\n            : point;\n        if (this.lockAxis === 'x' || dropContainerLock === 'x') {\n            y = this._pickupPositionOnPage.y;\n        }\n        else if (this.lockAxis === 'y' || dropContainerLock === 'y') {\n            x = this._pickupPositionOnPage.x;\n        }\n        if (this._boundaryRect) {\n            const { x: pickupX, y: pickupY } = this._pickupPositionInElement;\n            const boundaryRect = this._boundaryRect;\n            const { width: previewWidth, height: previewHeight } = this._getPreviewRect();\n            const minY = boundaryRect.top + pickupY;\n            const maxY = boundaryRect.bottom - (previewHeight - pickupY);\n            const minX = boundaryRect.left + pickupX;\n            const maxX = boundaryRect.right - (previewWidth - pickupX);\n            x = clamp$1(x, minX, maxX);\n            y = clamp$1(y, minY, maxY);\n        }\n        return { x, y };\n    }\n    /** Updates the current drag delta, based on the user's current pointer position on the page. */\n    _updatePointerDirectionDelta(pointerPositionOnPage) {\n        const { x, y } = pointerPositionOnPage;\n        const delta = this._pointerDirectionDelta;\n        const positionSinceLastChange = this._pointerPositionAtLastDirectionChange;\n        // Amount of pixels the user has dragged since the last time the direction changed.\n        const changeX = Math.abs(x - positionSinceLastChange.x);\n        const changeY = Math.abs(y - positionSinceLastChange.y);\n        // Because we handle pointer events on a per-pixel basis, we don't want the delta\n        // to change for every pixel, otherwise anything that depends on it can look erratic.\n        // To make the delta more consistent, we track how much the user has moved since the last\n        // delta change and we only update it after it has reached a certain threshold.\n        if (changeX > this._config.pointerDirectionChangeThreshold) {\n            delta.x = x > positionSinceLastChange.x ? 1 : -1;\n            positionSinceLastChange.x = x;\n        }\n        if (changeY > this._config.pointerDirectionChangeThreshold) {\n            delta.y = y > positionSinceLastChange.y ? 1 : -1;\n            positionSinceLastChange.y = y;\n        }\n        return delta;\n    }\n    /** Toggles the native drag interactions, based on how many handles are registered. */\n    _toggleNativeDragInteractions() {\n        if (!this._rootElement || !this._handles) {\n            return;\n        }\n        const shouldEnable = this._handles.length > 0 || !this.isDragging();\n        if (shouldEnable !== this._nativeInteractionsEnabled) {\n            this._nativeInteractionsEnabled = shouldEnable;\n            toggleNativeDragInteractions(this._rootElement, shouldEnable);\n        }\n    }\n    /** Removes the manually-added event listeners from the root element. */\n    _removeRootElementListeners(element) {\n        element.removeEventListener('mousedown', this._pointerDown, activeEventListenerOptions);\n        element.removeEventListener('touchstart', this._pointerDown, passiveEventListenerOptions);\n        element.removeEventListener('dragstart', this._nativeDragStart, activeEventListenerOptions);\n    }\n    /**\n     * Applies a `transform` to the root element, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyRootElementTransform(x, y) {\n        const transform = getTransform(x, y);\n        const styles = this._rootElement.style;\n        // Cache the previous transform amount only after the first drag sequence, because\n        // we don't want our own transforms to stack on top of each other.\n        // Should be excluded none because none + translate3d(x, y, x) is invalid css\n        if (this._initialTransform == null) {\n            this._initialTransform =\n                styles.transform && styles.transform != 'none' ? styles.transform : '';\n        }\n        // Preserve the previous `transform` value, if there was one. Note that we apply our own\n        // transform before the user's, because things like rotation can affect which direction\n        // the element will be translated towards.\n        styles.transform = combineTransforms(transform, this._initialTransform);\n    }\n    /**\n     * Applies a `transform` to the preview, taking into account any existing transforms on it.\n     * @param x New transform value along the X axis.\n     * @param y New transform value along the Y axis.\n     */\n    _applyPreviewTransform(x, y) {\n        // Only apply the initial transform if the preview is a clone of the original element, otherwise\n        // it could be completely different and the transform might not make sense anymore.\n        const initialTransform = this._previewTemplate?.template ? undefined : this._initialTransform;\n        const transform = getTransform(x, y);\n        this._preview.style.transform = combineTransforms(transform, initialTransform);\n    }\n    /**\n     * Gets the distance that the user has dragged during the current drag sequence.\n     * @param currentPosition Current position of the user's pointer.\n     */\n    _getDragDistance(currentPosition) {\n        const pickupPosition = this._pickupPositionOnPage;\n        if (pickupPosition) {\n            return { x: currentPosition.x - pickupPosition.x, y: currentPosition.y - pickupPosition.y };\n        }\n        return { x: 0, y: 0 };\n    }\n    /** Cleans up any cached element dimensions that we don't need after dragging has stopped. */\n    _cleanupCachedDimensions() {\n        this._boundaryRect = this._previewRect = undefined;\n        this._parentPositions.clear();\n    }\n    /**\n     * Checks whether the element is still inside its boundary after the viewport has been resized.\n     * If not, the position is adjusted so that the element fits again.\n     */\n    _containInsideBoundaryOnResize() {\n        let { x, y } = this._passiveTransform;\n        if ((x === 0 && y === 0) || this.isDragging() || !this._boundaryElement) {\n            return;\n        }\n        // Note: don't use `_clientRectAtStart` here, because we want the latest position.\n        const elementRect = this._rootElement.getBoundingClientRect();\n        const boundaryRect = this._boundaryElement.getBoundingClientRect();\n        // It's possible that the element got hidden away after dragging (e.g. by switching to a\n        // different tab). Don't do anything in this case so we don't clear the user's position.\n        if ((boundaryRect.width === 0 && boundaryRect.height === 0) ||\n            (elementRect.width === 0 && elementRect.height === 0)) {\n            return;\n        }\n        const leftOverflow = boundaryRect.left - elementRect.left;\n        const rightOverflow = elementRect.right - boundaryRect.right;\n        const topOverflow = boundaryRect.top - elementRect.top;\n        const bottomOverflow = elementRect.bottom - boundaryRect.bottom;\n        // If the element has become wider than the boundary, we can't\n        // do much to make it fit so we just anchor it to the left.\n        if (boundaryRect.width > elementRect.width) {\n            if (leftOverflow > 0) {\n                x += leftOverflow;\n            }\n            if (rightOverflow > 0) {\n                x -= rightOverflow;\n            }\n        }\n        else {\n            x = 0;\n        }\n        // If the element has become taller than the boundary, we can't\n        // do much to make it fit so we just anchor it to the top.\n        if (boundaryRect.height > elementRect.height) {\n            if (topOverflow > 0) {\n                y += topOverflow;\n            }\n            if (bottomOverflow > 0) {\n                y -= bottomOverflow;\n            }\n        }\n        else {\n            y = 0;\n        }\n        if (x !== this._passiveTransform.x || y !== this._passiveTransform.y) {\n            this.setFreeDragPosition({ y, x });\n        }\n    }\n    /** Gets the drag start delay, based on the event type. */\n    _getDragStartDelay(event) {\n        const value = this.dragStartDelay;\n        if (typeof value === 'number') {\n            return value;\n        }\n        else if (isTouchEvent(event)) {\n            return value.touch;\n        }\n        return value ? value.mouse : 0;\n    }\n    /** Updates the internal state of the draggable element when scrolling has occurred. */\n    _updateOnScroll(event) {\n        const scrollDifference = this._parentPositions.handleScroll(event);\n        if (scrollDifference) {\n            const target = _getEventTarget(event);\n            // ClientRect dimensions are based on the scroll position of the page and its parent\n            // node so we have to update the cached boundary ClientRect if the user has scrolled.\n            if (this._boundaryRect &&\n                target !== this._boundaryElement &&\n                target.contains(this._boundaryElement)) {\n                adjustClientRect(this._boundaryRect, scrollDifference.top, scrollDifference.left);\n            }\n            this._pickupPositionOnPage.x += scrollDifference.left;\n            this._pickupPositionOnPage.y += scrollDifference.top;\n            // If we're in free drag mode, we have to update the active transform, because\n            // it isn't relative to the viewport like the preview inside a drop list.\n            if (!this._dropContainer) {\n                this._activeTransform.x -= scrollDifference.left;\n                this._activeTransform.y -= scrollDifference.top;\n                this._applyRootElementTransform(this._activeTransform.x, this._activeTransform.y);\n            }\n        }\n    }\n    /** Gets the scroll position of the viewport. */\n    _getViewportScrollPosition() {\n        return (this._parentPositions.positions.get(this._document)?.scrollPosition ||\n            this._parentPositions.getViewportScrollPosition());\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (this._cachedShadowRoot === undefined) {\n            this._cachedShadowRoot = _getShadowRoot(this._rootElement);\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Gets the element into which the drag preview should be inserted. */\n    _getPreviewInsertionPoint(initialParent, shadowRoot) {\n        const previewContainer = this._previewContainer || 'global';\n        if (previewContainer === 'parent') {\n            return initialParent;\n        }\n        if (previewContainer === 'global') {\n            const documentRef = this._document;\n            // We can't use the body if the user is in fullscreen mode,\n            // because the preview will render under the fullscreen element.\n            // TODO(crisbeto): dedupe this with the `FullscreenOverlayContainer` eventually.\n            return (shadowRoot ||\n                documentRef.fullscreenElement ||\n                documentRef.webkitFullscreenElement ||\n                documentRef.mozFullScreenElement ||\n                documentRef.msFullscreenElement ||\n                documentRef.body);\n        }\n        return coerceElement(previewContainer);\n    }\n    /** Lazily resolves and returns the dimensions of the preview. */\n    _getPreviewRect() {\n        // Cache the preview element rect if we haven't cached it already or if\n        // we cached it too early before the element dimensions were computed.\n        if (!this._previewRect || (!this._previewRect.width && !this._previewRect.height)) {\n            this._previewRect = this._preview\n                ? this._preview.getBoundingClientRect()\n                : this._initialClientRect;\n        }\n        return this._previewRect;\n    }\n    /** Gets a handle that is the target of an event. */\n    _getTargetHandle(event) {\n        return this._handles.find(handle => {\n            return event.target && (event.target === handle || handle.contains(event.target));\n        });\n    }\n}\n/**\n * Gets a 3d `transform` that can be applied to an element.\n * @param x Desired position of the element along the X axis.\n * @param y Desired position of the element along the Y axis.\n */\nfunction getTransform(x, y) {\n    // Round the transforms since some browsers will\n    // blur the elements for sub-pixel transforms.\n    return `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`;\n}\n/** Clamps a value between a minimum and a maximum. */\nfunction clamp$1(value, min, max) {\n    return Math.max(min, Math.min(max, value));\n}\n/** Determines whether an event is a touch event. */\nfunction isTouchEvent(event) {\n    // This function is called for every pixel that the user has dragged so we need it to be\n    // as fast as possible. Since we only bind mouse events and touch events, we can assume\n    // that if the event's name starts with `t`, it's a touch event.\n    return event.type[0] === 't';\n}\n/**\n * Gets the root HTML element of an embedded view.\n * If the root is not an HTML element it gets wrapped in one.\n */\nfunction getRootNode(viewRef, _document) {\n    const rootNodes = viewRef.rootNodes;\n    if (rootNodes.length === 1 && rootNodes[0].nodeType === _document.ELEMENT_NODE) {\n        return rootNodes[0];\n    }\n    const wrapper = _document.createElement('div');\n    rootNodes.forEach(node => wrapper.appendChild(node));\n    return wrapper;\n}\n/**\n * Matches the target element's size to the source's size.\n * @param target Element that needs to be resized.\n * @param sourceRect Dimensions of the source element.\n */\nfunction matchElementSize(target, sourceRect) {\n    target.style.width = `${sourceRect.width}px`;\n    target.style.height = `${sourceRect.height}px`;\n    target.style.transform = getTransform(sourceRect.left, sourceRect.top);\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Moves an item one index in an array to another.\n * @param array Array in which to move the item.\n * @param fromIndex Starting index of the item.\n * @param toIndex Index to which the item should be moved.\n */\nfunction moveItemInArray(array, fromIndex, toIndex) {\n    const from = clamp(fromIndex, array.length - 1);\n    const to = clamp(toIndex, array.length - 1);\n    if (from === to) {\n        return;\n    }\n    const target = array[from];\n    const delta = to < from ? -1 : 1;\n    for (let i = from; i !== to; i += delta) {\n        array[i] = array[i + delta];\n    }\n    array[to] = target;\n}\n/**\n * Moves an item from one array to another.\n * @param currentArray Array from which to transfer the item.\n * @param targetArray Array into which to put the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n */\nfunction transferArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const from = clamp(currentIndex, currentArray.length - 1);\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray.splice(from, 1)[0]);\n    }\n}\n/**\n * Copies an item from one array to another, leaving it in its\n * original position in current array.\n * @param currentArray Array from which to copy the item.\n * @param targetArray Array into which is copy the item.\n * @param currentIndex Index of the item in its current array.\n * @param targetIndex Index at which to insert the item.\n *\n */\nfunction copyArrayItem(currentArray, targetArray, currentIndex, targetIndex) {\n    const to = clamp(targetIndex, targetArray.length);\n    if (currentArray.length) {\n        targetArray.splice(to, 0, currentArray[currentIndex]);\n    }\n}\n/** Clamps a number between zero and a maximum. */\nfunction clamp(value, max) {\n    return Math.max(0, Math.min(max, value));\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Strategy that only supports sorting along a single axis.\n * Items are reordered using CSS transforms which allows for sorting to be animated.\n * @docs-private\n */\nclass SingleAxisSortStrategy {\n    constructor(_element, _dragDropRegistry) {\n        this._element = _element;\n        this._dragDropRegistry = _dragDropRegistry;\n        /** Cache of the dimensions of all the items inside the container. */\n        this._itemPositions = [];\n        /** Direction in which the list is oriented. */\n        this.orientation = 'vertical';\n        /**\n         * Keeps track of the item that was last swapped with the dragged item, as well as what direction\n         * the pointer was moving in when the swap occurred and whether the user's pointer continued to\n         * overlap with the swapped item after the swapping occurred.\n         */\n        this._previousSwap = {\n            drag: null,\n            delta: 0,\n            overlaps: false,\n        };\n    }\n    /**\n     * To be called when the drag sequence starts.\n     * @param items Items that are currently in the list.\n     */\n    start(items) {\n        this.withItems(items);\n    }\n    /**\n     * To be called when an item is being sorted.\n     * @param item Item to be sorted.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param pointerDelta Direction in which the pointer is moving along each axis.\n     */\n    sort(item, pointerX, pointerY, pointerDelta) {\n        const siblings = this._itemPositions;\n        const newIndex = this._getItemIndexFromPointerPosition(item, pointerX, pointerY, pointerDelta);\n        if (newIndex === -1 && siblings.length > 0) {\n            return null;\n        }\n        const isHorizontal = this.orientation === 'horizontal';\n        const currentIndex = siblings.findIndex(currentItem => currentItem.drag === item);\n        const siblingAtNewPosition = siblings[newIndex];\n        const currentPosition = siblings[currentIndex].clientRect;\n        const newPosition = siblingAtNewPosition.clientRect;\n        const delta = currentIndex > newIndex ? 1 : -1;\n        // How many pixels the item's placeholder should be offset.\n        const itemOffset = this._getItemOffsetPx(currentPosition, newPosition, delta);\n        // How many pixels all the other items should be offset.\n        const siblingOffset = this._getSiblingOffsetPx(currentIndex, siblings, delta);\n        // Save the previous order of the items before moving the item to its new index.\n        // We use this to check whether an item has been moved as a result of the sorting.\n        const oldOrder = siblings.slice();\n        // Shuffle the array in place.\n        moveItemInArray(siblings, currentIndex, newIndex);\n        siblings.forEach((sibling, index) => {\n            // Don't do anything if the position hasn't changed.\n            if (oldOrder[index] === sibling) {\n                return;\n            }\n            const isDraggedItem = sibling.drag === item;\n            const offset = isDraggedItem ? itemOffset : siblingOffset;\n            const elementToOffset = isDraggedItem\n                ? item.getPlaceholderElement()\n                : sibling.drag.getRootElement();\n            // Update the offset to reflect the new position.\n            sibling.offset += offset;\n            // Since we're moving the items with a `transform`, we need to adjust their cached\n            // client rects to reflect their new position, as well as swap their positions in the cache.\n            // Note that we shouldn't use `getBoundingClientRect` here to update the cache, because the\n            // elements may be mid-animation which will give us a wrong result.\n            if (isHorizontal) {\n                // Round the transforms since some browsers will\n                // blur the elements, for sub-pixel transforms.\n                elementToOffset.style.transform = combineTransforms(`translate3d(${Math.round(sibling.offset)}px, 0, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, 0, offset);\n            }\n            else {\n                elementToOffset.style.transform = combineTransforms(`translate3d(0, ${Math.round(sibling.offset)}px, 0)`, sibling.initialTransform);\n                adjustClientRect(sibling.clientRect, offset, 0);\n            }\n        });\n        // Note that it's important that we do this after the client rects have been adjusted.\n        this._previousSwap.overlaps = isInsideClientRect(newPosition, pointerX, pointerY);\n        this._previousSwap.drag = siblingAtNewPosition.drag;\n        this._previousSwap.delta = isHorizontal ? pointerDelta.x : pointerDelta.y;\n        return { previousIndex: currentIndex, currentIndex: newIndex };\n    }\n    /**\n     * Called when an item is being moved into the container.\n     * @param item Item that was moved into the container.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param index Index at which the item entered. If omitted, the container will try to figure it\n     *   out automatically.\n     */\n    enter(item, pointerX, pointerY, index) {\n        const newIndex = index == null || index < 0\n            ? // We use the coordinates of where the item entered the drop\n                // zone to figure out at which index it should be inserted.\n                this._getItemIndexFromPointerPosition(item, pointerX, pointerY)\n            : index;\n        const activeDraggables = this._activeDraggables;\n        const currentIndex = activeDraggables.indexOf(item);\n        const placeholder = item.getPlaceholderElement();\n        let newPositionReference = activeDraggables[newIndex];\n        // If the item at the new position is the same as the item that is being dragged,\n        // it means that we're trying to restore the item to its initial position. In this\n        // case we should use the next item from the list as the reference.\n        if (newPositionReference === item) {\n            newPositionReference = activeDraggables[newIndex + 1];\n        }\n        // If we didn't find a new position reference, it means that either the item didn't start off\n        // in this container, or that the item requested to be inserted at the end of the list.\n        if (!newPositionReference &&\n            (newIndex == null || newIndex === -1 || newIndex < activeDraggables.length - 1) &&\n            this._shouldEnterAsFirstChild(pointerX, pointerY)) {\n            newPositionReference = activeDraggables[0];\n        }\n        // Since the item may be in the `activeDraggables` already (e.g. if the user dragged it\n        // into another container and back again), we have to ensure that it isn't duplicated.\n        if (currentIndex > -1) {\n            activeDraggables.splice(currentIndex, 1);\n        }\n        // Don't use items that are being dragged as a reference, because\n        // their element has been moved down to the bottom of the body.\n        if (newPositionReference && !this._dragDropRegistry.isDragging(newPositionReference)) {\n            const element = newPositionReference.getRootElement();\n            element.parentElement.insertBefore(placeholder, element);\n            activeDraggables.splice(newIndex, 0, item);\n        }\n        else {\n            coerceElement(this._element).appendChild(placeholder);\n            activeDraggables.push(item);\n        }\n        // The transform needs to be cleared so it doesn't throw off the measurements.\n        placeholder.style.transform = '';\n        // Note that usually `start` is called together with `enter` when an item goes into a new\n        // container. This will cache item positions, but we need to refresh them since the amount\n        // of items has changed.\n        this._cacheItemPositions();\n    }\n    /** Sets the items that are currently part of the list. */\n    withItems(items) {\n        this._activeDraggables = items.slice();\n        this._cacheItemPositions();\n    }\n    /** Assigns a sort predicate to the strategy. */\n    withSortPredicate(predicate) {\n        this._sortPredicate = predicate;\n    }\n    /** Resets the strategy to its initial state before dragging was started. */\n    reset() {\n        // TODO(crisbeto): may have to wait for the animations to finish.\n        this._activeDraggables.forEach(item => {\n            const rootElement = item.getRootElement();\n            if (rootElement) {\n                const initialTransform = this._itemPositions.find(p => p.drag === item)?.initialTransform;\n                rootElement.style.transform = initialTransform || '';\n            }\n        });\n        this._itemPositions = [];\n        this._activeDraggables = [];\n        this._previousSwap.drag = null;\n        this._previousSwap.delta = 0;\n        this._previousSwap.overlaps = false;\n    }\n    /**\n     * Gets a snapshot of items currently in the list.\n     * Can include items that we dragged in from another list.\n     */\n    getActiveItemsSnapshot() {\n        return this._activeDraggables;\n    }\n    /** Gets the index of a specific item. */\n    getItemIndex(item) {\n        // Items are sorted always by top/left in the cache, however they flow differently in RTL.\n        // The rest of the logic still stands no matter what orientation we're in, however\n        // we need to invert the array when determining the index.\n        const items = this.orientation === 'horizontal' && this.direction === 'rtl'\n            ? this._itemPositions.slice().reverse()\n            : this._itemPositions;\n        return items.findIndex(currentItem => currentItem.drag === item);\n    }\n    /** Used to notify the strategy that the scroll position has changed. */\n    updateOnScroll(topDifference, leftDifference) {\n        // Since we know the amount that the user has scrolled we can shift all of the\n        // client rectangles ourselves. This is cheaper than re-measuring everything and\n        // we can avoid inconsistent behavior where we might be measuring the element before\n        // its position has changed.\n        this._itemPositions.forEach(({ clientRect }) => {\n            adjustClientRect(clientRect, topDifference, leftDifference);\n        });\n        // We need two loops for this, because we want all of the cached\n        // positions to be up-to-date before we re-sort the item.\n        this._itemPositions.forEach(({ drag }) => {\n            if (this._dragDropRegistry.isDragging(drag)) {\n                // We need to re-sort the item manually, because the pointer move\n                // events won't be dispatched while the user is scrolling.\n                drag._sortFromLastPointerPosition();\n            }\n        });\n    }\n    /** Refreshes the position cache of the items and sibling containers. */\n    _cacheItemPositions() {\n        const isHorizontal = this.orientation === 'horizontal';\n        this._itemPositions = this._activeDraggables\n            .map(drag => {\n            const elementToMeasure = drag.getVisibleElement();\n            return {\n                drag,\n                offset: 0,\n                initialTransform: elementToMeasure.style.transform || '',\n                clientRect: getMutableClientRect(elementToMeasure),\n            };\n        })\n            .sort((a, b) => {\n            return isHorizontal\n                ? a.clientRect.left - b.clientRect.left\n                : a.clientRect.top - b.clientRect.top;\n        });\n    }\n    /**\n     * Gets the offset in pixels by which the item that is being dragged should be moved.\n     * @param currentPosition Current position of the item.\n     * @param newPosition Position of the item where the current item should be moved.\n     * @param delta Direction in which the user is moving.\n     */\n    _getItemOffsetPx(currentPosition, newPosition, delta) {\n        const isHorizontal = this.orientation === 'horizontal';\n        let itemOffset = isHorizontal\n            ? newPosition.left - currentPosition.left\n            : newPosition.top - currentPosition.top;\n        // Account for differences in the item width/height.\n        if (delta === -1) {\n            itemOffset += isHorizontal\n                ? newPosition.width - currentPosition.width\n                : newPosition.height - currentPosition.height;\n        }\n        return itemOffset;\n    }\n    /**\n     * Gets the offset in pixels by which the items that aren't being dragged should be moved.\n     * @param currentIndex Index of the item currently being dragged.\n     * @param siblings All of the items in the list.\n     * @param delta Direction in which the user is moving.\n     */\n    _getSiblingOffsetPx(currentIndex, siblings, delta) {\n        const isHorizontal = this.orientation === 'horizontal';\n        const currentPosition = siblings[currentIndex].clientRect;\n        const immediateSibling = siblings[currentIndex + delta * -1];\n        let siblingOffset = currentPosition[isHorizontal ? 'width' : 'height'] * delta;\n        if (immediateSibling) {\n            const start = isHorizontal ? 'left' : 'top';\n            const end = isHorizontal ? 'right' : 'bottom';\n            // Get the spacing between the start of the current item and the end of the one immediately\n            // after it in the direction in which the user is dragging, or vice versa. We add it to the\n            // offset in order to push the element to where it will be when it's inline and is influenced\n            // by the `margin` of its siblings.\n            if (delta === -1) {\n                siblingOffset -= immediateSibling.clientRect[start] - currentPosition[end];\n            }\n            else {\n                siblingOffset += currentPosition[start] - immediateSibling.clientRect[end];\n            }\n        }\n        return siblingOffset;\n    }\n    /**\n     * Checks if pointer is entering in the first position\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     */\n    _shouldEnterAsFirstChild(pointerX, pointerY) {\n        if (!this._activeDraggables.length) {\n            return false;\n        }\n        const itemPositions = this._itemPositions;\n        const isHorizontal = this.orientation === 'horizontal';\n        // `itemPositions` are sorted by position while `activeDraggables` are sorted by child index\n        // check if container is using some sort of \"reverse\" ordering (eg: flex-direction: row-reverse)\n        const reversed = itemPositions[0].drag !== this._activeDraggables[0];\n        if (reversed) {\n            const lastItemRect = itemPositions[itemPositions.length - 1].clientRect;\n            return isHorizontal ? pointerX >= lastItemRect.right : pointerY >= lastItemRect.bottom;\n        }\n        else {\n            const firstItemRect = itemPositions[0].clientRect;\n            return isHorizontal ? pointerX <= firstItemRect.left : pointerY <= firstItemRect.top;\n        }\n    }\n    /**\n     * Gets the index of an item in the drop container, based on the position of the user's pointer.\n     * @param item Item that is being sorted.\n     * @param pointerX Position of the user's pointer along the X axis.\n     * @param pointerY Position of the user's pointer along the Y axis.\n     * @param delta Direction in which the user is moving their pointer.\n     */\n    _getItemIndexFromPointerPosition(item, pointerX, pointerY, delta) {\n        const isHorizontal = this.orientation === 'horizontal';\n        const index = this._itemPositions.findIndex(({ drag, clientRect }) => {\n            // Skip the item itself.\n            if (drag === item) {\n                return false;\n            }\n            if (delta) {\n                const direction = isHorizontal ? delta.x : delta.y;\n                // If the user is still hovering over the same item as last time, their cursor hasn't left\n                // the item after we made the swap, and they didn't change the direction in which they're\n                // dragging, we don't consider it a direction swap.\n                if (drag === this._previousSwap.drag &&\n                    this._previousSwap.overlaps &&\n                    direction === this._previousSwap.delta) {\n                    return false;\n                }\n            }\n            return isHorizontal\n                ? // Round these down since most browsers report client rects with\n                    // sub-pixel precision, whereas the pointer coordinates are rounded to pixels.\n                    pointerX >= Math.floor(clientRect.left) && pointerX < Math.floor(clientRect.right)\n                : pointerY >= Math.floor(clientRect.top) && pointerY < Math.floor(clientRect.bottom);\n        });\n        return index === -1 || !this._sortPredicate(index, item) ? -1 : index;\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Proximity, as a ratio to width/height, at which a\n * dragged item will affect the drop container.\n */\nconst DROP_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Proximity, as a ratio to width/height at which to start auto-scrolling the drop list or the\n * viewport. The value comes from trying it out manually until it feels right.\n */\nconst SCROLL_PROXIMITY_THRESHOLD = 0.05;\n/**\n * Reference to a drop list. Used to manipulate or dispose of the container.\n */\nclass DropListRef {\n    constructor(element, _dragDropRegistry, _document, _ngZone, _viewportRuler) {\n        this._dragDropRegistry = _dragDropRegistry;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        /** Whether starting a dragging sequence from this container is disabled. */\n        this.disabled = false;\n        /** Whether sorting items within the list is disabled. */\n        this.sortingDisabled = false;\n        /**\n         * Whether auto-scrolling the view when the user\n         * moves their pointer close to the edges is disabled.\n         */\n        this.autoScrollDisabled = false;\n        /** Number of pixels to scroll for each frame when auto-scrolling an element. */\n        this.autoScrollStep = 2;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Function that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits right before dragging has started. */\n        this.beforeStarted = new Subject();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new Subject();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new Subject();\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new Subject();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new Subject();\n        /** Whether an item in the list is being dragged. */\n        this._isDragging = false;\n        /** Draggable items in the container. */\n        this._draggables = [];\n        /** Drop lists that are connected to the current one. */\n        this._siblings = [];\n        /** Connected siblings that currently have a dragged item. */\n        this._activeSiblings = new Set();\n        /** Subscription to the window being scrolled. */\n        this._viewportScrollSubscription = Subscription.EMPTY;\n        /** Vertical direction in which the list is currently scrolling. */\n        this._verticalScrollDirection = 0 /* AutoScrollVerticalDirection.NONE */;\n        /** Horizontal direction in which the list is currently scrolling. */\n        this._horizontalScrollDirection = 0 /* AutoScrollHorizontalDirection.NONE */;\n        /** Used to signal to the current auto-scroll sequence when to stop. */\n        this._stopScrollTimers = new Subject();\n        /** Shadow root of the current element. Necessary for `elementFromPoint` to resolve correctly. */\n        this._cachedShadowRoot = null;\n        /** Starts the interval that'll auto-scroll the element. */\n        this._startScrollInterval = () => {\n            this._stopScrolling();\n            interval(0, animationFrameScheduler)\n                .pipe(takeUntil(this._stopScrollTimers))\n                .subscribe(() => {\n                const node = this._scrollNode;\n                const scrollStep = this.autoScrollStep;\n                if (this._verticalScrollDirection === 1 /* AutoScrollVerticalDirection.UP */) {\n                    node.scrollBy(0, -scrollStep);\n                }\n                else if (this._verticalScrollDirection === 2 /* AutoScrollVerticalDirection.DOWN */) {\n                    node.scrollBy(0, scrollStep);\n                }\n                if (this._horizontalScrollDirection === 1 /* AutoScrollHorizontalDirection.LEFT */) {\n                    node.scrollBy(-scrollStep, 0);\n                }\n                else if (this._horizontalScrollDirection === 2 /* AutoScrollHorizontalDirection.RIGHT */) {\n                    node.scrollBy(scrollStep, 0);\n                }\n            });\n        };\n        this.element = coerceElement(element);\n        this._document = _document;\n        this.withScrollableParents([this.element]);\n        _dragDropRegistry.registerDropContainer(this);\n        this._parentPositions = new ParentPositionTracker(_document);\n        this._sortStrategy = new SingleAxisSortStrategy(this.element, _dragDropRegistry);\n        this._sortStrategy.withSortPredicate((index, item) => this.sortPredicate(index, item, this));\n    }\n    /** Removes the drop list functionality from the DOM element. */\n    dispose() {\n        this._stopScrolling();\n        this._stopScrollTimers.complete();\n        this._viewportScrollSubscription.unsubscribe();\n        this.beforeStarted.complete();\n        this.entered.complete();\n        this.exited.complete();\n        this.dropped.complete();\n        this.sorted.complete();\n        this._activeSiblings.clear();\n        this._scrollNode = null;\n        this._parentPositions.clear();\n        this._dragDropRegistry.removeDropContainer(this);\n    }\n    /** Whether an item from this list is currently being dragged. */\n    isDragging() {\n        return this._isDragging;\n    }\n    /** Starts dragging an item. */\n    start() {\n        this._draggingStarted();\n        this._notifyReceivingSiblings();\n    }\n    /**\n     * Attempts to move an item into the container.\n     * @param item Item that was moved into the container.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param index Index at which the item entered. If omitted, the container will try to figure it\n     *   out automatically.\n     */\n    enter(item, pointerX, pointerY, index) {\n        this._draggingStarted();\n        // If sorting is disabled, we want the item to return to its starting\n        // position if the user is returning it to its initial container.\n        if (index == null && this.sortingDisabled) {\n            index = this._draggables.indexOf(item);\n        }\n        this._sortStrategy.enter(item, pointerX, pointerY, index);\n        // Note that this usually happens inside `_draggingStarted` as well, but the dimensions\n        // can change when the sort strategy moves the item around inside `enter`.\n        this._cacheParentPositions();\n        // Notify siblings at the end so that the item has been inserted into the `activeDraggables`.\n        this._notifyReceivingSiblings();\n        this.entered.next({ item, container: this, currentIndex: this.getItemIndex(item) });\n    }\n    /**\n     * Removes an item from the container after it was dragged into another container by the user.\n     * @param item Item that was dragged out.\n     */\n    exit(item) {\n        this._reset();\n        this.exited.next({ item, container: this });\n    }\n    /**\n     * Drops an item into this container.\n     * @param item Item being dropped into the container.\n     * @param currentIndex Index at which the item should be inserted.\n     * @param previousIndex Index of the item when dragging started.\n     * @param previousContainer Container from which the item got dragged in.\n     * @param isPointerOverContainer Whether the user's pointer was over the\n     *    container when the item was dropped.\n     * @param distance Distance the user has dragged since the start of the dragging sequence.\n     * @param event Event that triggered the dropping sequence.\n     *\n     * @breaking-change 15.0.0 `previousIndex` and `event` parameters to become required.\n     */\n    drop(item, currentIndex, previousIndex, previousContainer, isPointerOverContainer, distance, dropPoint, event = {}) {\n        this._reset();\n        this.dropped.next({\n            item,\n            currentIndex,\n            previousIndex,\n            container: this,\n            previousContainer,\n            isPointerOverContainer,\n            distance,\n            dropPoint,\n            event,\n        });\n    }\n    /**\n     * Sets the draggable items that are a part of this list.\n     * @param items Items that are a part of this list.\n     */\n    withItems(items) {\n        const previousItems = this._draggables;\n        this._draggables = items;\n        items.forEach(item => item._withDropContainer(this));\n        if (this.isDragging()) {\n            const draggedItems = previousItems.filter(item => item.isDragging());\n            // If all of the items being dragged were removed\n            // from the list, abort the current drag sequence.\n            if (draggedItems.every(item => items.indexOf(item) === -1)) {\n                this._reset();\n            }\n            else {\n                this._sortStrategy.withItems(this._draggables);\n            }\n        }\n        return this;\n    }\n    /** Sets the layout direction of the drop list. */\n    withDirection(direction) {\n        this._sortStrategy.direction = direction;\n        return this;\n    }\n    /**\n     * Sets the containers that are connected to this one. When two or more containers are\n     * connected, the user will be allowed to transfer items between them.\n     * @param connectedTo Other containers that the current containers should be connected to.\n     */\n    connectedTo(connectedTo) {\n        this._siblings = connectedTo.slice();\n        return this;\n    }\n    /**\n     * Sets the orientation of the container.\n     * @param orientation New orientation for the container.\n     */\n    withOrientation(orientation) {\n        // TODO(crisbeto): eventually we should be constructing the new sort strategy here based on\n        // the new orientation. For now we can assume that it'll always be `SingleAxisSortStrategy`.\n        this._sortStrategy.orientation = orientation;\n        return this;\n    }\n    /**\n     * Sets which parent elements are can be scrolled while the user is dragging.\n     * @param elements Elements that can be scrolled.\n     */\n    withScrollableParents(elements) {\n        const element = coerceElement(this.element);\n        // We always allow the current element to be scrollable\n        // so we need to ensure that it's in the array.\n        this._scrollableElements =\n            elements.indexOf(element) === -1 ? [element, ...elements] : elements.slice();\n        return this;\n    }\n    /** Gets the scrollable parents that are registered with this drop container. */\n    getScrollableParents() {\n        return this._scrollableElements;\n    }\n    /**\n     * Figures out the index of an item in the container.\n     * @param item Item whose index should be determined.\n     */\n    getItemIndex(item) {\n        return this._isDragging\n            ? this._sortStrategy.getItemIndex(item)\n            : this._draggables.indexOf(item);\n    }\n    /**\n     * Whether the list is able to receive the item that\n     * is currently being dragged inside a connected drop list.\n     */\n    isReceiving() {\n        return this._activeSiblings.size > 0;\n    }\n    /**\n     * Sorts an item inside the container based on its position.\n     * @param item Item to be sorted.\n     * @param pointerX Position of the item along the X axis.\n     * @param pointerY Position of the item along the Y axis.\n     * @param pointerDelta Direction in which the pointer is moving along each axis.\n     */\n    _sortItem(item, pointerX, pointerY, pointerDelta) {\n        // Don't sort the item if sorting is disabled or it's out of range.\n        if (this.sortingDisabled ||\n            !this._clientRect ||\n            !isPointerNearClientRect(this._clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n            return;\n        }\n        const result = this._sortStrategy.sort(item, pointerX, pointerY, pointerDelta);\n        if (result) {\n            this.sorted.next({\n                previousIndex: result.previousIndex,\n                currentIndex: result.currentIndex,\n                container: this,\n                item,\n            });\n        }\n    }\n    /**\n     * Checks whether the user's pointer is close to the edges of either the\n     * viewport or the drop list and starts the auto-scroll sequence.\n     * @param pointerX User's pointer position along the x axis.\n     * @param pointerY User's pointer position along the y axis.\n     */\n    _startScrollingIfNecessary(pointerX, pointerY) {\n        if (this.autoScrollDisabled) {\n            return;\n        }\n        let scrollNode;\n        let verticalScrollDirection = 0 /* AutoScrollVerticalDirection.NONE */;\n        let horizontalScrollDirection = 0 /* AutoScrollHorizontalDirection.NONE */;\n        // Check whether we should start scrolling any of the parent containers.\n        this._parentPositions.positions.forEach((position, element) => {\n            // We have special handling for the `document` below. Also this would be\n            // nicer with a  for...of loop, but it requires changing a compiler flag.\n            if (element === this._document || !position.clientRect || scrollNode) {\n                return;\n            }\n            if (isPointerNearClientRect(position.clientRect, DROP_PROXIMITY_THRESHOLD, pointerX, pointerY)) {\n                [verticalScrollDirection, horizontalScrollDirection] = getElementScrollDirections(element, position.clientRect, pointerX, pointerY);\n                if (verticalScrollDirection || horizontalScrollDirection) {\n                    scrollNode = element;\n                }\n            }\n        });\n        // Otherwise check if we can start scrolling the viewport.\n        if (!verticalScrollDirection && !horizontalScrollDirection) {\n            const { width, height } = this._viewportRuler.getViewportSize();\n            const clientRect = {\n                width,\n                height,\n                top: 0,\n                right: width,\n                bottom: height,\n                left: 0,\n            };\n            verticalScrollDirection = getVerticalScrollDirection(clientRect, pointerY);\n            horizontalScrollDirection = getHorizontalScrollDirection(clientRect, pointerX);\n            scrollNode = window;\n        }\n        if (scrollNode &&\n            (verticalScrollDirection !== this._verticalScrollDirection ||\n                horizontalScrollDirection !== this._horizontalScrollDirection ||\n                scrollNode !== this._scrollNode)) {\n            this._verticalScrollDirection = verticalScrollDirection;\n            this._horizontalScrollDirection = horizontalScrollDirection;\n            this._scrollNode = scrollNode;\n            if ((verticalScrollDirection || horizontalScrollDirection) && scrollNode) {\n                this._ngZone.runOutsideAngular(this._startScrollInterval);\n            }\n            else {\n                this._stopScrolling();\n            }\n        }\n    }\n    /** Stops any currently-running auto-scroll sequences. */\n    _stopScrolling() {\n        this._stopScrollTimers.next();\n    }\n    /** Starts the dragging sequence within the list. */\n    _draggingStarted() {\n        const styles = coerceElement(this.element).style;\n        this.beforeStarted.next();\n        this._isDragging = true;\n        // We need to disable scroll snapping while the user is dragging, because it breaks automatic\n        // scrolling. The browser seems to round the value based on the snapping points which means\n        // that we can't increment/decrement the scroll position.\n        this._initialScrollSnap = styles.msScrollSnapType || styles.scrollSnapType || '';\n        styles.scrollSnapType = styles.msScrollSnapType = 'none';\n        this._sortStrategy.start(this._draggables);\n        this._cacheParentPositions();\n        this._viewportScrollSubscription.unsubscribe();\n        this._listenToScrollEvents();\n    }\n    /** Caches the positions of the configured scrollable parents. */\n    _cacheParentPositions() {\n        const element = coerceElement(this.element);\n        this._parentPositions.cache(this._scrollableElements);\n        // The list element is always in the `scrollableElements`\n        // so we can take advantage of the cached `ClientRect`.\n        this._clientRect = this._parentPositions.positions.get(element).clientRect;\n    }\n    /** Resets the container to its initial state. */\n    _reset() {\n        this._isDragging = false;\n        const styles = coerceElement(this.element).style;\n        styles.scrollSnapType = styles.msScrollSnapType = this._initialScrollSnap;\n        this._siblings.forEach(sibling => sibling._stopReceiving(this));\n        this._sortStrategy.reset();\n        this._stopScrolling();\n        this._viewportScrollSubscription.unsubscribe();\n        this._parentPositions.clear();\n    }\n    /**\n     * Checks whether the user's pointer is positioned over the container.\n     * @param x Pointer position along the X axis.\n     * @param y Pointer position along the Y axis.\n     */\n    _isOverContainer(x, y) {\n        return this._clientRect != null && isInsideClientRect(this._clientRect, x, y);\n    }\n    /**\n     * Figures out whether an item should be moved into a sibling\n     * drop container, based on its current position.\n     * @param item Drag item that is being moved.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _getSiblingContainerFromPosition(item, x, y) {\n        return this._siblings.find(sibling => sibling._canReceive(item, x, y));\n    }\n    /**\n     * Checks whether the drop list can receive the passed-in item.\n     * @param item Item that is being dragged into the list.\n     * @param x Position of the item along the X axis.\n     * @param y Position of the item along the Y axis.\n     */\n    _canReceive(item, x, y) {\n        if (!this._clientRect ||\n            !isInsideClientRect(this._clientRect, x, y) ||\n            !this.enterPredicate(item, this)) {\n            return false;\n        }\n        const elementFromPoint = this._getShadowRoot().elementFromPoint(x, y);\n        // If there's no element at the pointer position, then\n        // the client rect is probably scrolled out of the view.\n        if (!elementFromPoint) {\n            return false;\n        }\n        const nativeElement = coerceElement(this.element);\n        // The `ClientRect`, that we're using to find the container over which the user is\n        // hovering, doesn't give us any information on whether the element has been scrolled\n        // out of the view or whether it's overlapping with other containers. This means that\n        // we could end up transferring the item into a container that's invisible or is positioned\n        // below another one. We use the result from `elementFromPoint` to get the top-most element\n        // at the pointer position and to find whether it's one of the intersecting drop containers.\n        return elementFromPoint === nativeElement || nativeElement.contains(elementFromPoint);\n    }\n    /**\n     * Called by one of the connected drop lists when a dragging sequence has started.\n     * @param sibling Sibling in which dragging has started.\n     */\n    _startReceiving(sibling, items) {\n        const activeSiblings = this._activeSiblings;\n        if (!activeSiblings.has(sibling) &&\n            items.every(item => {\n                // Note that we have to add an exception to the `enterPredicate` for items that started off\n                // in this drop list. The drag ref has logic that allows an item to return to its initial\n                // container, if it has left the initial container and none of the connected containers\n                // allow it to enter. See `DragRef._updateActiveDropContainer` for more context.\n                return this.enterPredicate(item, this) || this._draggables.indexOf(item) > -1;\n            })) {\n            activeSiblings.add(sibling);\n            this._cacheParentPositions();\n            this._listenToScrollEvents();\n        }\n    }\n    /**\n     * Called by a connected drop list when dragging has stopped.\n     * @param sibling Sibling whose dragging has stopped.\n     */\n    _stopReceiving(sibling) {\n        this._activeSiblings.delete(sibling);\n        this._viewportScrollSubscription.unsubscribe();\n    }\n    /**\n     * Starts listening to scroll events on the viewport.\n     * Used for updating the internal state of the list.\n     */\n    _listenToScrollEvents() {\n        this._viewportScrollSubscription = this._dragDropRegistry\n            .scrolled(this._getShadowRoot())\n            .subscribe(event => {\n            if (this.isDragging()) {\n                const scrollDifference = this._parentPositions.handleScroll(event);\n                if (scrollDifference) {\n                    this._sortStrategy.updateOnScroll(scrollDifference.top, scrollDifference.left);\n                }\n            }\n            else if (this.isReceiving()) {\n                this._cacheParentPositions();\n            }\n        });\n    }\n    /**\n     * Lazily resolves and returns the shadow root of the element. We do this in a function, rather\n     * than saving it in property directly on init, because we want to resolve it as late as possible\n     * in order to ensure that the element has been moved into the shadow DOM. Doing it inside the\n     * constructor might be too early if the element is inside of something like `ngFor` or `ngIf`.\n     */\n    _getShadowRoot() {\n        if (!this._cachedShadowRoot) {\n            const shadowRoot = _getShadowRoot(coerceElement(this.element));\n            this._cachedShadowRoot = (shadowRoot || this._document);\n        }\n        return this._cachedShadowRoot;\n    }\n    /** Notifies any siblings that may potentially receive the item. */\n    _notifyReceivingSiblings() {\n        const draggedItems = this._sortStrategy\n            .getActiveItemsSnapshot()\n            .filter(item => item.isDragging());\n        this._siblings.forEach(sibling => sibling._startReceiving(this, draggedItems));\n    }\n}\n/**\n * Gets whether the vertical auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getVerticalScrollDirection(clientRect, pointerY) {\n    const { top, bottom, height } = clientRect;\n    const yThreshold = height * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerY >= top - yThreshold && pointerY <= top + yThreshold) {\n        return 1 /* AutoScrollVerticalDirection.UP */;\n    }\n    else if (pointerY >= bottom - yThreshold && pointerY <= bottom + yThreshold) {\n        return 2 /* AutoScrollVerticalDirection.DOWN */;\n    }\n    return 0 /* AutoScrollVerticalDirection.NONE */;\n}\n/**\n * Gets whether the horizontal auto-scroll direction of a node.\n * @param clientRect Dimensions of the node.\n * @param pointerX Position of the user's pointer along the x axis.\n */\nfunction getHorizontalScrollDirection(clientRect, pointerX) {\n    const { left, right, width } = clientRect;\n    const xThreshold = width * SCROLL_PROXIMITY_THRESHOLD;\n    if (pointerX >= left - xThreshold && pointerX <= left + xThreshold) {\n        return 1 /* AutoScrollHorizontalDirection.LEFT */;\n    }\n    else if (pointerX >= right - xThreshold && pointerX <= right + xThreshold) {\n        return 2 /* AutoScrollHorizontalDirection.RIGHT */;\n    }\n    return 0 /* AutoScrollHorizontalDirection.NONE */;\n}\n/**\n * Gets the directions in which an element node should be scrolled,\n * assuming that the user's pointer is already within it scrollable region.\n * @param element Element for which we should calculate the scroll direction.\n * @param clientRect Bounding client rectangle of the element.\n * @param pointerX Position of the user's pointer along the x axis.\n * @param pointerY Position of the user's pointer along the y axis.\n */\nfunction getElementScrollDirections(element, clientRect, pointerX, pointerY) {\n    const computedVertical = getVerticalScrollDirection(clientRect, pointerY);\n    const computedHorizontal = getHorizontalScrollDirection(clientRect, pointerX);\n    let verticalScrollDirection = 0 /* AutoScrollVerticalDirection.NONE */;\n    let horizontalScrollDirection = 0 /* AutoScrollHorizontalDirection.NONE */;\n    // Note that we here we do some extra checks for whether the element is actually scrollable in\n    // a certain direction and we only assign the scroll direction if it is. We do this so that we\n    // can allow other elements to be scrolled, if the current element can't be scrolled anymore.\n    // This allows us to handle cases where the scroll regions of two scrollable elements overlap.\n    if (computedVertical) {\n        const scrollTop = element.scrollTop;\n        if (computedVertical === 1 /* AutoScrollVerticalDirection.UP */) {\n            if (scrollTop > 0) {\n                verticalScrollDirection = 1 /* AutoScrollVerticalDirection.UP */;\n            }\n        }\n        else if (element.scrollHeight - scrollTop > element.clientHeight) {\n            verticalScrollDirection = 2 /* AutoScrollVerticalDirection.DOWN */;\n        }\n    }\n    if (computedHorizontal) {\n        const scrollLeft = element.scrollLeft;\n        if (computedHorizontal === 1 /* AutoScrollHorizontalDirection.LEFT */) {\n            if (scrollLeft > 0) {\n                horizontalScrollDirection = 1 /* AutoScrollHorizontalDirection.LEFT */;\n            }\n        }\n        else if (element.scrollWidth - scrollLeft > element.clientWidth) {\n            horizontalScrollDirection = 2 /* AutoScrollHorizontalDirection.RIGHT */;\n        }\n    }\n    return [verticalScrollDirection, horizontalScrollDirection];\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Event options that can be used to bind an active, capturing event. */\nconst activeCapturingEventOptions = normalizePassiveListenerOptions({\n    passive: false,\n    capture: true,\n});\n/**\n * Service that keeps track of all the drag item and drop container\n * instances, and manages global event listeners on the `document`.\n * @docs-private\n */\n// Note: this class is generic, rather than referencing CdkDrag and CdkDropList directly, in order\n// to avoid circular imports. If we were to reference them here, importing the registry into the\n// classes that are registering themselves will introduce a circular import.\nclass DragDropRegistry {\n    constructor(_ngZone, _document) {\n        this._ngZone = _ngZone;\n        /** Registered drop container instances. */\n        this._dropInstances = new Set();\n        /** Registered drag item instances. */\n        this._dragInstances = new Set();\n        /** Drag item instances that are currently being dragged. */\n        this._activeDragInstances = [];\n        /** Keeps track of the event listeners that we've bound to the `document`. */\n        this._globalListeners = new Map();\n        /**\n         * Predicate function to check if an item is being dragged.  Moved out into a property,\n         * because it'll be called a lot and we don't want to create a new function every time.\n         */\n        this._draggingPredicate = (item) => item.isDragging();\n        /**\n         * Emits the `touchmove` or `mousemove` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerMove = new Subject();\n        /**\n         * Emits the `touchend` or `mouseup` events that are dispatched\n         * while the user is dragging a drag item instance.\n         */\n        this.pointerUp = new Subject();\n        /**\n         * Emits when the viewport has been scrolled while the user is dragging an item.\n         * @deprecated To be turned into a private member. Use the `scrolled` method instead.\n         * @breaking-change 13.0.0\n         */\n        this.scroll = new Subject();\n        /**\n         * Event listener that will prevent the default browser action while the user is dragging.\n         * @param event Event whose default action should be prevented.\n         */\n        this._preventDefaultWhileDragging = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                event.preventDefault();\n            }\n        };\n        /** Event listener for `touchmove` that is bound even if no dragging is happening. */\n        this._persistentTouchmoveListener = (event) => {\n            if (this._activeDragInstances.length > 0) {\n                // Note that we only want to prevent the default action after dragging has actually started.\n                // Usually this is the same time at which the item is added to the `_activeDragInstances`,\n                // but it could be pushed back if the user has set up a drag delay or threshold.\n                if (this._activeDragInstances.some(this._draggingPredicate)) {\n                    event.preventDefault();\n                }\n                this.pointerMove.next(event);\n            }\n        };\n        this._document = _document;\n    }\n    /** Adds a drop container to the registry. */\n    registerDropContainer(drop) {\n        if (!this._dropInstances.has(drop)) {\n            this._dropInstances.add(drop);\n        }\n    }\n    /** Adds a drag item instance to the registry. */\n    registerDragItem(drag) {\n        this._dragInstances.add(drag);\n        // The `touchmove` event gets bound once, ahead of time, because WebKit\n        // won't preventDefault on a dynamically-added `touchmove` listener.\n        // See https://bugs.webkit.org/show_bug.cgi?id=184250.\n        if (this._dragInstances.size === 1) {\n            this._ngZone.runOutsideAngular(() => {\n                // The event handler has to be explicitly active,\n                // because newer browsers make it passive by default.\n                this._document.addEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n            });\n        }\n    }\n    /** Removes a drop container from the registry. */\n    removeDropContainer(drop) {\n        this._dropInstances.delete(drop);\n    }\n    /** Removes a drag item instance from the registry. */\n    removeDragItem(drag) {\n        this._dragInstances.delete(drag);\n        this.stopDragging(drag);\n        if (this._dragInstances.size === 0) {\n            this._document.removeEventListener('touchmove', this._persistentTouchmoveListener, activeCapturingEventOptions);\n        }\n    }\n    /**\n     * Starts the dragging sequence for a drag instance.\n     * @param drag Drag instance which is being dragged.\n     * @param event Event that initiated the dragging.\n     */\n    startDragging(drag, event) {\n        // Do not process the same drag twice to avoid memory leaks and redundant listeners\n        if (this._activeDragInstances.indexOf(drag) > -1) {\n            return;\n        }\n        this._activeDragInstances.push(drag);\n        if (this._activeDragInstances.length === 1) {\n            const isTouchEvent = event.type.startsWith('touch');\n            // We explicitly bind __active__ listeners here, because newer browsers will default to\n            // passive ones for `mousemove` and `touchmove`. The events need to be active, because we\n            // use `preventDefault` to prevent the page from scrolling while the user is dragging.\n            this._globalListeners\n                .set(isTouchEvent ? 'touchend' : 'mouseup', {\n                handler: (e) => this.pointerUp.next(e),\n                options: true,\n            })\n                .set('scroll', {\n                handler: (e) => this.scroll.next(e),\n                // Use capturing so that we pick up scroll changes in any scrollable nodes that aren't\n                // the document. See https://github.com/angular/components/issues/17144.\n                options: true,\n            })\n                // Preventing the default action on `mousemove` isn't enough to disable text selection\n                // on Safari so we need to prevent the selection event as well. Alternatively this can\n                // be done by setting `user-select: none` on the `body`, however it has causes a style\n                // recalculation which can be expensive on pages with a lot of elements.\n                .set('selectstart', {\n                handler: this._preventDefaultWhileDragging,\n                options: activeCapturingEventOptions,\n            });\n            // We don't have to bind a move event for touch drag sequences, because\n            // we already have a persistent global one bound from `registerDragItem`.\n            if (!isTouchEvent) {\n                this._globalListeners.set('mousemove', {\n                    handler: (e) => this.pointerMove.next(e),\n                    options: activeCapturingEventOptions,\n                });\n            }\n            this._ngZone.runOutsideAngular(() => {\n                this._globalListeners.forEach((config, name) => {\n                    this._document.addEventListener(name, config.handler, config.options);\n                });\n            });\n        }\n    }\n    /** Stops dragging a drag item instance. */\n    stopDragging(drag) {\n        const index = this._activeDragInstances.indexOf(drag);\n        if (index > -1) {\n            this._activeDragInstances.splice(index, 1);\n            if (this._activeDragInstances.length === 0) {\n                this._clearGlobalListeners();\n            }\n        }\n    }\n    /** Gets whether a drag item instance is currently being dragged. */\n    isDragging(drag) {\n        return this._activeDragInstances.indexOf(drag) > -1;\n    }\n    /**\n     * Gets a stream that will emit when any element on the page is scrolled while an item is being\n     * dragged.\n     * @param shadowRoot Optional shadow root that the current dragging sequence started from.\n     *   Top-level listeners won't pick up events coming from the shadow DOM so this parameter can\n     *   be used to include an additional top-level listener at the shadow root level.\n     */\n    scrolled(shadowRoot) {\n        const streams = [this.scroll];\n        if (shadowRoot && shadowRoot !== this._document) {\n            // Note that this is basically the same as `fromEvent` from rxjs, but we do it ourselves,\n            // because we want to guarantee that the event is bound outside of the `NgZone`. With\n            // `fromEvent` it'll only happen if the subscription is outside the `NgZone`.\n            streams.push(new Observable((observer) => {\n                return this._ngZone.runOutsideAngular(() => {\n                    const eventOptions = true;\n                    const callback = (event) => {\n                        if (this._activeDragInstances.length) {\n                            observer.next(event);\n                        }\n                    };\n                    shadowRoot.addEventListener('scroll', callback, eventOptions);\n                    return () => {\n                        shadowRoot.removeEventListener('scroll', callback, eventOptions);\n                    };\n                });\n            }));\n        }\n        return merge(...streams);\n    }\n    ngOnDestroy() {\n        this._dragInstances.forEach(instance => this.removeDragItem(instance));\n        this._dropInstances.forEach(instance => this.removeDropContainer(instance));\n        this._clearGlobalListeners();\n        this.pointerMove.complete();\n        this.pointerUp.complete();\n    }\n    /** Clears out the global event listeners from the `document`. */\n    _clearGlobalListeners() {\n        this._globalListeners.forEach((config, name) => {\n            this._document.removeEventListener(name, config.handler, config.options);\n        });\n        this._globalListeners.clear();\n    }\n}\nDragDropRegistry.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDropRegistry, deps: [{ token: i0.NgZone }, { token: DOCUMENT }], target: i0.ɵɵFactoryTarget.Injectable });\nDragDropRegistry.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDropRegistry, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDropRegistry, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }]; } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Default configuration to be used when creating a `DragRef`. */\nconst DEFAULT_CONFIG = {\n    dragStartThreshold: 5,\n    pointerDirectionChangeThreshold: 5,\n};\n/**\n * Service that allows for drag-and-drop functionality to be attached to DOM elements.\n */\nclass DragDrop {\n    constructor(_document, _ngZone, _viewportRuler, _dragDropRegistry) {\n        this._document = _document;\n        this._ngZone = _ngZone;\n        this._viewportRuler = _viewportRuler;\n        this._dragDropRegistry = _dragDropRegistry;\n    }\n    /**\n     * Turns an element into a draggable item.\n     * @param element Element to which to attach the dragging functionality.\n     * @param config Object used to configure the dragging behavior.\n     */\n    createDrag(element, config = DEFAULT_CONFIG) {\n        return new DragRef(element, config, this._document, this._ngZone, this._viewportRuler, this._dragDropRegistry);\n    }\n    /**\n     * Turns an element into a drop list.\n     * @param element Element to which to attach the drop list functionality.\n     */\n    createDropList(element) {\n        return new DropListRef(element, this._dragDropRegistry, this._document, this._ngZone, this._viewportRuler);\n    }\n}\nDragDrop.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDrop, deps: [{ token: DOCUMENT }, { token: i0.NgZone }, { token: i1.ViewportRuler }, { token: DragDropRegistry }], target: i0.ɵɵFactoryTarget.Injectable });\nDragDrop.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDrop, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDrop, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: i0.NgZone }, { type: i1.ViewportRuler }, { type: DragDropRegistry }]; } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used for a `CdkDrag` to provide itself as a parent to the\n * drag-specific child directive (`CdkDragHandle`, `CdkDragPreview` etc.). Used primarily\n * to avoid circular imports.\n * @docs-private\n */\nconst CDK_DRAG_PARENT = new InjectionToken('CDK_DRAG_PARENT');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDropListGroup`. It serves as\n * alternative token to the actual `CdkDropListGroup` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST_GROUP = new InjectionToken('CdkDropListGroup');\n/**\n * Declaratively connects sibling `cdkDropList` instances together. All of the `cdkDropList`\n * elements that are placed inside a `cdkDropListGroup` will be connected to each other\n * automatically. Can be used as an alternative to the `cdkDropListConnectedTo` input\n * from `cdkDropList`.\n */\nclass CdkDropListGroup {\n    constructor() {\n        /** Drop lists registered inside the group. */\n        this._items = new Set();\n        this._disabled = false;\n    }\n    /** Whether starting a dragging sequence from inside this group is disabled. */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n    }\n    ngOnDestroy() {\n        this._items.clear();\n    }\n}\nCdkDropListGroup.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDropListGroup, deps: [], target: i0.ɵɵFactoryTarget.Directive });\nCdkDropListGroup.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.0\", type: CdkDropListGroup, selector: \"[cdkDropListGroup]\", inputs: { disabled: [\"cdkDropListGroupDisabled\", \"disabled\"] }, providers: [{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }], exportAs: [\"cdkDropListGroup\"], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDropListGroup, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDropListGroup]',\n                    exportAs: 'cdkDropListGroup',\n                    providers: [{ provide: CDK_DROP_LIST_GROUP, useExisting: CdkDropListGroup }],\n                }]\n        }], propDecorators: { disabled: [{\n                type: Input,\n                args: ['cdkDropListGroupDisabled']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to configure the\n * behavior of the drag&drop-related components.\n */\nconst CDK_DRAG_CONFIG = new InjectionToken('CDK_DRAG_CONFIG');\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Asserts that a particular node is an element.\n * @param node Node to be checked.\n * @param name Name to attach to the error message.\n */\nfunction assertElementNode(node, name) {\n    if (node.nodeType !== 1) {\n        throw Error(`${name} must be attached to an element node. ` + `Currently attached to \"${node.nodeName}\".`);\n    }\n}\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/** Counter used to generate unique ids for drop zones. */\nlet _uniqueIdCounter = 0;\n/**\n * Injection token that can be used to reference instances of `CdkDropList`. It serves as\n * alternative token to the actual `CdkDropList` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DROP_LIST = new InjectionToken('CdkDropList');\n/** Container that wraps a set of draggable items. */\nclass CdkDropList {\n    constructor(\n    /** Element that the drop list is attached to. */\n    element, dragDrop, _changeDetectorRef, _scrollDispatcher, _dir, _group, config) {\n        this.element = element;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._scrollDispatcher = _scrollDispatcher;\n        this._dir = _dir;\n        this._group = _group;\n        /** Emits when the list has been destroyed. */\n        this._destroyed = new Subject();\n        /**\n         * Other draggable containers that this container is connected to and into which the\n         * container's items can be transferred. Can either be references to other drop containers,\n         * or their unique IDs.\n         */\n        this.connectedTo = [];\n        /**\n         * Unique ID for the drop zone. Can be used as a reference\n         * in the `connectedTo` of another `CdkDropList`.\n         */\n        this.id = `cdk-drop-list-${_uniqueIdCounter++}`;\n        /**\n         * Function that is used to determine whether an item\n         * is allowed to be moved into a drop container.\n         */\n        this.enterPredicate = () => true;\n        /** Functions that is used to determine whether an item can be sorted into a particular index. */\n        this.sortPredicate = () => true;\n        /** Emits when the user drops an item inside the container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits when the user has moved a new drag item into this container.\n         */\n        this.entered = new EventEmitter();\n        /**\n         * Emits when the user removes an item from the container\n         * by dragging it into another container.\n         */\n        this.exited = new EventEmitter();\n        /** Emits as the user is swapping items while actively dragging. */\n        this.sorted = new EventEmitter();\n        /**\n         * Keeps track of the items that are registered with this container. Historically we used to\n         * do this with a `ContentChildren` query, however queries don't handle transplanted views very\n         * well which means that we can't handle cases like dragging the headers of a `mat-table`\n         * correctly. What we do instead is to have the items register themselves with the container\n         * and then we sort them based on their position in the DOM.\n         */\n        this._unsortedItems = new Set();\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDropList');\n        }\n        this._dropListRef = dragDrop.createDropList(element);\n        this._dropListRef.data = this;\n        if (config) {\n            this._assignDefaults(config);\n        }\n        this._dropListRef.enterPredicate = (drag, drop) => {\n            return this.enterPredicate(drag.data, drop.data);\n        };\n        this._dropListRef.sortPredicate = (index, drag, drop) => {\n            return this.sortPredicate(index, drag.data, drop.data);\n        };\n        this._setupInputSyncSubscription(this._dropListRef);\n        this._handleEvents(this._dropListRef);\n        CdkDropList._dropLists.push(this);\n        if (_group) {\n            _group._items.add(this);\n        }\n    }\n    /** Whether starting a dragging sequence from this container is disabled. */\n    get disabled() {\n        return this._disabled || (!!this._group && this._group.disabled);\n    }\n    set disabled(value) {\n        // Usually we sync the directive and ref state right before dragging starts, in order to have\n        // a single point of failure and to avoid having to use setters for everything. `disabled` is\n        // a special case, because it can prevent the `beforeStarted` event from firing, which can lock\n        // the user in a disabled state, so we also need to sync it as it's being set.\n        this._dropListRef.disabled = this._disabled = coerceBooleanProperty(value);\n    }\n    /** Registers an items with the drop list. */\n    addItem(item) {\n        this._unsortedItems.add(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Removes an item from the drop list. */\n    removeItem(item) {\n        this._unsortedItems.delete(item);\n        if (this._dropListRef.isDragging()) {\n            this._syncItemsWithRef();\n        }\n    }\n    /** Gets the registered items in the list, sorted by their position in the DOM. */\n    getSortedItems() {\n        return Array.from(this._unsortedItems).sort((a, b) => {\n            const documentPosition = a._dragRef\n                .getVisibleElement()\n                .compareDocumentPosition(b._dragRef.getVisibleElement());\n            // `compareDocumentPosition` returns a bitmask so we have to use a bitwise operator.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n            // tslint:disable-next-line:no-bitwise\n            return documentPosition & Node.DOCUMENT_POSITION_FOLLOWING ? -1 : 1;\n        });\n    }\n    ngOnDestroy() {\n        const index = CdkDropList._dropLists.indexOf(this);\n        if (index > -1) {\n            CdkDropList._dropLists.splice(index, 1);\n        }\n        if (this._group) {\n            this._group._items.delete(this);\n        }\n        this._unsortedItems.clear();\n        this._dropListRef.dispose();\n        this._destroyed.next();\n        this._destroyed.complete();\n    }\n    /** Syncs the inputs of the CdkDropList with the options of the underlying DropListRef. */\n    _setupInputSyncSubscription(ref) {\n        if (this._dir) {\n            this._dir.change\n                .pipe(startWith(this._dir.value), takeUntil(this._destroyed))\n                .subscribe(value => ref.withDirection(value));\n        }\n        ref.beforeStarted.subscribe(() => {\n            const siblings = coerceArray(this.connectedTo).map(drop => {\n                if (typeof drop === 'string') {\n                    const correspondingDropList = CdkDropList._dropLists.find(list => list.id === drop);\n                    if (!correspondingDropList && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n                        console.warn(`CdkDropList could not find connected drop list with id \"${drop}\"`);\n                    }\n                    return correspondingDropList;\n                }\n                return drop;\n            });\n            if (this._group) {\n                this._group._items.forEach(drop => {\n                    if (siblings.indexOf(drop) === -1) {\n                        siblings.push(drop);\n                    }\n                });\n            }\n            // Note that we resolve the scrollable parents here so that we delay the resolution\n            // as long as possible, ensuring that the element is in its final place in the DOM.\n            if (!this._scrollableParentsResolved) {\n                const scrollableParents = this._scrollDispatcher\n                    .getAncestorScrollContainers(this.element)\n                    .map(scrollable => scrollable.getElementRef().nativeElement);\n                this._dropListRef.withScrollableParents(scrollableParents);\n                // Only do this once since it involves traversing the DOM and the parents\n                // shouldn't be able to change without the drop list being destroyed.\n                this._scrollableParentsResolved = true;\n            }\n            ref.disabled = this.disabled;\n            ref.lockAxis = this.lockAxis;\n            ref.sortingDisabled = coerceBooleanProperty(this.sortingDisabled);\n            ref.autoScrollDisabled = coerceBooleanProperty(this.autoScrollDisabled);\n            ref.autoScrollStep = coerceNumberProperty(this.autoScrollStep, 2);\n            ref\n                .connectedTo(siblings.filter(drop => drop && drop !== this).map(list => list._dropListRef))\n                .withOrientation(this.orientation);\n        });\n    }\n    /** Handles events from the underlying DropListRef. */\n    _handleEvents(ref) {\n        ref.beforeStarted.subscribe(() => {\n            this._syncItemsWithRef();\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(event => {\n            this.entered.emit({\n                container: this,\n                item: event.item.data,\n                currentIndex: event.currentIndex,\n            });\n        });\n        ref.exited.subscribe(event => {\n            this.exited.emit({\n                container: this,\n                item: event.item.data,\n            });\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.sorted.subscribe(event => {\n            this.sorted.emit({\n                previousIndex: event.previousIndex,\n                currentIndex: event.currentIndex,\n                container: this,\n                item: event.item.data,\n            });\n        });\n        ref.dropped.subscribe(dropEvent => {\n            this.dropped.emit({\n                previousIndex: dropEvent.previousIndex,\n                currentIndex: dropEvent.currentIndex,\n                previousContainer: dropEvent.previousContainer.data,\n                container: dropEvent.container.data,\n                item: dropEvent.item.data,\n                isPointerOverContainer: dropEvent.isPointerOverContainer,\n                distance: dropEvent.distance,\n                dropPoint: dropEvent.dropPoint,\n                event: dropEvent.event,\n            });\n            // Mark for check since all of these events run outside of change\n            // detection and we're not guaranteed for something else to have triggered it.\n            this._changeDetectorRef.markForCheck();\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, draggingDisabled, sortingDisabled, listAutoScrollDisabled, listOrientation } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.sortingDisabled = sortingDisabled == null ? false : sortingDisabled;\n        this.autoScrollDisabled = listAutoScrollDisabled == null ? false : listAutoScrollDisabled;\n        this.orientation = listOrientation || 'vertical';\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n    }\n    /** Syncs up the registered drag items with underlying drop list ref. */\n    _syncItemsWithRef() {\n        this._dropListRef.withItems(this.getSortedItems().map(item => item._dragRef));\n    }\n}\n/** Keeps track of the drop lists that are currently on the page. */\nCdkDropList._dropLists = [];\nCdkDropList.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDropList, deps: [{ token: i0.ElementRef }, { token: DragDrop }, { token: i0.ChangeDetectorRef }, { token: i1.ScrollDispatcher }, { token: i3.Directionality, optional: true }, { token: CDK_DROP_LIST_GROUP, optional: true, skipSelf: true }, { token: CDK_DRAG_CONFIG, optional: true }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDropList.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.0\", type: CdkDropList, selector: \"[cdkDropList], cdk-drop-list\", inputs: { connectedTo: [\"cdkDropListConnectedTo\", \"connectedTo\"], data: [\"cdkDropListData\", \"data\"], orientation: [\"cdkDropListOrientation\", \"orientation\"], id: \"id\", lockAxis: [\"cdkDropListLockAxis\", \"lockAxis\"], disabled: [\"cdkDropListDisabled\", \"disabled\"], sortingDisabled: [\"cdkDropListSortingDisabled\", \"sortingDisabled\"], enterPredicate: [\"cdkDropListEnterPredicate\", \"enterPredicate\"], sortPredicate: [\"cdkDropListSortPredicate\", \"sortPredicate\"], autoScrollDisabled: [\"cdkDropListAutoScrollDisabled\", \"autoScrollDisabled\"], autoScrollStep: [\"cdkDropListAutoScrollStep\", \"autoScrollStep\"] }, outputs: { dropped: \"cdkDropListDropped\", entered: \"cdkDropListEntered\", exited: \"cdkDropListExited\", sorted: \"cdkDropListSorted\" }, host: { properties: { \"attr.id\": \"id\", \"class.cdk-drop-list-disabled\": \"disabled\", \"class.cdk-drop-list-dragging\": \"_dropListRef.isDragging()\", \"class.cdk-drop-list-receiving\": \"_dropListRef.isReceiving()\" }, classAttribute: \"cdk-drop-list\" }, providers: [\n        // Prevent child drop lists from picking up the same group as their parent.\n        { provide: CDK_DROP_LIST_GROUP, useValue: undefined },\n        { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n    ], exportAs: [\"cdkDropList\"], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDropList, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDropList], cdk-drop-list',\n                    exportAs: 'cdkDropList',\n                    providers: [\n                        // Prevent child drop lists from picking up the same group as their parent.\n                        { provide: CDK_DROP_LIST_GROUP, useValue: undefined },\n                        { provide: CDK_DROP_LIST, useExisting: CdkDropList },\n                    ],\n                    host: {\n                        'class': 'cdk-drop-list',\n                        '[attr.id]': 'id',\n                        '[class.cdk-drop-list-disabled]': 'disabled',\n                        '[class.cdk-drop-list-dragging]': '_dropListRef.isDragging()',\n                        '[class.cdk-drop-list-receiving]': '_dropListRef.isReceiving()',\n                    },\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: DragDrop }, { type: i0.ChangeDetectorRef }, { type: i1.ScrollDispatcher }, { type: i3.Directionality, decorators: [{\n                    type: Optional\n                }] }, { type: CdkDropListGroup, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [CDK_DROP_LIST_GROUP]\n                }, {\n                    type: SkipSelf\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_CONFIG]\n                }] }]; }, propDecorators: { connectedTo: [{\n                type: Input,\n                args: ['cdkDropListConnectedTo']\n            }], data: [{\n                type: Input,\n                args: ['cdkDropListData']\n            }], orientation: [{\n                type: Input,\n                args: ['cdkDropListOrientation']\n            }], id: [{\n                type: Input\n            }], lockAxis: [{\n                type: Input,\n                args: ['cdkDropListLockAxis']\n            }], disabled: [{\n                type: Input,\n                args: ['cdkDropListDisabled']\n            }], sortingDisabled: [{\n                type: Input,\n                args: ['cdkDropListSortingDisabled']\n            }], enterPredicate: [{\n                type: Input,\n                args: ['cdkDropListEnterPredicate']\n            }], sortPredicate: [{\n                type: Input,\n                args: ['cdkDropListSortPredicate']\n            }], autoScrollDisabled: [{\n                type: Input,\n                args: ['cdkDropListAutoScrollDisabled']\n            }], autoScrollStep: [{\n                type: Input,\n                args: ['cdkDropListAutoScrollStep']\n            }], dropped: [{\n                type: Output,\n                args: ['cdkDropListDropped']\n            }], entered: [{\n                type: Output,\n                args: ['cdkDropListEntered']\n            }], exited: [{\n                type: Output,\n                args: ['cdkDropListExited']\n            }], sorted: [{\n                type: Output,\n                args: ['cdkDropListSorted']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragHandle`. It serves as\n * alternative token to the actual `CdkDragHandle` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_HANDLE = new InjectionToken('CdkDragHandle');\n/** Handle that can be used to drag a CdkDrag instance. */\nclass CdkDragHandle {\n    constructor(element, parentDrag) {\n        this.element = element;\n        /** Emits when the state of the handle has changed. */\n        this._stateChanges = new Subject();\n        this._disabled = false;\n        if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            assertElementNode(element.nativeElement, 'cdkDragHandle');\n        }\n        this._parentDrag = parentDrag;\n    }\n    /** Whether starting to drag through this handle is disabled. */\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._stateChanges.next(this);\n    }\n    ngOnDestroy() {\n        this._stateChanges.complete();\n    }\n}\nCdkDragHandle.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDragHandle, deps: [{ token: i0.ElementRef }, { token: CDK_DRAG_PARENT, optional: true, skipSelf: true }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDragHandle.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.0\", type: CdkDragHandle, selector: \"[cdkDragHandle]\", inputs: { disabled: [\"cdkDragHandleDisabled\", \"disabled\"] }, host: { classAttribute: \"cdk-drag-handle\" }, providers: [{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDragHandle, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDragHandle]',\n                    host: {\n                        'class': 'cdk-drag-handle',\n                    },\n                    providers: [{ provide: CDK_DRAG_HANDLE, useExisting: CdkDragHandle }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [CDK_DRAG_PARENT]\n                }, {\n                    type: Optional\n                }, {\n                    type: SkipSelf\n                }] }]; }, propDecorators: { disabled: [{\n                type: Input,\n                args: ['cdkDragHandleDisabled']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPlaceholder`. It serves as\n * alternative token to the actual `CdkDragPlaceholder` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PLACEHOLDER = new InjectionToken('CdkDragPlaceholder');\n/**\n * Element that will be used as a template for the placeholder of a CdkDrag when\n * it is being dragged. The placeholder is displayed in place of the element being dragged.\n */\nclass CdkDragPlaceholder {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n    }\n}\nCdkDragPlaceholder.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDragPlaceholder, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDragPlaceholder.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.0\", type: CdkDragPlaceholder, selector: \"ng-template[cdkDragPlaceholder]\", inputs: { data: \"data\" }, providers: [{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDragPlaceholder, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'ng-template[cdkDragPlaceholder]',\n                    providers: [{ provide: CDK_DRAG_PLACEHOLDER, useExisting: CdkDragPlaceholder }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.TemplateRef }]; }, propDecorators: { data: [{\n                type: Input\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to reference instances of `CdkDragPreview`. It serves as\n * alternative token to the actual `CdkDragPreview` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst CDK_DRAG_PREVIEW = new InjectionToken('CdkDragPreview');\n/**\n * Element that will be used as a template for the preview\n * of a CdkDrag when it is being dragged.\n */\nclass CdkDragPreview {\n    constructor(templateRef) {\n        this.templateRef = templateRef;\n        this._matchSize = false;\n    }\n    /** Whether the preview should preserve the same size as the item that is being dragged. */\n    get matchSize() {\n        return this._matchSize;\n    }\n    set matchSize(value) {\n        this._matchSize = coerceBooleanProperty(value);\n    }\n}\nCdkDragPreview.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDragPreview, deps: [{ token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDragPreview.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.0\", type: CdkDragPreview, selector: \"ng-template[cdkDragPreview]\", inputs: { data: \"data\", matchSize: \"matchSize\" }, providers: [{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }], ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDragPreview, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: 'ng-template[cdkDragPreview]',\n                    providers: [{ provide: CDK_DRAG_PREVIEW, useExisting: CdkDragPreview }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.TemplateRef }]; }, propDecorators: { data: [{\n                type: Input\n            }], matchSize: [{\n                type: Input\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst DRAG_HOST_CLASS = 'cdk-drag';\n/** Element that can be moved inside a CdkDropList container. */\nclass CdkDrag {\n    constructor(\n    /** Element that the draggable is attached to. */\n    element, \n    /** Droppable container that the draggable is a part of. */\n    dropContainer, \n    /**\n     * @deprecated `_document` parameter no longer being used and will be removed.\n     * @breaking-change 12.0.0\n     */\n    _document, _ngZone, _viewContainerRef, config, _dir, dragDrop, _changeDetectorRef, _selfHandle, _parentDrag) {\n        this.element = element;\n        this.dropContainer = dropContainer;\n        this._ngZone = _ngZone;\n        this._viewContainerRef = _viewContainerRef;\n        this._dir = _dir;\n        this._changeDetectorRef = _changeDetectorRef;\n        this._selfHandle = _selfHandle;\n        this._parentDrag = _parentDrag;\n        this._destroyed = new Subject();\n        /** Emits when the user starts dragging the item. */\n        this.started = new EventEmitter();\n        /** Emits when the user has released a drag item, before any animations have started. */\n        this.released = new EventEmitter();\n        /** Emits when the user stops dragging an item in the container. */\n        this.ended = new EventEmitter();\n        /** Emits when the user has moved the item into a new container. */\n        this.entered = new EventEmitter();\n        /** Emits when the user removes the item its container by dragging it into another container. */\n        this.exited = new EventEmitter();\n        /** Emits when the user drops the item inside a container. */\n        this.dropped = new EventEmitter();\n        /**\n         * Emits as the user is dragging the item. Use with caution,\n         * because this event will fire for every pixel that the user has dragged.\n         */\n        this.moved = new Observable((observer) => {\n            const subscription = this._dragRef.moved\n                .pipe(map(movedEvent => ({\n                source: this,\n                pointerPosition: movedEvent.pointerPosition,\n                event: movedEvent.event,\n                delta: movedEvent.delta,\n                distance: movedEvent.distance,\n            })))\n                .subscribe(observer);\n            return () => {\n                subscription.unsubscribe();\n            };\n        });\n        this._dragRef = dragDrop.createDrag(element, {\n            dragStartThreshold: config && config.dragStartThreshold != null ? config.dragStartThreshold : 5,\n            pointerDirectionChangeThreshold: config && config.pointerDirectionChangeThreshold != null\n                ? config.pointerDirectionChangeThreshold\n                : 5,\n            zIndex: config?.zIndex,\n        });\n        this._dragRef.data = this;\n        // We have to keep track of the drag instances in order to be able to match an element to\n        // a drag instance. We can't go through the global registry of `DragRef`, because the root\n        // element could be different.\n        CdkDrag._dragInstances.push(this);\n        if (config) {\n            this._assignDefaults(config);\n        }\n        // Note that usually the container is assigned when the drop list is picks up the item, but in\n        // some cases (mainly transplanted views with OnPush, see #18341) we may end up in a situation\n        // where there are no items on the first change detection pass, but the items get picked up as\n        // soon as the user triggers another pass by dragging. This is a problem, because the item would\n        // have to switch from standalone mode to drag mode in the middle of the dragging sequence which\n        // is too late since the two modes save different kinds of information. We work around it by\n        // assigning the drop container both from here and the list.\n        if (dropContainer) {\n            this._dragRef._withDropContainer(dropContainer._dropListRef);\n            dropContainer.addItem(this);\n        }\n        this._syncInputs(this._dragRef);\n        this._handleEvents(this._dragRef);\n    }\n    /** Whether starting to drag this element is disabled. */\n    get disabled() {\n        return this._disabled || (this.dropContainer && this.dropContainer.disabled);\n    }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        this._dragRef.disabled = this._disabled;\n    }\n    /**\n     * Returns the element that is being used as a placeholder\n     * while the current element is being dragged.\n     */\n    getPlaceholderElement() {\n        return this._dragRef.getPlaceholderElement();\n    }\n    /** Returns the root draggable element. */\n    getRootElement() {\n        return this._dragRef.getRootElement();\n    }\n    /** Resets a standalone drag item to its initial position. */\n    reset() {\n        this._dragRef.reset();\n    }\n    /**\n     * Gets the pixel coordinates of the draggable outside of a drop container.\n     */\n    getFreeDragPosition() {\n        return this._dragRef.getFreeDragPosition();\n    }\n    /**\n     * Sets the current position in pixels the draggable outside of a drop container.\n     * @param value New position to be set.\n     */\n    setFreeDragPosition(value) {\n        this._dragRef.setFreeDragPosition(value);\n    }\n    ngAfterViewInit() {\n        // Normally this isn't in the zone, but it can cause major performance regressions for apps\n        // using `zone-patch-rxjs` because it'll trigger a change detection when it unsubscribes.\n        this._ngZone.runOutsideAngular(() => {\n            // We need to wait for the zone to stabilize, in order for the reference\n            // element to be in the proper place in the DOM. This is mostly relevant\n            // for draggable elements inside portals since they get stamped out in\n            // their original DOM position and then they get transferred to the portal.\n            this._ngZone.onStable.pipe(take(1), takeUntil(this._destroyed)).subscribe(() => {\n                this._updateRootElement();\n                this._setupHandlesListener();\n                if (this.freeDragPosition) {\n                    this._dragRef.setFreeDragPosition(this.freeDragPosition);\n                }\n            });\n        });\n    }\n    ngOnChanges(changes) {\n        const rootSelectorChange = changes['rootElementSelector'];\n        const positionChange = changes['freeDragPosition'];\n        // We don't have to react to the first change since it's being\n        // handled in `ngAfterViewInit` where it needs to be deferred.\n        if (rootSelectorChange && !rootSelectorChange.firstChange) {\n            this._updateRootElement();\n        }\n        // Skip the first change since it's being handled in `ngAfterViewInit`.\n        if (positionChange && !positionChange.firstChange && this.freeDragPosition) {\n            this._dragRef.setFreeDragPosition(this.freeDragPosition);\n        }\n    }\n    ngOnDestroy() {\n        if (this.dropContainer) {\n            this.dropContainer.removeItem(this);\n        }\n        const index = CdkDrag._dragInstances.indexOf(this);\n        if (index > -1) {\n            CdkDrag._dragInstances.splice(index, 1);\n        }\n        // Unnecessary in most cases, but used to avoid extra change detections with `zone-paths-rxjs`.\n        this._ngZone.runOutsideAngular(() => {\n            this._destroyed.next();\n            this._destroyed.complete();\n            this._dragRef.dispose();\n        });\n    }\n    /** Syncs the root element with the `DragRef`. */\n    _updateRootElement() {\n        const element = this.element.nativeElement;\n        let rootElement = element;\n        if (this.rootElementSelector) {\n            rootElement =\n                element.closest !== undefined\n                    ? element.closest(this.rootElementSelector)\n                    : // Comment tag doesn't have closest method, so use parent's one.\n                        element.parentElement?.closest(this.rootElementSelector);\n        }\n        if (rootElement && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n            assertElementNode(rootElement, 'cdkDrag');\n        }\n        this._dragRef.withRootElement(rootElement || element);\n    }\n    /** Gets the boundary element, based on the `boundaryElement` value. */\n    _getBoundaryElement() {\n        const boundary = this.boundaryElement;\n        if (!boundary) {\n            return null;\n        }\n        if (typeof boundary === 'string') {\n            return this.element.nativeElement.closest(boundary);\n        }\n        return coerceElement(boundary);\n    }\n    /** Syncs the inputs of the CdkDrag with the options of the underlying DragRef. */\n    _syncInputs(ref) {\n        ref.beforeStarted.subscribe(() => {\n            if (!ref.isDragging()) {\n                const dir = this._dir;\n                const dragStartDelay = this.dragStartDelay;\n                const placeholder = this._placeholderTemplate\n                    ? {\n                        template: this._placeholderTemplate.templateRef,\n                        context: this._placeholderTemplate.data,\n                        viewContainer: this._viewContainerRef,\n                    }\n                    : null;\n                const preview = this._previewTemplate\n                    ? {\n                        template: this._previewTemplate.templateRef,\n                        context: this._previewTemplate.data,\n                        matchSize: this._previewTemplate.matchSize,\n                        viewContainer: this._viewContainerRef,\n                    }\n                    : null;\n                ref.disabled = this.disabled;\n                ref.lockAxis = this.lockAxis;\n                ref.dragStartDelay =\n                    typeof dragStartDelay === 'object' && dragStartDelay\n                        ? dragStartDelay\n                        : coerceNumberProperty(dragStartDelay);\n                ref.constrainPosition = this.constrainPosition;\n                ref.previewClass = this.previewClass;\n                ref\n                    .withBoundaryElement(this._getBoundaryElement())\n                    .withPlaceholderTemplate(placeholder)\n                    .withPreviewTemplate(preview)\n                    .withPreviewContainer(this.previewContainer || 'global');\n                if (dir) {\n                    ref.withDirection(dir.value);\n                }\n            }\n        });\n        // This only needs to be resolved once.\n        ref.beforeStarted.pipe(take(1)).subscribe(() => {\n            // If we managed to resolve a parent through DI, use it.\n            if (this._parentDrag) {\n                ref.withParent(this._parentDrag._dragRef);\n                return;\n            }\n            // Otherwise fall back to resolving the parent by looking up the DOM. This can happen if\n            // the item was projected into another item by something like `ngTemplateOutlet`.\n            let parent = this.element.nativeElement.parentElement;\n            while (parent) {\n                if (parent.classList.contains(DRAG_HOST_CLASS)) {\n                    ref.withParent(CdkDrag._dragInstances.find(drag => {\n                        return drag.element.nativeElement === parent;\n                    })?._dragRef || null);\n                    break;\n                }\n                parent = parent.parentElement;\n            }\n        });\n    }\n    /** Handles the events from the underlying `DragRef`. */\n    _handleEvents(ref) {\n        ref.started.subscribe(startEvent => {\n            this.started.emit({ source: this, event: startEvent.event });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.released.subscribe(releaseEvent => {\n            this.released.emit({ source: this, event: releaseEvent.event });\n        });\n        ref.ended.subscribe(endEvent => {\n            this.ended.emit({\n                source: this,\n                distance: endEvent.distance,\n                dropPoint: endEvent.dropPoint,\n                event: endEvent.event,\n            });\n            // Since all of these events run outside of change detection,\n            // we need to ensure that everything is marked correctly.\n            this._changeDetectorRef.markForCheck();\n        });\n        ref.entered.subscribe(enterEvent => {\n            this.entered.emit({\n                container: enterEvent.container.data,\n                item: this,\n                currentIndex: enterEvent.currentIndex,\n            });\n        });\n        ref.exited.subscribe(exitEvent => {\n            this.exited.emit({\n                container: exitEvent.container.data,\n                item: this,\n            });\n        });\n        ref.dropped.subscribe(dropEvent => {\n            this.dropped.emit({\n                previousIndex: dropEvent.previousIndex,\n                currentIndex: dropEvent.currentIndex,\n                previousContainer: dropEvent.previousContainer.data,\n                container: dropEvent.container.data,\n                isPointerOverContainer: dropEvent.isPointerOverContainer,\n                item: this,\n                distance: dropEvent.distance,\n                dropPoint: dropEvent.dropPoint,\n                event: dropEvent.event,\n            });\n        });\n    }\n    /** Assigns the default input values based on a provided config object. */\n    _assignDefaults(config) {\n        const { lockAxis, dragStartDelay, constrainPosition, previewClass, boundaryElement, draggingDisabled, rootElementSelector, previewContainer, } = config;\n        this.disabled = draggingDisabled == null ? false : draggingDisabled;\n        this.dragStartDelay = dragStartDelay || 0;\n        if (lockAxis) {\n            this.lockAxis = lockAxis;\n        }\n        if (constrainPosition) {\n            this.constrainPosition = constrainPosition;\n        }\n        if (previewClass) {\n            this.previewClass = previewClass;\n        }\n        if (boundaryElement) {\n            this.boundaryElement = boundaryElement;\n        }\n        if (rootElementSelector) {\n            this.rootElementSelector = rootElementSelector;\n        }\n        if (previewContainer) {\n            this.previewContainer = previewContainer;\n        }\n    }\n    /** Sets up the listener that syncs the handles with the drag ref. */\n    _setupHandlesListener() {\n        // Listen for any newly-added handles.\n        this._handles.changes\n            .pipe(startWith(this._handles), \n        // Sync the new handles with the DragRef.\n        tap((handles) => {\n            const childHandleElements = handles\n                .filter(handle => handle._parentDrag === this)\n                .map(handle => handle.element);\n            // Usually handles are only allowed to be a descendant of the drag element, but if\n            // the consumer defined a different drag root, we should allow the drag element\n            // itself to be a handle too.\n            if (this._selfHandle && this.rootElementSelector) {\n                childHandleElements.push(this.element);\n            }\n            this._dragRef.withHandles(childHandleElements);\n        }), \n        // Listen if the state of any of the handles changes.\n        switchMap((handles) => {\n            return merge(...handles.map(item => {\n                return item._stateChanges.pipe(startWith(item));\n            }));\n        }), takeUntil(this._destroyed))\n            .subscribe(handleInstance => {\n            // Enabled/disable the handle that changed in the DragRef.\n            const dragRef = this._dragRef;\n            const handle = handleInstance.element.nativeElement;\n            handleInstance.disabled ? dragRef.disableHandle(handle) : dragRef.enableHandle(handle);\n        });\n    }\n}\nCdkDrag._dragInstances = [];\nCdkDrag.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDrag, deps: [{ token: i0.ElementRef }, { token: CDK_DROP_LIST, optional: true, skipSelf: true }, { token: DOCUMENT }, { token: i0.NgZone }, { token: i0.ViewContainerRef }, { token: CDK_DRAG_CONFIG, optional: true }, { token: i3.Directionality, optional: true }, { token: DragDrop }, { token: i0.ChangeDetectorRef }, { token: CDK_DRAG_HANDLE, optional: true, self: true }, { token: CDK_DRAG_PARENT, optional: true, skipSelf: true }], target: i0.ɵɵFactoryTarget.Directive });\nCdkDrag.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"14.2.0\", type: CdkDrag, selector: \"[cdkDrag]\", inputs: { data: [\"cdkDragData\", \"data\"], lockAxis: [\"cdkDragLockAxis\", \"lockAxis\"], rootElementSelector: [\"cdkDragRootElement\", \"rootElementSelector\"], boundaryElement: [\"cdkDragBoundary\", \"boundaryElement\"], dragStartDelay: [\"cdkDragStartDelay\", \"dragStartDelay\"], freeDragPosition: [\"cdkDragFreeDragPosition\", \"freeDragPosition\"], disabled: [\"cdkDragDisabled\", \"disabled\"], constrainPosition: [\"cdkDragConstrainPosition\", \"constrainPosition\"], previewClass: [\"cdkDragPreviewClass\", \"previewClass\"], previewContainer: [\"cdkDragPreviewContainer\", \"previewContainer\"] }, outputs: { started: \"cdkDragStarted\", released: \"cdkDragReleased\", ended: \"cdkDragEnded\", entered: \"cdkDragEntered\", exited: \"cdkDragExited\", dropped: \"cdkDragDropped\", moved: \"cdkDragMoved\" }, host: { properties: { \"class.cdk-drag-disabled\": \"disabled\", \"class.cdk-drag-dragging\": \"_dragRef.isDragging()\" }, classAttribute: \"cdk-drag\" }, providers: [{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }], queries: [{ propertyName: \"_previewTemplate\", first: true, predicate: CDK_DRAG_PREVIEW, descendants: true }, { propertyName: \"_placeholderTemplate\", first: true, predicate: CDK_DRAG_PLACEHOLDER, descendants: true }, { propertyName: \"_handles\", predicate: CDK_DRAG_HANDLE, descendants: true }], exportAs: [\"cdkDrag\"], usesOnChanges: true, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: CdkDrag, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkDrag]',\n                    exportAs: 'cdkDrag',\n                    host: {\n                        'class': DRAG_HOST_CLASS,\n                        '[class.cdk-drag-disabled]': 'disabled',\n                        '[class.cdk-drag-dragging]': '_dragRef.isDragging()',\n                    },\n                    providers: [{ provide: CDK_DRAG_PARENT, useExisting: CdkDrag }],\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [CDK_DROP_LIST]\n                }, {\n                    type: Optional\n                }, {\n                    type: SkipSelf\n                }] }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: i0.NgZone }, { type: i0.ViewContainerRef }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_CONFIG]\n                }] }, { type: i3.Directionality, decorators: [{\n                    type: Optional\n                }] }, { type: DragDrop }, { type: i0.ChangeDetectorRef }, { type: CdkDragHandle, decorators: [{\n                    type: Optional\n                }, {\n                    type: Self\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_HANDLE]\n                }] }, { type: CdkDrag, decorators: [{\n                    type: Optional\n                }, {\n                    type: SkipSelf\n                }, {\n                    type: Inject,\n                    args: [CDK_DRAG_PARENT]\n                }] }]; }, propDecorators: { _handles: [{\n                type: ContentChildren,\n                args: [CDK_DRAG_HANDLE, { descendants: true }]\n            }], _previewTemplate: [{\n                type: ContentChild,\n                args: [CDK_DRAG_PREVIEW]\n            }], _placeholderTemplate: [{\n                type: ContentChild,\n                args: [CDK_DRAG_PLACEHOLDER]\n            }], data: [{\n                type: Input,\n                args: ['cdkDragData']\n            }], lockAxis: [{\n                type: Input,\n                args: ['cdkDragLockAxis']\n            }], rootElementSelector: [{\n                type: Input,\n                args: ['cdkDragRootElement']\n            }], boundaryElement: [{\n                type: Input,\n                args: ['cdkDragBoundary']\n            }], dragStartDelay: [{\n                type: Input,\n                args: ['cdkDragStartDelay']\n            }], freeDragPosition: [{\n                type: Input,\n                args: ['cdkDragFreeDragPosition']\n            }], disabled: [{\n                type: Input,\n                args: ['cdkDragDisabled']\n            }], constrainPosition: [{\n                type: Input,\n                args: ['cdkDragConstrainPosition']\n            }], previewClass: [{\n                type: Input,\n                args: ['cdkDragPreviewClass']\n            }], previewContainer: [{\n                type: Input,\n                args: ['cdkDragPreviewContainer']\n            }], started: [{\n                type: Output,\n                args: ['cdkDragStarted']\n            }], released: [{\n                type: Output,\n                args: ['cdkDragReleased']\n            }], ended: [{\n                type: Output,\n                args: ['cdkDragEnded']\n            }], entered: [{\n                type: Output,\n                args: ['cdkDragEntered']\n            }], exited: [{\n                type: Output,\n                args: ['cdkDragExited']\n            }], dropped: [{\n                type: Output,\n                args: ['cdkDragDropped']\n            }], moved: [{\n                type: Output,\n                args: ['cdkDragMoved']\n            }] } });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass DragDropModule {\n}\nDragDropModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDropModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nDragDropModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDropModule, declarations: [CdkDropList,\n        CdkDropListGroup,\n        CdkDrag,\n        CdkDragHandle,\n        CdkDragPreview,\n        CdkDragPlaceholder], exports: [CdkScrollableModule,\n        CdkDropList,\n        CdkDropListGroup,\n        CdkDrag,\n        CdkDragHandle,\n        CdkDragPreview,\n        CdkDragPlaceholder] });\nDragDropModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDropModule, providers: [DragDrop], imports: [CdkScrollableModule] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"14.2.0\", ngImport: i0, type: DragDropModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [\n                        CdkDropList,\n                        CdkDropListGroup,\n                        CdkDrag,\n                        CdkDragHandle,\n                        CdkDragPreview,\n                        CdkDragPlaceholder,\n                    ],\n                    exports: [\n                        CdkScrollableModule,\n                        CdkDropList,\n                        CdkDropListGroup,\n                        CdkDrag,\n                        CdkDragHandle,\n                        CdkDragPreview,\n                        CdkDragPlaceholder,\n                    ],\n                    providers: [DragDrop],\n                }]\n        }] });\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CDK_DRAG_CONFIG, CDK_DRAG_HANDLE, CDK_DRAG_PARENT, CDK_DRAG_PLACEHOLDER, CDK_DRAG_PREVIEW, CDK_DROP_LIST, CDK_DROP_LIST_GROUP, CdkDrag, CdkDragHandle, CdkDragPlaceholder, CdkDragPreview, CdkDropList, CdkDropListGroup, DragDrop, DragDropModule, DragDropRegistry, DragRef, DropListRef, copyArrayItem, moveItemInArray, transferArrayItem };\n","<!-- REVIEW MODE -->\r\n<div *ngIf=\"activity.user_answers; else activeMode\" @fadeInOut>\r\n  <div class=\"dnd container\">\r\n    <div *ngFor=\"let option of activity.answers; let i = index\" class=\"row row-{{i}}\">\r\n      <div\r\n        class=\"dnd-box dnd-col-0 dnd-static px-3 py-2 col mr-1 font-weight-bold\"\r\n        *ngIf=\"activity.meta.activity_type === 'dnd-match'\"\r\n        [innerHtml]=\"dndMatchDataStatic[i]\"\r\n      >\r\n      </div>\r\n      <div\r\n        [innerHtml]=\"(activity.meta.activity_type === 'dnd-match') ? option.caption.sortable : option.caption\"\r\n        class=\"dnd-box px-3 py-2 col dnd-col-1\"\r\n        [ngClass]=\"(markOrder) ? (option.correct === i) ? 'dnd-correct' : 'dnd-wrong' : ''\"\r\n      >\r\n      </div>\r\n    </div>\r\n    <div class=\"mt-2\">\r\n      <span class=\"mr-2\">Order:</span>\r\n      <div class=\"btn-group btn-group-toggle\" (click)=\"orderButtons($event)\">\r\n        <!-- !!! NOTE: Name property is used in orderButtons function. -->\r\n        <button\r\n          class=\"btn btn-info btn-sm py-0 active\"\r\n          type=\"button\"\r\n          name=\"yours\"\r\n          aria-pressed=\"true\"\r\n          (click)=\"this.dndService.showUserOrder(activity)\"\r\n        >Yours</button>\r\n        <button\r\n          class=\"btn btn-info btn-sm py-0\"\r\n          type=\"button\"\r\n          name=\"correct\"\r\n          (click)=\"showCorrectOrder()\"\r\n        >Correct</button>\r\n        <button\r\n          class=\"btn btn-info btn-sm py-0\"\r\n          type=\"button\"\r\n          name=\"initial\"\r\n          (click)=\"showInitialOrder()\"\r\n        >Initial</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- ACTIVE MODE -->\r\n<ng-template #activeMode>\r\n  <div cdkDropList (cdkDropListDropped)=\"drop($event)\" class=\"dnd dnd-active container\" @fadeInOut>\r\n    <div *ngFor=\"let option of activity.answers; let i = index\" class=\"row row-{{i}}\">\r\n      <div\r\n        class=\"dnd-box dnd-col-0 dnd-static px-3 py-2 col mr-1 font-weight-bold\"\r\n        *ngIf=\"activity.meta.activity_type === 'dnd-match'\"\r\n        [innerHtml]=\"dndMatchDataStatic[i]\"\r\n      >\r\n      </div>\r\n      <div\r\n        class=\"dnd-box dnd-col-1 px-3 py-2 col\"\r\n        cdkDrag\r\n        [innerHtml]=\"(activity.meta.activity_type === 'dnd-match') ? option.caption.sortable : option.caption\"\r\n      >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core'\r\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop'\r\n\r\nimport { FadeInOut } from './../../../../../../core/animations/fade-in-out.animation'\r\nimport { Activity } from '../../models/activity.model'\r\nimport { DndService } from './dnd.service'\r\n\r\n@Component({\r\n  selector: 'app-dnd',\r\n  templateUrl: './dnd.component.html',\r\n  styleUrls: ['./dnd.component.scss'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class DndComponent implements OnInit{\r\n\r\n  @Input() activity: Activity\r\n  @Output() activityChange = new EventEmitter<Activity>() // Return updated DnD order to parent, i.e. activeModeComponent\r\n  markOrder = true // Colour highlight right and wrong placed items\r\n  dndMatchDataStatic: string[] = []\r\n\r\n  constructor(\r\n    public dndService: DndService\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    if (this.activity.meta.activity_type === 'dnd-match') {\r\n      // Break out static column's captions into dndMatchDataStatic.\r\n      // Prevents static column captions from following items moved in the sortable col.\r\n      this.activity.answers.forEach(answer => {\r\n        this.dndMatchDataStatic.push(answer.caption.static)\r\n      })\r\n    }\r\n    if (this.activity.user_answers) {\r\n      this.dndService.showUserOrder(this.activity)\r\n    }\r\n  }\r\n\r\n  drop(event: CdkDragDrop<Activity>) {\r\n    moveItemInArray(this.activity.answers, event.previousIndex, event.currentIndex)\r\n    this.activityChange.emit(this.activity)\r\n  }\r\n\r\n  showInitialOrder() {\r\n    this.activity.answers.sort((a,b)=>a.slot - b.slot) // Sort answers array by 'slot' property, ascending\r\n  }\r\n\r\n  showCorrectOrder() {\r\n    this.activity.answers.sort((a,b)=>a.correct - b.correct) // Sort answers array by 'correct' property, ascending\r\n  }\r\n\r\n  orderButtons($event){\r\n    // Toggles active button, and decides whether activity marking should be shown\r\n    let clickedElement = $event.target || $event.srcElement\r\n    this.markOrder = (clickedElement.name === 'yours') ? true : false;\r\n\r\n    if( clickedElement.nodeName === \"BUTTON\" ) {\r\n      let isCertainButtonAlreadyActive = clickedElement.parentElement.querySelector(\".active\");\r\n      // if a Button already has Class: .active\r\n      if( isCertainButtonAlreadyActive ) {\r\n        isCertainButtonAlreadyActive.classList.remove(\"active\");\r\n      }\r\n      clickedElement.className += \" active\";\r\n    }\r\n  }\r\n\r\n}\r\n","<!-- REVIEW MODE -->\r\n<div *ngIf=\"activity.user_answers; else activeMode\" @fadeInOut>\r\n  <div class=\"row\">\r\n    <div class=\"col\">\r\n      <ul class=\"clickActivity\">\r\n        <li\r\n          class=\"text-left px-3 clickFalse\"\r\n          *ngFor=\"let option of activity.answers; let i = index\"\r\n          [ngClass]=\"[markColours(option), checkIfCapsNeeded(i) ? 'text-capitalize' : '']\"\r\n          [innerHtml]=\"showLabel(option)\"\r\n        >\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  <div class=\"mt-2 row\">\r\n    <div class=\"col\">\r\n      <span class=\"mr-2\">Punctuation:</span>\r\n      <div class=\"btn-group btn-group-toggle\">\r\n\r\n      <!-- <div class=\"btn-group btn-group-toggle\" (click)=\"orderButtons($event)\"> -->\r\n        <!-- !!! NOTE: Name property is used in orderButtons function. -->\r\n        <button\r\n          class=\"btn btn-info btn-sm py-0 active\"\r\n          type=\"button\"\r\n          name=\"yours\"\r\n          aria-pressed=\"true\"\r\n          (click)=\"showMarking('user')\"\r\n        >Yours</button>\r\n        <button\r\n          class=\"btn btn-info btn-sm py-0\"\r\n          type=\"button\"\r\n          name=\"correct\"\r\n          (click)=\"showMarking('correct')\"\r\n        >Correct</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- ACTIVE MODE -->\r\n<ng-template #activeMode>\r\n  <div class=\"row\">\r\n    <div class=\"col\">\r\n      <ul class=\"clickActivity\">\r\n        <li\r\n          *ngFor=\"let option of activity.answers; let i = index\"\r\n          [ngClass]=\"activity.answers[i].selected ? 'clickSelected' : 'clickFalse'\"\r\n          >\r\n          <input\r\n            type=\"checkbox\"\r\n            [ngClass]=\"['d-none']\"\r\n            [id]=\"option.id\"\r\n            [value]=\"option.id\"\r\n            formControlName=\"answer\"\r\n            (click)=\"updateSelections(i, option.id)\"\r\n          >\r\n          <label\r\n            [innerHtml]=\"showLabel(option)\"\r\n            [for]=\"option.id\"\r\n            [ngClass]=\"checkIfCapsNeeded(i) ? 'text-capitalize' : ''\"\r\n            class=\"handy text-left px-3\"\r\n          ></label>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n","import { Component, OnInit, Input } from '@angular/core'\r\nimport { FadeInOut } from '../../../../../../core/animations/fade-in-out.animation'\r\nimport { ActivityAnswers } from '../../models/activity-answers.model'\r\nimport { Activity } from '../../models/activity.model'\r\nimport { ClickRotateService } from './click-rotate.service'\r\n\r\n@Component({\r\n  selector: 'app-click-rotate',\r\n  templateUrl: './click-rotate.component.html',\r\n  styleUrls: ['./click-rotate.component.scss'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class ClickRotateComponent implements OnInit {\r\n\r\n  @Input() activity: Activity\r\n  rotateItems = []\r\n  periodId: number\r\n  public colours: string\r\n  showMarkingType = \"user\"\r\n\r\n  constructor(\r\n    public clickRotateService: ClickRotateService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.clickRotateService.userSelections = (this.activity.user_answers) ? this.activity.user_answers : {}\r\n    this.rotateItems = JSON.parse(this.activity.assess_text)\r\n    // set id where puctuation mark is a period. used for setting text-capitalize class.\r\n    for (let y in this.rotateItems) {\r\n      if (this.rotateItems[y] === '.') {\r\n        this.periodId = parseInt(y)\r\n      }\r\n    }\r\n  }\r\n\r\n  updateSelections(i, aid) {\r\n    if (this.clickRotateService.userSelections[aid]) {\r\n      if (this.clickRotateService.userSelections[aid] == Object.keys(this.rotateItems).length) {\r\n        delete this.clickRotateService.userSelections[aid]\r\n        this.activity.answers[i].selected = false\r\n      } else {\r\n        this.clickRotateService.userSelections[aid]++\r\n      }\r\n    } else {\r\n      this.clickRotateService.userSelections[aid] = 1\r\n      this.activity.answers[i].selected = true\r\n    }\r\n  }\r\n\r\n  showLabel(option: ActivityAnswers) {\r\n    if (this.showMarkingType === 'user') {\r\n      return (this.clickRotateService.userSelections[option.id])\r\n        ? option.caption + this.rotateItems[this.clickRotateService.userSelections[option.id]]\r\n        : option.caption\r\n    } else {\r\n      return (option.correct === 0) ? option.caption : option.caption + this.rotateItems[option.correct]\r\n    }\r\n  }\r\n\r\n  checkIfCapsNeeded(i: number) {\r\n    if (i === 0) {\r\n      return false\r\n    } else {\r\n      let previousAnswer: ActivityAnswers = this.activity.answers[--i]\r\n      if (this.activity.user_answers) {\r\n        return (previousAnswer.correct === this.periodId) ? true : false\r\n      } else {\r\n        return (\r\n          this.clickRotateService.userSelections[previousAnswer.id] &&\r\n          this.clickRotateService.userSelections[previousAnswer.id] === this.periodId\r\n        ) ? true : false\r\n      }\r\n    }\r\n  }\r\n\r\n  markColours(answer: ActivityAnswers) {\r\n    if (this.showMarkingType === 'user') {\r\n      if (answer.correct !== 0 && !this.clickRotateService.userSelections[answer.id]) {\r\n        this.colours = 'clickMissed'\r\n      } else if (answer.correct !==0 && this.clickRotateService.userSelections[answer.id] == answer.correct) {\r\n        this.colours = 'clickCorrect'\r\n      } else if (\r\n        answer.correct !==0 && this.clickRotateService.userSelections[answer.id] != answer.correct\r\n      ||answer.correct ===0 && this.clickRotateService.userSelections[answer.id]\r\n      ) {\r\n        this.colours = 'clickWrong'\r\n      } else {\r\n        this.colours = 'clickFalse'\r\n      }\r\n    } else if (this.showMarkingType === 'correct') {\r\n      this.colours = (answer.correct !== 0) ? 'clickCorrect' : 'clickFalse'\r\n    }\r\n    return this.colours\r\n  }\r\n\r\n  showMarking(type: string) {\r\n    this.showMarkingType = (type === 'user') ? 'user' : 'correct'\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http'\r\nimport { Injectable } from '@angular/core'\r\n\r\n// WNGX services\r\nimport { ConfigService } from 'src/app/core/services/config/config.service'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DemoFlagService {\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private configService: ConfigService\r\n  ) { }\r\n\r\n  saveActivityDemoStatus(aid: number) {\r\n    this.httpClient.put<number>(\r\n      `${this.configService.params.api.route}/admin/publisher/course-editor/syllabus/${aid}/demo`, aid\r\n    ).subscribe(\r\n      (response) => { console.log(response) },\r\n      (err) => { console.log(err) }\r\n    )\r\n  }\r\n\r\n}\r\n","import { Component, Input } from '@angular/core'\r\nimport { DemoFlagService } from './demo-flag.service'\r\nimport { Activity } from '../../../activities/workarea/models/activity.model'\r\n\r\n@Component({\r\n  selector: 'app-demo-flag',\r\n  templateUrl: './demo-flag.component.html',\r\n  styleUrls: ['./demo-flag.component.sass']\r\n})\r\nexport class DemoFlagComponent {\r\n\r\n  @Input() firstActivity: Activity\r\n\r\n  constructor(\r\n    private demoFlagService: DemoFlagService\r\n  ) { }\r\n\r\n  activityDemoFlagToggle() {\r\n    this.demoFlagService.saveActivityDemoStatus(this.firstActivity.meta.activity_id)\r\n  }\r\n\r\n}\r\n","<div class=\"text-right text-secondary mr-5\">\r\n  <form #demoActivity=\"ngForm\">\r\n    <div class=\"form-check my-auto\">\r\n      <label class=\"form-check-label user-select-none font-weight-light\" for=\"demoActivityCheck\">\r\n        Make this <span class=\"font-weight-normal\">Activity Set<br></span>\r\n        part of a free <span class=\"font-weight-normal\">Demo Course</span>\r\n      </label>\r\n      <input\r\n        type=\"checkbox\"\r\n        class=\"form-check-input ml-3 mt-3\"\r\n        name=\"demoActivityCheck\"\r\n        id=\"demoActivityCheck\"\r\n        (ngModelChange)=\"activityDemoFlagToggle()\"\r\n        [ngModel]=\"firstActivity.meta.demo\"\r\n        >\r\n    </div>\r\n  </form>\r\n</div>\r\n","<div *ngIf=\"this.beforeAfter$ | async as beforeAfter\">\r\n  <p>Your before and after results for the pre and after course assessment are below.</p>\r\n  <table class=\"table table-striped table-sm\" style=\"max-width: 40rem;\">\r\n    <thead>\r\n      <tr>\r\n        <th scope=\"col\"></th>\r\n        <th scope=\"col\" class=\"text-center\">Correct</th>\r\n        <th scope=\"col\" class=\"text-center\">Wrong</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr>\r\n        <th scope=\"row\">Before</th>\r\n        <td class=\"text-center\">\r\n          <span class=\"text-success\">{{beforeAfter.before.correct}}</span>\r\n          <span class=\"text-dark\"> / {{beforeAfter.before.total}}</span>\r\n        </td>\r\n        <td class=\"text-center text-danger\">{{beforeAfter.before.wrong}}</td>\r\n      </tr>\r\n      <tr>\r\n        <th scope=\"row\">After</th>\r\n        <td class=\"text-center\">\r\n          <span class=\"text-success\">{{beforeAfter.after.correct}}</span>\r\n          <span class=\"text-dark\"> / {{beforeAfter.after.total}}</span>\r\n        </td>\r\n        <td class=\"text-center text-danger\">{{beforeAfter.after.wrong}}</td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { Observable } from 'rxjs'\r\n\r\n// WNGX imports\r\nimport { Activity } from '../../../models/activity.model'\r\nimport { ConfigService } from 'src/app/core/services/config/config.service'\r\nimport { faSpinner } from '@fortawesome/free-solid-svg-icons'\r\n\r\n@Component({\r\n  selector: 'app-before-and-after',\r\n  templateUrl: './before-and-after.component.html',\r\n  styleUrls: ['./before-and-after.component.sass']\r\n})\r\nexport class BeforeAndAfterComponent implements OnInit {\r\n\r\n  @Input() activity: Activity\r\n\r\n  faSpinner = faSpinner\r\n\r\n  public beforeAfter$: Observable<any>\r\n  public awaitingStats = false\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private configService: ConfigService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.beforeAfter$ = this.beforeAfter()\r\n  }\r\n\r\n  beforeAfter() {\r\n    return this.httpClient.get(this.url).pipe(data => data)\r\n  }\r\n\r\n  get url() {\r\n    return `${this.configService.params.api.route}/webcourse/activities/special/before-and-after/${this.activity.id}`\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http'\r\nimport { Injectable } from '@angular/core'\r\nimport { ConfigService } from 'src/app/core/services/config/config.service'\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class CompletionCertService {\r\n\r\n  public downloadCertificateLoading = false\r\n\r\n  constructor(\r\n    public selectedCourse: SelectedCourseService,\r\n    private httpClient: HttpClient,\r\n    private configService: ConfigService\r\n  ) { }\r\n\r\n  downloadCertificate(aid: number) {\r\n    this.downloadCertificateLoading = true\r\n\r\n    this.httpClient.get(\r\n      `${this.configService.params.api.route}/webcourse/activities/special/completion-cert/${aid}`,\r\n      {responseType: 'blob' as 'json'}\r\n    ).subscribe(\r\n      (response: any) => {\r\n        this.downloadCertificateLoading = false\r\n        const dataType = response.type\r\n        const binaryData = []\r\n        binaryData.push(response)\r\n        const downloadLink = document.createElement('a')\r\n        downloadLink.href = window.URL.createObjectURL(\r\n          new Blob(binaryData, {type: dataType})\r\n        )\r\n        const fileName = 'certificate.pdf'\r\n        if (fileName) {\r\n          downloadLink.setAttribute('download', fileName)\r\n        }\r\n        document.body.appendChild(downloadLink)\r\n        downloadLink.click()\r\n      },\r\n      (err) => {\r\n        console.log(err)\r\n      }\r\n    )\r\n\r\n  }\r\n}\r\n","<div id=\"completion-certificate\" class=\"text-center\">\r\n\r\n  <button class=\"btn btn-primary mt-1 mb-2\"\r\n    [disabled]=\"this.completionCertService.downloadCertificateLoading ? true : false\"\r\n    (click)=\"downloadCertificateBtn(activity.id)\"\r\n  >\r\n\r\n    <span *ngIf=\"!this.completionCertService.downloadCertificateLoading; else preparing\">\r\n      <fa-icon [icon]=\"faFileArrowDown\" class=\"mr-3\"></fa-icon>\r\n      Download <span class=\"small font-weight-light\">(PDF)</span>\r\n    </span>\r\n\r\n    <ng-template #preparing>\r\n      <fa-icon [icon]=\"faSpinner\" [spin]=\"true\" [pulse]=\"true\"></fa-icon>\r\n    </ng-template>\r\n  </button>\r\n\r\n</div>\r\n","import { Component, Input } from '@angular/core'\r\nimport { CompletionCertService } from './completion-cert.service'\r\nimport { faSpinner, faFileArrowDown } from '@fortawesome/free-solid-svg-icons'\r\nimport { Activity } from '../../../models/activity.model'\r\n\r\n@Component({\r\n  selector: 'app-completion-cert',\r\n  templateUrl: './completion-cert.component.html',\r\n  styleUrls: ['./completion-cert.component.scss']\r\n})\r\nexport class CompletionCertComponent {\r\n\r\n  @Input() activity: Activity\r\n\r\n  faSpinner = faSpinner\r\n  faFileArrowDown = faFileArrowDown\r\n\r\n  constructor(\r\n    public completionCertService: CompletionCertService\r\n  ) { }\r\n\r\n  downloadCertificateBtn(aid: number) {\r\n    this.completionCertService.downloadCertificate(aid)\r\n  }\r\n}\r\n","<app-before-and-after\r\n  *ngIf=\"activity.meta.style === 'before-and-after'\"\r\n  [activity]=\"activity\"\r\n></app-before-and-after>\r\n\r\n<app-completion-cert\r\n  *ngIf=\"activity.meta.style === 'completion-cert'\"\r\n  [activity]=\"activity\"\r\n></app-completion-cert>\r\n","import { Component, OnInit, Input } from '@angular/core'\r\nimport { Activity } from '../../models/activity.model'\r\n\r\n@Component({\r\n  selector: 'app-special-activity',\r\n  templateUrl: './special-activity.component.html',\r\n  styleUrls: ['./special-activity.component.sass']\r\n})\r\nexport class SpecialActivityComponent implements OnInit {\r\n\r\n  @Input() activity: Activity\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","import { HttpClient } from '@angular/common/http'\r\nimport { Injectable } from '@angular/core'\r\nimport { ConfigService } from 'src/app/core/services/config/config.service'\r\nimport { Bookmark } from './bookmark.model'\r\nimport { BehaviorSubject, Observable, Subject } from 'rxjs'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BookmarksService {\r\n\r\n  public bookmarksSubject: BehaviorSubject<any[]> = new BehaviorSubject([])\r\n  public bookmarks$: Observable<Bookmark[]> = this.bookmarksSubject.asObservable()\r\n  public deletedBookmarkAid$ = new Subject<number>\r\n\r\n  public selectedBookmark: Bookmark[]\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private configService: ConfigService\r\n  ) { }\r\n\r\n  getBookmarks(cid: number) {\r\n    this.httpClient.get<Bookmark[]>(\r\n      `${this.configService.params.api.route}/webcourse/activities/bookmarks?cid=${cid}`\r\n    ).subscribe(\r\n      (bookmarks) => {\r\n        this.bookmarksSubject.next(bookmarks)\r\n      }\r\n    )\r\n  }\r\n\r\n  deleteBookmark(aid: number): Observable<any> {\r\n    return this.httpClient.delete(\r\n      `${this.configService.params.api.route}/webcourse/activities/bookmarks/${aid}`\r\n    )\r\n  }\r\n\r\n  addBookmark(aid: number): Observable<any> {\r\n    return this.httpClient.post(\r\n      `${this.configService.params.api.route}/webcourse/activities/bookmarks`, {aid: aid}\r\n    )\r\n  }\r\n}\r\n","<div role=\"button\" class=\"my-3 text-dark text-uppercase\">\r\n  <div *ngIf=\"!firstActivity.bookmark\" (click)=\"addBookmarkBtn()\">\r\n    <i class=\"fa-regular fa-bookmark\"></i>\r\n    <span class=\"ml-2\">Bookmark</span>\r\n  </div>\r\n\r\n  <div *ngIf=\"firstActivity.bookmark\" (click)=\"deleteBookmarkBtn()\">\r\n    <i class=\"fa-solid fa-bookmark text-primary\"></i>\r\n    <span class=\"ml-2\">Bookmarked</span>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit, OnDestroy } from '@angular/core'\r\nimport { Subscription } from 'rxjs'\r\n\r\n// WNGX imports\r\nimport { BookmarksService } from 'src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmarks.service'\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { Activity } from 'src/app/pages/webcourse/activities/workarea/models/activity.model'\r\nimport { Bookmark } from 'src/app/pages/webcourse/activities/sidebar/tabs/student/bookmarks/bookmark.model'\r\n\r\n@Component({\r\n  selector: 'app-bookmark-button',\r\n  templateUrl: './bookmark-button.component.html',\r\n  styleUrls: ['./bookmark-button.component.scss']\r\n})\r\n\r\nexport class BookmarkButtonComponent implements OnInit, OnDestroy {\r\n\r\n  @Input() firstActivity: Activity\r\n  private sub: Subscription\r\n\r\n  constructor(\r\n    public bookmarksService: BookmarksService,\r\n    public selectedCourseService: SelectedCourseService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.sub = this.bookmarksService.deletedBookmarkAid$.subscribe(\r\n      (aid) => {\r\n        if (this.firstActivity.meta.activity_id === aid) {\r\n          this.firstActivity.bookmark = null\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  deleteBookmarkBtn(): void {\r\n    this.bookmarksService.deleteBookmark(\r\n      this.firstActivity.meta.activity_id\r\n    ).subscribe( () => {\r\n        this.firstActivity.bookmark = null\r\n        this.updateSidebarBookmarksTabOnDelete(this.existingBookmarks)\r\n    })\r\n  }\r\n\r\n  addBookmarkBtn(): void {\r\n    this.bookmarksService.addBookmark(\r\n      this.firstActivity.meta.activity_id\r\n    ).subscribe(\r\n      (bookmark) => {\r\n        this.firstActivity.bookmark = bookmark\r\n        this.updateSidebarBookmarksTabOnAdd(bookmark)\r\n      }\r\n    )\r\n  }\r\n\r\n  updateSidebarBookmarksTabOnAdd(bookmark: Bookmark): void {\r\n    this.bookmarksService.bookmarksSubject.next(\r\n      [...this.existingBookmarks, bookmark]\r\n    )\r\n  }\r\n\r\n  updateSidebarBookmarksTabOnDelete(existingBookmarks: Bookmark[]): void {\r\n    let i = existingBookmarks.findIndex( bookmark => {\r\n      // For nice fade effects on delete, bookmarks.delete = true is set instead true delete.\r\n      // When user clicks bookmark tab repeatedly, the same bookmark will be present multiple times.\r\n      // The if !bookmark.deleted ensures findIndex finds the active bookmark\r\n      if (!bookmark.deleted) {\r\n        return bookmark.aid === this.firstActivity.meta.activity_id\r\n      }\r\n    })\r\n\r\n    // If no matching bookmark is found, i will be -1\r\n    if (i !== -1) {\r\n      existingBookmarks[i].deleted = true\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub.unsubscribe()\r\n  }\r\n\r\n  get existingBookmarks() {\r\n    return this.bookmarksService.bookmarksSubject.value\r\n  }\r\n}\r\n","<div class=\"text-center eoch-container\" @fadeInOut>\r\n  <p class=\"font-weight-bold\">End of chapter.</p>\r\n\r\n  <div *ngIf=\"this.courseChapterIndexService.nextChapter as nc\" class=\"next-chapter\" @fadeInOut>\r\n    <p class=\"h5 next-chapter-label\">Next Chapter</p>\r\n    <p class=\"h4\" [innerHtml]=\"nc.label\"></p>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core'\r\n\r\n// WNGX imports\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { FadeInOut } from 'src/app/core/animations/fade-in-out.animation'\r\nimport { CourseChapterIndexService } from 'src/app/core/services/course-chapter-index/course-chapter-index.service'\r\n\r\n@Component({\r\n  selector: 'app-chapter-end',\r\n  templateUrl: './chapter-end.component.html',\r\n  styleUrls: ['./chapter-end.component.scss'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class ChapterEndComponent {\r\n\r\n  constructor(\r\n    public courseChapterIndexService: CourseChapterIndexService,\r\n    public selectedCourseService: SelectedCourseService,\r\n  ) { }\r\n\r\n}\r\n","import { Component } from '@angular/core'\r\n\r\n// WNGX models and misc\r\nimport { FadeInOut } from '../../../../../../core/animations/fade-in-out.animation'\r\n\r\n@Component({\r\n  selector: 'app-course-end',\r\n  templateUrl: './course-end.component.html',\r\n  styleUrls: ['./course-end.component.scss'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class CourseEndComponent {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<div class=\"text-center eoc-container\" @fadeInOut>\r\n  <p class=\"text-uppercase font-weight-bold\">Congratulations!</p>\r\n  <p>You've completed the course.</p>\r\n</div>\r\n","<app-chapter-end *ngIf=\"this.webcourseService.endOfChapter\"></app-chapter-end>\r\n<app-course-end *ngIf=\"this.webcourseService.endOfCourse && !this.webcourseService.endOfChapter\"></app-course-end>\r\n\r\n<div *ngIf=\"!this.webcourseService.endOfChapter && !this.webcourseService.endOfCourse\">\r\n\r\n  <div class=\"container pb-3\">\r\n    <div\r\n      *ngIf=\"this.selectedCourseService.selectedActivitySet$ | async as activitySet\"\r\n      class=\"row justify-content-between my-3\"\r\n    >\r\n      <div class=\"col\">\r\n        <app-bookmark-button [firstActivity]=\"activitySet[0]\"></app-bookmark-button>\r\n      </div>\r\n      <div class=\"col\">\r\n        <!-- \"Make activity part of demo\" checkbox (publishers only)  -->\r\n        <div *ngIf=\"this.selectedCourseService.selectedCourse as selectedCourse\">\r\n          <app-demo-flag\r\n            [firstActivity]=\"activitySet[0]\"\r\n            *ngIf=\"selectedCourse.publisher.owner_uid === this.userService.user.id\"\r\n          ></app-demo-flag>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"container\" *ngIf=\"this.activitiesService.activities\" id=\"workarea-activities\">\r\n\r\n    <div *ngFor=\"let activity of this.activitiesService.activities\" class=\"row activity mt-4\" @fadeInOut>\r\n\r\n      <div\r\n        [id]=\"'activity' + activity.meta.activity_id\"\r\n        [ngClass]=\"(activity.user_answers) ? 'reviewModeActivity' : 'activeModeActivity'\"\r\n        class=\"col\"\r\n      >\r\n\r\n        <!--!!!!!!!!!!!!!!!\r\n            ngIf is required on activity.* so 'Fringe' browser doesn't show nulls\r\n            !!!!!!!!!!!!!!! -->\r\n\r\n        <div *ngIf=\"activity.prequestion\" [innerHTML]=\"activity.prequestion | safehtml: 'html'\" class=\"prequestion mb-3\"></div>\r\n        <div *ngIf=\"activity.question\" [innerHTML]=\"activity.question | safehtml: 'html'\" class=\"question mb-3 mt-4 h5\"></div>\r\n        <!-- click2 type's assess-text holds punctuation mark data in json format -->\r\n        <div\r\n          *ngIf=\"activity.assess_text && activity.meta.activity_type != 'click2' && activity.meta.activity_type != 'click'\"\r\n          [innerHtml]=\"activity.assess_text | safehtml: 'html'\"\r\n          class=\"assess_text mb-4\"\r\n        ></div>\r\n\r\n        <div *ngIf=\"\r\n          activity.meta.activity_type === 'dnd' ||\r\n          activity.meta.activity_type === 'dnd-match' ||\r\n          activity.meta.activity_type === 'click2';\r\n          else bulkActivities\r\n        \">\r\n          <app-dnd *ngIf=\"activity.meta.activity_type === 'dnd'  || activity.meta.activity_type === 'dnd-match'\" [activity]=\"activity\"></app-dnd>\r\n          <app-click-rotate *ngIf=\"activity.meta.activity_type === 'click2'\" [activity]=\"activity\"></app-click-rotate>\r\n        </div>\r\n\r\n        <ng-template #bulkActivities>\r\n          <app-review-mode *ngIf=\"activity.user_answers\" [activity]=\"activity\"></app-review-mode>\r\n          <app-active-mode *ngIf=\"!activity.user_answers\" [activity]=\"activity\"></app-active-mode>\r\n        </ng-template>\r\n\r\n        <app-special-activity *ngIf=\"activity.meta.activity_type === 'special'\" [activity]=\"activity\"></app-special-activity>\r\n\r\n        <div class=\"after_word alert alert-primary mt-4\"\r\n          *ngIf=\"activity.after_word\"\r\n          [innerHTML]=\"activity.after_word | safehtml: 'html'\"\r\n          @fadeInOut\r\n          >\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n\r\n<nav class=\"fixed-bottom d-print-none\" id=\"activity-nav-bar\">\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-5 d-none d-lg-block\">\r\n        <!-- This area is hidden under the activity sidebar -->\r\n      </div>\r\n      <div class=\"col-lg-7 my-auto\">\r\n\r\n        <div class=\"container-fluid\">\r\n          <div class=\"row justify-content-between\">\r\n            <div class=\"col-auto my-auto\">\r\n              <div class=\"handy\" (click)=\"printButton()\">\r\n                <fa-icon [icon]=\"faPrint\" class=\"text-secondary mx-2\"></fa-icon>\r\n                <span class=\"text-dark h6\">Print</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-auto my-auto text-center\">\r\n              <fa-icon [icon]=\"faSpinner\" [spin]=\"true\" [pulse]=\"true\" class=\"ml-2 mr-1 text-dark fa-fade\" size=\"2x\" *ngIf=\"this.webcourseService.waitingForApi\"></fa-icon>\r\n            </div>\r\n            <div class=\"col-auto\">\r\n              <div class=\"my-2\">\r\n                <app-nav class=\"my-2\"></app-nav>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nav>\r\n","import { Component } from '@angular/core'\r\nimport { faPrint, faSpinner } from '@fortawesome/free-solid-svg-icons'\r\n\r\n// WNGX services\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { UserService } from 'src/app/core/services/user/user.service'\r\nimport { WebcourseService } from '../../webcourse.service'\r\nimport { ActivitiesService } from '../activities.service'\r\n\r\n//WNGX models and misc\r\nimport { FadeInOut } from './../../../../core/animations/fade-in-out.animation'\r\n\r\n\r\n@Component({\r\n  selector: 'app-workarea',\r\n  templateUrl: './workarea.component.html',\r\n  styleUrls: ['./workarea.component.scss'],\r\n  animations: [FadeInOut]\r\n})\r\n\r\nexport class WorkAreaComponent {\r\n\r\n  public faPrint = faPrint\r\n  public faSpinner = faSpinner\r\n\r\n  constructor(\r\n    public selectedCourseService: SelectedCourseService,\r\n    public userService: UserService,\r\n    public webcourseService: WebcourseService,\r\n    public activitiesService: ActivitiesService\r\n  ) {}\r\n\r\n  printButton() {\r\n    window.print()\r\n  }\r\n}\r\n","<!-- Displays an hotlinked array of chapter activity bars on progress, chapter index tabs -->\r\n\r\n<div class=\"mb-4\">\r\n  <div\r\n    *ngFor=\"let activityMeta of chapter.syllabus\"\r\n    class=\"default-activity-bar\"\r\n    [ngClass]=\"lockStatusClass(activityMeta)\"\r\n    [ngStyle]=\"{'max-width.%': this.maxWidthPercent / chapter.syllabus.length}\"\r\n    (click)=\"activityBarClick(activityMeta)\"\r\n    >\r\n  </div>\r\n</div>\r\n","import { Component, Input } from '@angular/core'\r\n\r\n// WNGX services\r\nimport { UserService } from 'src/app/core/services/user/user.service'\r\nimport { CompletionStatsService } from 'src/app/core/services/user/completion-stats.service'\r\nimport { NavService } from '../../../workarea/nav/nav.service'\r\n\r\n// WNGX models and misc\r\nimport { ActivityMeta } from '../../../workarea/models/activity-meta.model'\r\nimport { Chapter } from 'src/app/pages/webcourse/activities/models/chapter.model'\r\n\r\n@Component({\r\n  selector: 'app-activities-bar',\r\n  templateUrl: './activities-bar.component.html',\r\n  styleUrls: ['./activities-bar.component.scss']\r\n})\r\nexport class ActivitiesBarComponent {\r\n\r\n  @Input() chapter: Chapter\r\n  maxWidthPercent = 94\r\n\r\n  constructor(\r\n    public completionStatsService: CompletionStatsService,\r\n    public user: UserService,\r\n    private navService: NavService\r\n  ) { }\r\n\r\n  activityBarClick(activityMeta: ActivityMeta) {\r\n    if (activityMeta.seq <= this.tac) {\r\n      this.navService.NavigateByAid(activityMeta.activity_id)\r\n    }\r\n  }\r\n\r\n  lockStatusClass(activityMeta: ActivityMeta) {\r\n    return (activityMeta.seq <= this.tac) ? 'unlocked' : 'locked'\r\n  }\r\n\r\n  get tac() {\r\n    return this.completionStatsService.totalActivitiesCompleted\r\n  }\r\n\r\n}\r\n","<div id=\"progress-tab\" class=\"px-4 mt-3\">\r\n\r\n  <div *ngIf=\"this.selectedCourseService.selectedCourse as selectedCourse; else loading\">\r\n    <div class=\"container-fluid my-3\" [@FadeInOut2]=\"selectedCourse\">\r\n      <div class=\"row\">\r\n        <div class=\"col mt-3\">\r\n          <p class=\"h5 mb-0 primary-text\" [innerHtml]=\"selectedCourse.title\"></p>\r\n          <small class=\"text-uppercase main-label primary-text\">Course with {{selectedCourse.total_activities}} activities</small>\r\n          <div class=\"mt-2\" id=\"courseProgress\">\r\n            <ngb-progressbar\r\n              [value]=\"this.completionStatsService.totalActivitiesCompleted / selectedCourse.total_activities * 100\"\r\n              height=\"3px\"\r\n            ></ngb-progressbar>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"this.courseChapterIndexService.selectedChapter as selectedChapter; else loading\">\r\n    <div class=\"container-fluid my-3\" [@FadeInOut2]=\"selectedChapter\">\r\n      <div class=\"row\">\r\n        <div class=\"col mt-3\">\r\n          <p class=\"h5 mb-0 primary-text\">{{ selectedChapter.label }}</p>\r\n          <small class=\"text-uppercase main-label primary-text\">Chapter with {{ selectedChapter.syllabus.length }} activities</small>\r\n          <app-activities-bar [chapter]=\"selectedChapter\"></app-activities-bar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <ng-template #loading>\r\n    <div class=\"mt-5\">\r\n      <app-loading-spinner></app-loading-spinner>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import { Component } from '@angular/core'\r\n\r\n// WNGX imports\r\nimport { CompletionStatsService } from 'src/app/core/services/user/completion-stats.service'\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { CourseChapterIndexService } from 'src/app/core/services/course-chapter-index/course-chapter-index.service'\r\nimport { FadeInOut2 } from 'src/app/core/animations/fade-in-out-2.animation'\r\n\r\n@Component({\r\n  selector: 'app-selected',\r\n  templateUrl: './selected.component.html',\r\n  styleUrls: ['./selected.component.scss'],\r\n  animations: [FadeInOut2]\r\n})\r\nexport class SelectedComponent {\r\n\r\n  constructor(\r\n    public completionStatsService: CompletionStatsService,\r\n    public courseChapterIndexService: CourseChapterIndexService,\r\n    public selectedCourseService: SelectedCourseService\r\n  ) { }\r\n\r\n}\r\n","<div\r\n  id=\"chapter-index-tab\"\r\n  class=\"px-4\"\r\n  *ngIf=\"this.courseChapterIndexService.selectedCourseChapters as chapterIndex; else loading\"\r\n  @fadeInOut\r\n  >\r\n  <div class=\"container-fluid my-3\">\r\n    <div class=\"row\">\r\n      <div class=\"col mt-3\">\r\n        <ol class=\"list-unstyled\">\r\n          <li *ngFor=\"let chapter of chapterIndex, let chapterNumber = index\" class=\"h5 font-weight-normal\">\r\n\r\n            <div *ngIf=\"chapterUnlock(chapterIndex, chapterNumber); else lockedChapter\">\r\n              <a (click)=\"this.navService.NavigateByAid(chapter.syllabus[0].activity_id)\" class=\"handy\">\r\n                {{chapter.label}}\r\n              </a>\r\n            </div>\r\n            <ng-template #lockedChapter>\r\n              <div class=\"primary-text\">\r\n                {{chapter.label}}\r\n              </div>\r\n            </ng-template>\r\n\r\n            <app-activities-bar [chapter]=\"chapter\"></app-activities-bar>\r\n\r\n          </li>\r\n        </ol>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #loading>\r\n  <div class=\"mt-5\">\r\n    <app-loading-spinner></app-loading-spinner>\r\n  </div>\r\n</ng-template>\r\n","import { Component } from '@angular/core'\r\n\r\n// WNGX services\r\nimport { CompletionStatsService } from 'src/app/core/services/user/completion-stats.service'\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { CourseChapterIndexService } from 'src/app/core/services/course-chapter-index/course-chapter-index.service'\r\nimport { WebcourseService } from '../../../../../webcourse.service'\r\n\r\n// WNGX models and misc\r\nimport { Chapter } from '../../../../models/chapter.model'\r\nimport { FadeInOut } from 'src/app/core/animations/fade-in-out.animation'\r\nimport { NavService } from '../../../../workarea/nav/nav.service'\r\n\r\n@Component({\r\n  selector: 'app-chapter-index',\r\n  templateUrl: './chapter-index.component.html',\r\n  styleUrls: ['./chapter-index.component.scss'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class ChapterIndexComponent {\r\n\r\n  constructor(\r\n    public selectedCourseService: SelectedCourseService,\r\n    public courseChapterIndexService: CourseChapterIndexService,\r\n    private completionStatsService: CompletionStatsService,\r\n    public webcourseService: WebcourseService,\r\n    public navService: NavService\r\n  ) { }\r\n\r\n  chapterUnlock(chapterIndex: Chapter[], chapterNumber: number) {\r\n    let seq = chapterIndex[chapterNumber].syllabus[0].seq\r\n    return (seq <= this.completionStatsService.totalActivitiesCompleted) ? true : false\r\n  }\r\n}\r\n","<div id=\"publisher-info-tab\" class=\"px-4\"\r\n  *ngIf=\"this.selectedCourseService.selectedCourse as sc; else loading\"\r\n  @fadeInOut\r\n  >\r\n\r\n  <div class=\"container-fluid my-3\">\r\n\r\n    <!-- Publisher Name -->\r\n    <div class=\"row\">\r\n      <div class=\"col mt-3 h5 primary-text\" [innerHtml]=\"sc.publisher.name\"></div>\r\n    </div>\r\n\r\n    <!-- Contact and email address -->\r\n    <div class=\"row py-2\">\r\n      <div class=\"col-1 mx-auto\">\r\n        <fa-icon [icon]=\"faEnvelope\" class=\"primary-text\"></fa-icon>\r\n      </div>\r\n      <div class=\"col\">\r\n        <div class=\"primary-text\">\r\n          {{ sc.publisher.contact_fname }}\r\n          {{ sc.publisher.contact_lname }}\r\n        </div>\r\n        <a target=\"_blank\"\r\n          [href]=\"'mailto:' + sc.publisher.contact_email\"\r\n          *ngIf=\"sc.publisher.contact_email\"\r\n          >\r\n          {{ sc.publisher.contact_email }}\r\n        </a>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Hotlinked website address -->\r\n    <div class=\"row py-2\" *ngIf=\"sc.publisher.website\">\r\n      <div class=\"col-1 mx-auto\"><fa-icon [icon]=\"faGlobe\" class=\"primary-text\"></fa-icon></div>\r\n      <div class=\"col\">\r\n        <div class=\"primary-text\">Website</div>\r\n        <a target=\"_blank\" [href]=\"sc.publisher.website\">\r\n          {{ sc.publisher.website.replace('https://', '')}}\r\n        </a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n\r\n<ng-template #loading>\r\n  <div class=\"mt-5\">\r\n    <app-loading-spinner></app-loading-spinner>\r\n  </div>\r\n</ng-template>\r\n","import { faGlobe, faEnvelope } from '@fortawesome/free-solid-svg-icons'\r\nimport { Component } from '@angular/core'\r\n\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { FadeInOut } from '../../../../../../../core/animations/fade-in-out.animation'\r\n\r\n@Component({\r\n  selector: 'app-publisher-info',\r\n  templateUrl: './publisher-info.component.html',\r\n  styleUrls: ['./publisher-info.component.sass'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class PublisherInfoComponent {\r\n\r\n  faGlobe = faGlobe\r\n  faEnvelope = faEnvelope\r\n\r\n  constructor(\r\n    public selectedCourseService: SelectedCourseService\r\n  ) { }\r\n\r\n}\r\n","<div\r\n  id=\"bookmarks-tab\"\r\n  class=\"px-4\"\r\n  @fadeInOut\r\n>\r\n  <div class=\"container-fluid my-3\">\r\n    <div class=\"row\">\r\n      <div class=\"col h5 mt-3\">\r\n        Bookmarks\r\n      </div>\r\n    </div>\r\n    <div\r\n      *ngFor=\"let bookmark of this.bookmarksService.bookmarks$ | async\"\r\n      class=\"bookmark\"\r\n      [ngClass]=\"'bookmark-id-' + bookmark.id\"\r\n      [@fadeInOut]=\"'fadeInOut'\"\r\n    >\r\n      <div\r\n        class=\"row border rounded bg-light my-3 p-2 shadow-sm\"\r\n        *ngIf=\"!bookmark.deleted\"\r\n        [@fadeInOut]=\"'fadeInOut'\"\r\n      >\r\n        <div class=\"col text-dark text-truncate\">\r\n          <div class=\"container-fluid\">\r\n            <div\r\n              class=\"row lead text-truncate\"\r\n              role=\"button\"\r\n              (click)=\"this.loadBookmarkedActivity(bookmark.aid)\"\r\n            >\r\n              {{ bookmark.label }}\r\n            </div>\r\n            <div class=\"row text-secondary text-uppercase\">\r\n              <div class=\"col p-0\">\r\n                <small>{{ bookmark.created_at | date:'hh:mm, MMM d, y' }}</small>\r\n              </div>\r\n              <div class=\"col-auto text-right p-0\">\r\n                <small>Activity #{{bookmark.aid}}</small>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-auto my-auto\">\r\n          <i\r\n            role=\"button\"\r\n            class=\"fa-solid fa-trash fa-lg text-right text-secondary\"\r\n            (click)=\"this.deleteBookmarkBtn(bookmark)\"\r\n          ></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row my-2\">\r\n      <div class=\"col primary-text lead\">\r\n        Click the <i class=\"fa-regular fa-bookmark mx-1\"></i>\r\n        icon at the top of any activity set to add a bookmark.\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core'\r\nimport { Router } from '@angular/router'\r\n\r\nimport { BookmarksService } from './bookmarks.service'\r\nimport { FadeInOut } from 'src/app/core/animations/fade-in-out.animation'\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\nimport { Bookmark } from './bookmark.model'\r\n\r\n@Component({\r\n  selector: 'app-bookmarks',\r\n  templateUrl: './bookmarks.component.html',\r\n  styleUrls: ['./bookmarks.component.sass'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class BookmarksComponent {\r\n\r\n  constructor(\r\n    public bookmarksService: BookmarksService,\r\n    private selectedCourseService: SelectedCourseService,\r\n    private router: Router\r\n  ) {\r\n    this.bookmarksService.getBookmarks(\r\n      this.selectedCourseService.selectedCourse.id\r\n    )\r\n  }\r\n\r\n  loadBookmarkedActivity(aid: number) {\r\n    this.router.navigateByUrl(`/webcourse/activities/${aid}`)\r\n  }\r\n\r\n  deleteBookmarkBtn(bookmark: Bookmark) {\r\n    bookmark.deleted = true\r\n    this.bookmarksService.deleteBookmark(bookmark.aid).subscribe(\r\n      () => {\r\n        this.bookmarksService.deletedBookmarkAid$.next(bookmark.aid)\r\n      }\r\n    )\r\n  }\r\n\r\n}\r\n","<div\r\n  *ngIf=\"(activityHelp$ | async) as activityHelp; else loading\"\r\n  id=\"activity-help-tab\" class=\"px-4\"\r\n  @fadeInOut\r\n  >\r\n  <div class=\"container-fluid my-3\">\r\n    <div class=\"row\">\r\n      <div class=\"col mt-3 primary-text\">\r\n        <div class=\"h5\">Activity Help</div>\r\n        <div [innerHtml]=\"activityHelp.help\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #loading>\r\n  <div class=\"mt-5\">\r\n    <app-loading-spinner></app-loading-spinner>\r\n  </div>\r\n</ng-template>\r\n","import { Component, OnInit } from '@angular/core'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { BehaviorSubject } from 'rxjs'\r\nimport { shareReplay } from 'rxjs/operators'\r\n\r\n// WNGX Services\r\nimport { ConfigService } from '../../../../../../../core/services/config/config.service'\r\nimport { SelectedCourseService } from 'src/app/core/services/selected-course/selected-course.service'\r\n\r\n// WNGX Models and Misc\r\nimport { Activity } from '../../../../workarea/models/activity.model'\r\nimport { FadeInOut } from '../../../../../../../core/animations/fade-in-out.animation'\r\nimport { ActivityHelp } from './activity-help.model'\r\n\r\n@Component({\r\n  selector: 'app-activity-help',\r\n  templateUrl: './activity-help.component.html',\r\n  styleUrls: ['./activity-help.component.sass'],\r\n  animations: [FadeInOut]\r\n})\r\nexport class ActivityHelpComponent implements OnInit {\r\n\r\n  public activityHelp$ = new BehaviorSubject<ActivityHelp | null>(null)\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private configService: ConfigService,\r\n    private selectedCourseService: SelectedCourseService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.selectedCourseService.selectedActivitySet$.subscribe(\r\n      (activities: Activity[]) => {\r\n        this.getActivityHelp(activities[activities.length - 1].meta.activity_type).subscribe(\r\n          (help: ActivityHelp) => { this.activityHelp$.next(help) }\r\n        )\r\n      }\r\n    )\r\n  }\r\n\r\n  getActivityHelp(type: string) {\r\n    return this.httpClient.get<ActivityHelp>(\r\n      `${this.configService.params.api.route}/webcourse/activities/help/${type}`\r\n    ).pipe(shareReplay(1))\r\n  }\r\n\r\n}\r\n","<!--\n  Combo of none/block classes supports up to six icons on most resolutions,\n  with a likely exception for widths of ~1200 through 1250px.\n  At xs, despite being full width, screen is too small for labels.\n  At sm & md, menu is full width, with room for labels.\n  At lg the sidebar appears, the menu now spanning only its width:\n  No room for labels until xl.\n-->\n\n<div id=\"activity-menu\" class=\"py-2 container-fluid shadow-sm\">\n  <ul ngbNav #nav=\"ngbNav\" class=\"nav-pills\" id=\"menu\">\n    <li ngbNavItem>\n      <a ngbNavLink (click)=\"this.activitiesService.showSideMenu = true\">\n        <i class=\"fa-sharp fa-solid fa-user-graduate fa-lg d-block text-center my-2\"></i>\n\n        <div class=\"d-none d-sm-block d-lg-none d-xl-block mt-1 text-uppercase activity-menu-label\">\n          <small>Progress</small>\n        </div>\n      </a>\n      <ng-template ngbNavContent>\n        <app-selected></app-selected>\n      </ng-template>\n    </li>\n\n    <li ngbNavItem>\n      <a ngbNavLink (click)=\"this.activitiesService.showSideMenu = true\">\n        <i class=\"fa-sharp fa-solid fa-list fa-lg d-block text-center my-2\"></i>\n        <div class=\"d-none d-sm-block d-lg-none d-xl-block mt-1 text-uppercase activity-menu-label\">\n          <small>Index</small>\n        </div>\n      </a>\n      <ng-template ngbNavContent>\n        <app-chapter-index></app-chapter-index>\n      </ng-template>\n    </li>\n\n    <li ngbNavItem>\n      <a ngbNavLink (click)=\"this.activitiesService.showSideMenu = true\">\n        <i class=\"fa-sharp fa-solid fa-leaf fa-lg d-block text-center my-2\"></i>\n        <div class=\"d-none d-sm-block d-lg-none d-xl-block mt-1 text-uppercase activity-menu-label\">\n          <small>Publisher</small>\n        </div>\n      </a>\n      <ng-template ngbNavContent>\n        <app-publisher-info></app-publisher-info>\n      </ng-template>\n    </li>\n\n    <li ngbNavItem>\n      <a ngbNavLink (click)=\"this.activitiesService.showSideMenu = true\">\n        <i class=\"fa-sharp fa-solid fa-book-bookmark fa-lg d-block text-center my-2\"></i>\n        <div class=\"d-none d-sm-block d-lg-none d-xl-block mt-1 text-uppercase activity-menu-label\">\n          <small>Bookmarks</small>\n        </div>\n      </a>\n      <ng-template ngbNavContent>\n        <app-bookmarks></app-bookmarks>\n      </ng-template>\n    </li>\n\n    <li ngbNavItem>\n      <a ngbNavLink (click)=\"this.activitiesService.showSideMenu = true\">\n        <i class=\"fa-sharp fa-solid fa-question-circle fa-lg d-block text-center my-2\"></i>\n        <div class=\"d-none d-sm-block d-lg-none d-xl-block mt-1 text-uppercase activity-menu-label\">\n          <small>Help</small>\n        </div>\n      </a>\n      <ng-template ngbNavContent>\n        <app-activity-help></app-activity-help>\n      </ng-template>\n    </li>\n\n    <!--\n    <li ngbNavItem>\n      <a ngbNavLink>\n        <fa-icon [icon]=\"faInfoCircle\" size=\"lg\" class=\"d-block text-center\"></fa-icon>\n        <div class=\"d-none d-sm-block d-lg-none d-xl-block mt-1 text-uppercase activity-menu-label\">\n          <small>About</small>\n        </div>\n      </a>\n      <ng-template ngbNavContent>\n        <p class=\"mt-3 px-4\">Course Enrol / Welcome message is visible here. The user initially sees it\n        full screen when entering an access code. Later they can come back to it here.</p>\n      </ng-template>\n    </li>\n    -->\n  </ul>\n</div>\n\n<div id=\"activity-menu-outlet\">\n  <div *ngIf=\"this.activitiesService.showSideMenu\" [ngbNavOutlet]=\"nav\"></div>\n</div>\n","import { Component } from '@angular/core'\n\n// WNGX imports\nimport { ActivitiesService } from '../../../activities.service'\n\n@Component({\n  selector: 'wngx-student-menu',\n  templateUrl: './student-menu.component.html',\n  styleUrls: ['./../menu.component.scss']\n})\nexport class StudentMenuComponent {\n\n  constructor(\n    public activitiesService: ActivitiesService\n  ) {}\n\n}\n","<div class=\"container-fluid\" id=\"activities-global\">\r\n  <div class=\"row\">\r\n    <div class=\"col-lg-5 px-0 sticky-top d-print-none\" style=\"background-color: transparent;\">\r\n\r\n      <wngx-student-menu *ngIf=\"!this.webcourseService.builderMode\"></wngx-student-menu>\r\n\r\n      <!-- Roll-up button for hiding ngbNavOutlet. Displayed when sidebar is hidden due to lack of space. -->\r\n      <div class=\"d-lg-none\">\r\n        <div class=\"border-top border-warning text-center\">\r\n          <fa-icon\r\n            [icon]=\"this.activitiesService.showSideMenu ? faChevronUp : faChevronDown\"\r\n            (click)=\"this.activitiesService.showSideMenu = !this.activitiesService.showSideMenu\"\r\n            class=\"handy text-warning\"\r\n            size=\"sm\"\r\n          ></fa-icon>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"col-lg-7 bg-light\" id=\"workareaContent\">\r\n      <app-workarea></app-workarea>\r\n    </div>\r\n\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core'\r\nimport { RouterModule, Routes } from '@angular/router'\r\nimport { CommonModule } from '@angular/common'\r\nimport { ActivitiesComponent } from './activities.component'\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    redirectTo: 'selected',\r\n    pathMatch: 'full'\r\n  },\r\n  {\r\n    path: ':aid',\r\n    component: ActivitiesComponent\r\n  }\r\n]\r\n\r\n@NgModule({\r\n  declarations: [],\r\n  imports: [\r\n    [RouterModule.forChild(routes)],\r\n    CommonModule\r\n  ],\r\n  exports: [RouterModule]\r\n})\r\n\r\nexport class ActivitiesRoutingModule { }\r\n","import { Component, OnInit, OnDestroy } from '@angular/core'\r\nimport { ActivatedRoute } from '@angular/router'\r\nimport { NgbModal, NgbModalOptions } from '@ng-bootstrap/ng-bootstrap'\r\nimport { Subscription } from 'rxjs'\r\n\r\nimport { faList } from '@fortawesome/free-solid-svg-icons'\r\nimport { faInfoCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { faQuestionCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { faChevronDown } from '@fortawesome/free-solid-svg-icons'\r\nimport { faChevronUp } from '@fortawesome/free-solid-svg-icons'\r\nimport { faLeaf } from '@fortawesome/free-solid-svg-icons'\r\nimport { faBookBookmark } from '@fortawesome/free-solid-svg-icons'\r\n\r\n// WNGX services and components\r\nimport { CollectUserNamesComponent } from './components/collect-user-names/collect-user-names.component'\r\nimport { PublisherService } from './../../catalogue/publisher/publisher.service'\r\nimport { ActivitiesService } from './activities.service'\r\nimport { UserService } from '../../../core/services/user/user.service'\r\nimport { WebcourseService } from '../webcourse.service'\r\nimport { Activity } from './workarea/models/activity.model'\r\n\r\n@Component({\r\n  selector: 'app-activities',\r\n  templateUrl: './activities.component.html',\r\n  styleUrls: ['./activities.component.scss']\r\n})\r\nexport class ActivitiesComponent implements OnInit, OnDestroy {\r\n\r\n  private modalOptions: NgbModalOptions\r\n  private sub: Subscription\r\n\r\n  faList = faList\r\n  faLeaf = faLeaf\r\n  faInfoCircle = faInfoCircle\r\n  faQuestionCircle = faQuestionCircle\r\n  faChevronUp = faChevronUp\r\n  faChevronDown = faChevronDown\r\n  faBookBookmark = faBookBookmark\r\n\r\n  constructor(\r\n    private activatedRoute: ActivatedRoute,\r\n    private ngbModal: NgbModal,\r\n    public activitiesService: ActivitiesService,\r\n    private userService: UserService,\r\n    public publisherService: PublisherService,\r\n    public webcourseService: WebcourseService\r\n  ) {\r\n    this.modalOptions = {\r\n      backdrop: 'static',\r\n      centered: true,\r\n      keyboard: false\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (!this.userService.user.first_name) {\r\n      const comp = this.ngbModal.open(CollectUserNamesComponent, this.modalOptions)\r\n      comp.componentInstance.user = this.userService.user\r\n    }\r\n\r\n    this.activitiesService.getActivities(this.activatedRoute.snapshot.paramMap.get('aid'))\r\n      .subscribe(\r\n        (activitySet: Activity[]) => {\r\n          this.activitiesService.bootstrapCourse(activitySet)\r\n        }\r\n      )\r\n\r\n    this.sub = this.activatedRoute.params.subscribe(\r\n      data => {\r\n        this.activitiesService.loadActivities(data.aid)\r\n      }\r\n    )\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub.unsubscribe()\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { ReactiveFormsModule } from '@angular/forms'\r\nimport { ActiveModeComponent } from './active-mode.component'\r\nimport { PipesModule } from './../../../../../shared/pipes/pipes.module'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ActiveModeComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReactiveFormsModule,\r\n    PipesModule\r\n  ],\r\n  exports: [\r\n    ActiveModeComponent\r\n  ]\r\n})\r\n\r\nexport class ActiveModeModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\nimport { NavComponent } from './nav.component'\r\n\r\n@NgModule({\r\n  declarations: [NavComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FontAwesomeModule\r\n  ],\r\n  exports: [NavComponent]\r\n})\r\n\r\nexport class NavModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop'\r\n\r\n/* Webcourse-NG resources */\r\nimport { DndComponent } from './dnd.component'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DndComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    DragDropModule\r\n  ],\r\n  exports: [ DndComponent ]\r\n})\r\n\r\nexport class DndModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { ClickRotateComponent } from './click-rotate.component'\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [ClickRotateComponent],\r\n  imports: [CommonModule],\r\n  exports: [ClickRotateComponent]\r\n})\r\nexport class ClickRotateModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { DemoFlagComponent } from './demo-flag.component'\r\nimport { FormsModule } from '@angular/forms'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DemoFlagComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule\r\n  ],\r\n  exports: [ DemoFlagComponent ]\r\n})\r\nexport class DemoFlagModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\n\r\n// WNGX imports\r\nimport { BeforeAndAfterComponent } from './before-and-after.component'\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BeforeAndAfterComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FontAwesomeModule\r\n  ],\r\n  exports: [\r\n    BeforeAndAfterComponent\r\n  ]\r\n})\r\n\r\nexport class BeforeAndAfterModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\n\r\n// WNGX imports\r\nimport { CompletionCertComponent } from './completion-cert.component'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CompletionCertComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    FontAwesomeModule\r\n  ],\r\n  exports: [\r\n    CompletionCertComponent\r\n  ]\r\n})\r\n\r\nexport class CompletionCertModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\n\r\n// WNGX imports\r\nimport { BeforeAndAfterModule } from './before-and-after/before-and-after.module'\r\nimport { CompletionCertModule } from './completion-cert/completion-cert.module'\r\n\r\nimport { SpecialActivityComponent } from './special-activity.component'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SpecialActivityComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    BeforeAndAfterModule,\r\n    CompletionCertModule\r\n  ],\r\n  exports: [\r\n    SpecialActivityComponent\r\n  ]\r\n})\r\n\r\nexport class SpecialActivityModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { BookmarkButtonComponent } from './bookmark-button.component'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BookmarkButtonComponent\r\n  ],\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [\r\n    BookmarkButtonComponent\r\n  ]\r\n})\r\nexport class BookmarkButtonModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\n\r\nimport { WorkAreaComponent } from './workarea.component'\r\nimport { ActiveModeModule } from './active-mode/active-mode.module'\r\nimport { ReviewModeModule } from './review-mode/review-mode.module'\r\nimport { PipesModule } from './../../../../shared/pipes/pipes.module'\r\nimport { NavModule } from './nav/nav.module'\r\nimport { DndModule } from './activities/dnd/dnd.module'\r\nimport { ChapterEndComponent } from './components/chapter-end/chapter-end.component'\r\nimport { CourseEndComponent } from './components/course-end/course-end.component'\r\nimport { ClickRotateModule } from './activities/click-rotate/click-rotate.module'\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\nimport { DemoFlagModule } from '../../builder/activity/demo-flag/demo-flag.module';\r\nimport { SpecialActivityModule } from './activities/special-activity/special-activity.module'\r\nimport { BookmarkButtonModule } from '../sidebar/tabs/student/bookmarks/bookmark-button/bookmark-button.module'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    WorkAreaComponent,\r\n    ChapterEndComponent,\r\n    CourseEndComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReviewModeModule,\r\n    ActiveModeModule,\r\n    NavModule,\r\n    PipesModule,\r\n    DndModule,\r\n    ClickRotateModule,\r\n    FontAwesomeModule,\r\n    DemoFlagModule,\r\n    SpecialActivityModule,\r\n    BookmarkButtonModule\r\n  ],\r\n  exports: [\r\n    WorkAreaComponent,\r\n    SpecialActivityModule\r\n  ]\r\n})\r\nexport class WorkAreaModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { ActivityHelpComponent } from './activity-help.component'\r\nimport { LoadingSpinnerModule } from '../../../../../../../core/modules/loading-spinner/loading-spinner.module'\r\n\r\n@NgModule({\r\n  declarations: [ActivityHelpComponent],\r\n  imports: [\r\n    CommonModule,\r\n    LoadingSpinnerModule\r\n  ],\r\n  exports: [ActivityHelpComponent]\r\n})\r\n\r\nexport class ActivityHelpModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { RouterModule } from '@angular/router'\r\nimport { ActivitiesBarComponent } from './activities-bar.component'\r\n\r\n@NgModule({\r\n  declarations: [ActivitiesBarComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule\r\n  ],\r\n  exports: [ActivitiesBarComponent]\r\n})\r\nexport class ActivitiesBarModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap'\r\nimport { SelectedComponent } from './selected.component'\r\nimport { LoadingSpinnerModule } from '../../../../../../../core/modules/loading-spinner/loading-spinner.module'\r\nimport { ActivitiesBarModule } from '../../../shared/activities-bar/activities-bar.module'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SelectedComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgbModule,\r\n    LoadingSpinnerModule,\r\n    ActivitiesBarModule\r\n  ],\r\n  exports: [SelectedComponent]\r\n})\r\nexport class SelectedModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { RouterModule } from '@angular/router'\r\nimport { ActivitiesBarModule } from '../../../shared/activities-bar/activities-bar.module'\r\nimport { LoadingSpinnerModule } from '../../../../../../../core/modules/loading-spinner/loading-spinner.module'\r\n\r\nimport { ChapterIndexComponent } from './chapter-index.component'\r\n\r\n@NgModule({\r\n  declarations: [ChapterIndexComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    ActivitiesBarModule,\r\n    LoadingSpinnerModule\r\n  ],\r\n  exports: [\r\n    ChapterIndexComponent\r\n  ]\r\n})\r\nexport class ChapterIndexModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { PublisherInfoComponent } from './publisher-info.component'\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\nimport { LoadingSpinnerModule } from '../../../../../../../core/modules/loading-spinner/loading-spinner.module'\r\n\r\n@NgModule({\r\n  declarations: [PublisherInfoComponent],\r\n  imports: [\r\n    CommonModule,\r\n    FontAwesomeModule,\r\n    LoadingSpinnerModule\r\n  ],\r\n  exports: [PublisherInfoComponent]\r\n})\r\n\r\nexport class PublisherInfoModule { }\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { BookmarksComponent } from './bookmarks.component'\r\nimport { LoadingSpinnerModule } from 'src/app/core/modules/loading-spinner/loading-spinner.module'\r\n\r\n@NgModule({\r\n  declarations: [BookmarksComponent],\r\n  imports: [\r\n    CommonModule,\r\n    LoadingSpinnerModule\r\n  ],\r\n  exports: [BookmarksComponent]\r\n})\r\n\r\nexport class BookmarksModule { }\r\n","import { NgModule } from '@angular/core'\nimport { CommonModule } from '@angular/common'\nimport { StudentMenuComponent } from './student-menu.component'\n\nimport { SelectedModule } from '../../tabs/student/selected/selected.module'\nimport { ChapterIndexModule } from '../../tabs/student/chapter-index/chapter-index.module'\nimport { PublisherInfoModule } from '../../tabs/student/publisher-info/publisher-info.module'\nimport { BookmarksModule } from '../../tabs/student/bookmarks/bookmarks.module'\nimport { ActivityHelpModule } from '../../tabs/student/activity-help/activity-help.module'\n\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap'\n\n@NgModule({\n  declarations: [\n    StudentMenuComponent\n  ],\n  imports: [\n    CommonModule,\n    NgbModule,\n    SelectedModule,\n    ChapterIndexModule,\n    PublisherInfoModule,\n    BookmarksModule,\n    ActivityHelpModule\n  ],\n  exports: [\n    StudentMenuComponent\n  ]\n})\n\nexport class StudentMenuModule { }\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { ActivitiesRoutingModule } from './activities-routing.module'\r\nimport { FormsModule } from '@angular/forms'\r\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap'\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\n\r\nimport { WorkAreaModule } from './workarea/workarea.module'\r\nimport { ThemeModule } from '../../../views/theme/theme.module'\r\nimport { ActivityHelpModule } from './sidebar/tabs/student/activity-help/activity-help.module'\r\nimport { PipesModule } from './../../../shared/pipes/pipes.module'\r\nimport { LoadingSpinnerModule } from './../../../core/modules/loading-spinner/loading-spinner.module'\r\nimport { StudentMenuModule } from './sidebar/menu/student/student-menu.module'\r\n\r\nimport { ActivitiesComponent } from './activities.component'\r\nimport { CollectUserNamesComponent } from './components/collect-user-names/collect-user-names.component'\r\nimport { BookmarksModule } from './sidebar/tabs/student/bookmarks/bookmarks.module'\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ActivitiesComponent,\r\n    CollectUserNamesComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    NgbModule,\r\n    FormsModule,\r\n    FontAwesomeModule,\r\n    ActivitiesRoutingModule,\r\n    WorkAreaModule,\r\n    ThemeModule,\r\n    ActivityHelpModule,\r\n    PipesModule,\r\n    LoadingSpinnerModule,\r\n    StudentMenuModule,\r\n    BookmarksModule\r\n  ],\r\n  providers: [\r\n  ],\r\n  exports: [\r\n    FormsModule,\r\n    CollectUserNamesComponent\r\n  ]\r\n})\r\n\r\nexport class ActivitiesModule { }\r\n"],"x_google_ignoreList":[9,10]}