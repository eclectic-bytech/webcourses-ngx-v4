<nav
  id="header-menu"
  class="navbar navbar-expand-lg navbar-light"
  [ngClass]="theme.bootstrap_nav"

  >

  <a class="navbar-brand" href="#" (click)="logoLink(theme)">
    <img
      id="logo"
      *ngIf="theme.logo"
      [src]="this.sanit.bypassSecurityTrustResourceUrl(theme.logo)"
    >
  </a>

  <button (click)="menuCollapsed = !menuCollapsed" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent" [ngbCollapse]="menuCollapsed">
    <ul class="navbar-nav mr-auto">

      <!-- STANDARD MAIN NAVIGATION, SYSTEM BRANDED AND LINKED -->

      <ng-container *ngIf="theme.publisher_id == 1; else publisherCustom">
        <!-- HOME PAGE LINK -->
        <li class="nav-item px-2 py-1 mx-2"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
        >
          <a class="nav-link" [routerLink]="['/']" (click)="collapseMenus()">Home</a>
        </li>

        <!-- CATALOGUE / WEBCOURSES LINK -->
        <li class="nav-item px-2 py-1 mx-2"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
        >
          <a class="nav-link" [routerLink]="['/catalogue']" (click)="collapseMenus()">Webcourses</a>
        </li>

        <!-- HELP PAGE LINK -->
        <li class="nav-item px-2 py-1 mx-2"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
        >
          <a class="nav-link" [routerLink]="['/help']" (click)="collapseMenus()">Help</a>
        </li>
      </ng-container>


      <!-- PUBLISHER'S MAIN NAVIGATION, WITH EXIT LINK TO MAIN SYSTEM -->

      <ng-template #publisherCustom>
        <!-- CATALOGUE / WEBCOURSES LINK -->
        <li class="nav-item px-2 py-1 mx-2"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
        >
          <a class="nav-link" [routerLink]="['/catalogue', 'publisher', theme.path]" (click)="collapseMenus()">{{ theme.label }} Webcourses</a>
        </li>

        <!-- HELP PAGE LINK -->
        <li class="nav-item px-2 py-1 mx-2"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
        >
          <a class="nav-link" [routerLink]="['/help', theme.path ]" (click)="collapseMenus()">Help</a>
        </li>

        <!-- EXIT TO MAIN CATALOGUE LINK -->
        <li class="nav-item px-2 py-1 mx-2"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
        >
          <a class="nav-link" [routerLink]="['/catalogue' ]" (click)="collapseMenus()">Exit {{ theme.label }}</a>
        </li>
      </ng-template>

    </ul>


    <div class="text-lg-right px-3" style="line-height: 1.2;">
      <a
        [href]="this.userService.user ? '/user/dashboard/' : '/user/login'"
        [innerHtml]="this.userService.user ? 'Dashboard' : 'Sign&nbsp;in'"
        id="signIn-dashboard"
        class="nav-link handy"
      >
      </a>
      <small id="user-name" class="activity-menu-label" [innerHtml]="this.userService.user ? this.userService.user.username : 'Guest'"></small>
    </div>

    <!-- LOGGED IN USER - PROFILE ICON WITH DROP DOWN -->
    <div
      *ngIf="this.userService.user; else anonUser"
      ngbDropdown
      >

      <button class="btn" ngbDropdownToggle>
        <img
          ngxGravatar
          [src]="this.gravatarMd5.gravatarMD5src(this.userService.user.email)"
          [size]='36'
        >
      </button>

      <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown" ngbDropdownMenu>

        <!-- USER MENU: MY COURSES-->
        <a class="dropdown-item"
          [routerLink]="['/user', 'webcourses']"
          (click)="collapseMenus()"
          ngbDropdownItem
        >
          <fa-icon [icon]="faGraduationCap" class="py-3 px-2 text-warning"></fa-icon>
          My courses
        </a>

        <!-- MENU ITEMS DIVIDER -->
        <div class="dropdown-divider"></div>

        <!-- 'SIGN OUT' MENU OPTION: Uses button for proper cursor at hover -->
        <button class="dropdown-item"
          (click)="this.headerbarService.signOut()"
          ngbDropdownItem
        >
          <fa-icon [icon]="faWrench" class="py-3 px-2 text-warning"></fa-icon>
          Sign out
        </button>

      </div>
    </div>

    <!-- ANON USER, WITH GENERIC USER ICON -->
    <ng-template #anonUser>
      <img
        ngxGravatar
        [src]="this.gravatarMd5.gravatarMD5src('anon@webcourses.io')"
        [size]='36'
      >
    </ng-template>

  </div>

</nav>


<!--
  <div class="collapse navbar-collapse" id="navbarSupportedContent" [ngbCollapse]="menuCollapsed">
    <ul class="navbar-nav">

      <ng-container *ngIf="theme.publisher_id == 1; else PublisherHome">
        <li
          [routerLink]="['/']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-item handy px-2 py-1 mx-0 mx-lg-2 mt-3 mt-lg-0"
          >
          <a class="nav-link" (click)="collapseMenus()">Home</a>
        </li>
        <li
          [routerLink]="['/catalogue']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-item handy px-2 py-1 mx-0 mx-lg-2 mt-3 mt-lg-0"
          >
          <a class="nav-link" (click)="collapseMenus()">Web Courses</a>
        </li>
        <li
          [routerLink]="['/help']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-item handy px-2 py-1 mx-0 mx-lg-2 mt-3 mt-lg-0"
          >
          <a class="nav-link" (click)="collapseMenus()">Help</a>
        </li>

        <!~~ <li
          [routerLink]="['/catalogue', 'publishers']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-item handy px-2 py-1 mx-0 mx-lg-2"
          >
          <a class="nav-link text-light" (click)="collapseMenus()">Publishers</a>
        </li>
        <li
          [routerLink]="['/about']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-item handy px-2 py-1 mx-0 mx-lg-2"
          >
          <a class="nav-link text-light" (click)="collapseMenus()">About us</a>
        </li> ~~>
      </ng-container>

      <ng-template #PublisherHome>
        <li
          [routerLink]="['/catalogue', 'publisher', theme.path]"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-item handy px-2 py-1 mx-2 mt-3 mt-lg-0"
          >
          <a class="nav-link" (click)="collapseMenus()">{{ theme.label }} Web Courses</a>
        </li>
        <li
          [routerLink]="['/help', (theme.path != 'default') ? theme.path : '']"
          [routerLinkActive]="['active']"
          [routerLinkActiveOptions]="{exact: true}"
          class="nav-item handy px-2 py-1 mx-0 mx-lg-2 mt-3 mt-lg-0"
          >
          <a class="nav-link" (click)="collapseMenus()">Help</a>
        </li>
        <li [routerLink]="'/catalogue'" class="nav-item handy px-2 py-1 mx-2">
          <a class="nav-link" style="opacity:.52" (click)="collapseMenus()">Exit {{ theme.label }}</a>
        </li>
      </ng-template>

    </ul>
  </div>

  <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent2" [ngbCollapse]="menuCollapsed2">

    <div
      ngbDropdown
      role="group"
      aria-label="User Menu"
      placement="bottom-right"
      display="dynamic"
    >

      <div class="container">
        <div class="row">
          <div class="col text-right" style="line-height: 1.2">
            <a
              [href]="this.userService.user ? '/user/dashboard/' : '/user/login'"
              [innerHtml]="this.userService.user ? 'Dashboard' : 'Sign&nbsp;in'"
              id="signIn-dashboard"
              class="nav-link handy"
            >
            </a>

            <small id="user-name" class="activity-menu-label" [innerHtml]="this.userService.user ? this.userService.user.username : 'Guest'"></small>

          </div>
          <div class="col p-0" ngbDropdownToggle *ngIf="this.userService.user; else noDropdown">
            <img
              ngxGravatar
              [src]="this.gravatarMd5.gravatarMD5src(this.userService.user.email)"
              [size]='36'
            >
          </div>
          <ng-template #noDropdown>
            <img
              ngxGravatar
              [src]="this.gravatarMd5.gravatarMD5src('anon@webcourses.io')"
              [size]='36'
            >
          </ng-template>
        </div>
      </div>

      <div
        class="dropdown-menu mt-2"
        *ngIf="this.userService.user"
        ngbDropdownMenu
      >

        <button
          ngbDropdownItem
          [routerLink]="['/user', 'webcourses']"
          (click)="collapseMenus()"
          class="nav-item handy p-3"
          >
          <fa-icon [icon]="faGraduationCap" class="py-3 px-2 text-warning"></fa-icon>
          My Courses3
        </button>

        <!~~ [routerLink]="['/publisher', this.user.publisherId, 'webcourses']" ~~>
        <button
          ngbDropdownItem
          [routerLink]="['/admin/', 'publisher', 'dashboard']"
          [routerLinkActive]="['active2']"
          (click)="collapseMenus()"
          class="nav-item handy p-3"
          >
          <fa-icon [icon]="faGem" class="py-3 px-2 text-warning"></fa-icon>
          Publisher
        </button>

        <button
          ngbDropdownItem
          [routerLink]="['/admin', 'dashboard']"
          [routerLinkActive]="['active2']"
          (click)="collapseMenus()"
          class="nav-item handy p-3"
          >
          <fa-icon [icon]="faWrench" class="py-3 px-2 text-warning"></fa-icon>
          Admin
        </button>

        <button
          ngbDropdownItem
          (click)="this.headerbarService.signOut()"
          class="nav-item handy p-3"
          >
          <fa-icon [icon]="faWrench" class="py-3 px-2 text-warning"></fa-icon>
          Sign out
        </button>
      </div>
    </div>


    <ul class="navbar-nav" style="min-width:190px">
      <li
        *ngIf="this.userService.user"
        [routerLink]="['/user', 'webcourses']"
        (click)="collapseMenus()"
        class="nav-item btn-group d-xs-block d-lg-none handy mt-4 mb-2 justify-content-end">
        My Courses2
      </li>
      <!~~ [routerLink]="['/publisher', this.user.publisherId, 'webcourses']" ~~>
      <li
        [routerLink]="['/admin', 'publisher', 'dashboard']"
        (click)="collapseMenus()"
        class="nav-item btn-group d-xs-block d-lg-none handy my-2 justify-content-end">
        Publisher
      </li>
      <li
        [routerLink]="['/admin', 'dashboard']"
        (click)="collapseMenus()"
        class="nav-item btn-group d-xs-block d-lg-none handy my-2 justify-content-end">
        Admin
      </li>
    </ul>

  </div>
-->
