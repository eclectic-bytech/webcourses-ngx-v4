<div class="pr-lg-4 pr-md-1 pr-sm-0"
  *ngIf="this.selectedCourseService.selectedActivitySet$ | async as activity"
  >
  <div [@FadeInOut2]="this.activitiesService.endOfChapter || this.activitiesService.endOfCourse || activity">
    <div *ngIf="!this.activitiesService.endOfChapter && !this.activitiesService.endOfCourse; else eo">
      <button class="btn btn-primary mr-3"
        (click)="calcFollowingAid(-1)"
        [disabled]="this.activitiesService.waitingForApi || activity[activity.length -1].meta.seq == 1"
        >
        <fa-icon [icon]="faStepBackward"></fa-icon>
      </button>

      <button type="button" class="btn btn-primary"
        *ngIf="activity[activity.length -1].user_answers"
        (click)="calcFollowingAid(1)"
        [disabled]="this.activitiesService.waitingForApi"
        >
        NEXT
        <fa-icon [icon]="faStepForward" class="mr-2 ml-1"></fa-icon>
      </button>

      <button type="submit" class="btn btn-success"
        *ngIf="!activity[activity.length -1].user_answers"
        (click)="SaveButton()"
        [disabled]="this.activitiesService.waitingForApi || !this.activeModeService.activityForm.valid"
        >
        {{ activity[activity.length -1].meta.activity_type === 'info' || activity[activity.length -1].meta.activity_type === 'special' ? 'MARK READ' : 'SAVE' }}
        <fa-icon
          class="ml-2 mr-1 fa-regular"
          [icon]="activity[activity.length -1].meta.activity_type === 'info' ? faCheck : faPenNib"
          [ngClass]="this.activeModeService.activityForm.valid ? 'fa-fade' : ''"
          style="--fa-animation-duration: 2s"
        ></fa-icon>
      </button>
    </div>

    <ng-template #eo>
      <button
        *ngIf="this.activitiesService.endOfChapter"
        [disabled]="this.activitiesService.waitingForApi"
        (click)="ContinueButton()"
        class="btn btn-primary"
      >
        CONTINUE
        <fa-icon [icon]="faStepForward" class="ml-2 mr-1"></fa-icon>
      </button>

      <button
        *ngIf="this.activitiesService.endOfCourse"
        [disabled]="this.activitiesService.waitingForApi"
        (click)="ReviewButton()"
        class="btn btn-primary"
      >
        REVIEW
        <fa-icon [icon]="faStepForward" class="ml-2 mr-1"></fa-icon>
      </button>
    </ng-template>
  </div>
</div>
